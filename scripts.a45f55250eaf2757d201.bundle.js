if("undefined"==typeof GreenTurtle)var GreenTurtle=function(){function t(){}function e(t){this.target=t||{graph:{subjects:{},prefixes:{},terms:{}}},this.theOne="_:"+(new Date).getTime(),this.vocabulary=this.language=null,this.blankCounter=0,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}],this.inXHTMLMode=!1,this.absURIRE=/[\w\_\-]+:\S+/,this.finishedHandlers=[],this.init()}function r(){var t=this;this.curieParser={trim:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},parse:function(e,r){"["==(e=this.trim(e)).charAt(0)&&"]"==e.charAt(e.length-1)&&(e=e.substring(1,e.length-1));var n=e.indexOf(":");if(0<=n){var i=e.substring(0,n);if(""==i)return(i=t.prefixes[""])?i+e.substring(n+1):null;if("_"==i)return"_:"+e.substring(n+1);if(s.NCNAME.test(i)&&(i=t.prefixes[i]))return i+e.substring(n+1)}return r?t.baseURI.resolve(e):e}},this.base=null,this.toString=function(t){var e;for(e in t=t?"@base <"+t+"> .\n":"",this.subjects)t+=this.subjects[e].toString(),t+="\n";return t},this.clear=function(){this.subjects={},this.prefixes={},this.terms={}},this.clear()}function n(t,e){this.graph=t,this.id=this.subject=e,this.predicates={},this.origins=[],this.types=[]}function i(t){this.predicate=this.id=t,this.objects=[]}function a(t){e.call(this,t)}function o(t,e){this._data_={owner:t,subject:e,properties:{}}}function s(t){this._data_={tripleCount:0,graph:new r},this._data_.graph.baseURI=this.parseURI(t),this._data_.baseURI=this._data_.graph.baseURI,Object.defineProperty(this,"rdfa",{value:new function(t){this.query=function(e,r){if(!e)return t.getProjections(r);var n,i=[];for(n in t._data_.graph.subjects){var a,o=t._data_.graph.subjects[n];for(a in e){var u=t._data_.graph.curieParser.parse(a,!0);if(!(u=o.predicates[u])){o=null;break}for(var l=t._data_.graph.curieParser.parse(e[a],!1),c=null,h=0;!c&&h<u.objects.length;h++)u.objects[h].value==l&&(c=u.objects[h]);if(!c){o=null;break}}o&&i.push(s.toProjection(t,o,r))}return i}}(this),writable:!1,configurable:!1,enumerable:!0}),Object.defineProperty(this,"graph",{value:this._data_.graph,writable:!1,configurable:!1,enumerable:!0}),Object.defineProperty(this,"implementation",{value:GreenTurtle.implementation,writable:!1,configurable:!1,enumerable:!0})}function u(){this.reset(),this.onError=function(t,e){console.log(t+": "+e)}}var l={};t.SCHEME=/^[A-Za-z][A-Za-z0-9\+\-\.]*\:/,t.prototype.parseURI=function(e){var r=t.SCHEME.exec(e);if(!r)throw"Bad URI value, no scheme: "+e;return(e={spec:e}).scheme=r[0].substring(0,r[0].length-1),e.schemeSpecificPart=e.spec.substring(r[0].length),"/"==e.schemeSpecificPart.charAt(0)&&"/"==e.schemeSpecificPart.charAt(1)?this.parseGeneric(e):e.isGeneric=!1,e.normalize=function(){if(this.isGeneric&&0!=this.segments.length){if(1<this.path.length&&"/."==this.path.substring(this.path.length-2))this.path=this.path.substring(0,this.path.length-1),this.segments.splice(this.segments.length-1,1);else{var t=this.path.charAt(this.path.length-1);"/"!=t&&(t="");for(var e=0;e<this.segments.length;e++)0<e&&".."==this.segments[e]&&(this.segments.splice(e-1,2),e-=2),"."==this.segments[e]&&(this.segments.splice(e,1),e--);this.path=0==this.segments.length?"/":"/"+this.segments.join("/")+t}this.schemeSpecificPart="//"+this.authority+this.path,"undefined"!=typeof this.query&&(this.schemeSpecificPart+="?"+this.query),"undefined"!=typeof this.fragment&&(this.schemeSpecificPart+="#"+this.fragment),this.spec=this.scheme+":"+this.schemeSpecificPart}},e.resolve=function(e){if(!e)return this.spec;if("#"==e.charAt(0)){var r=this.spec.lastIndexOf("#");return 0>r?this.spec+e:this.spec.substring(0,r)+e}if(!this.isGeneric)throw"Cannot resolve uri against non-generic URI: "+this.spec;return e.indexOf(":"),"/"==e.charAt(0)?this.scheme+"://"+this.authority+e:"."==e.charAt(0)&&"/"==e.charAt(1)?"/"==this.path.charAt(this.path.length-1)?this.scheme+"://"+this.authority+this.path+e.substring(2):(r=this.path.lastIndexOf("/"),this.scheme+"://"+this.authority+this.path.substring(0,r)+e.substring(1)):t.SCHEME.test(e)?e:"?"==e.charAt(0)||"/"==this.path.charAt(this.path.length-1)?this.scheme+"://"+this.authority+this.path+e:(r=this.path.lastIndexOf("/"),this.scheme+"://"+this.authority+this.path.substring(0,r+1)+e)},e.relativeTo=function(t){if(t.scheme!=this.scheme)return this.spec;if(!this.isGeneric)throw"A non generic URI cannot be made relative: "+this.spec;if(!t.isGeneric)throw"Cannot make a relative URI against a non-generic URI: "+t.spec;if(t.authority!=this.authority)return this.spec;for(var e=0;e<this.segments.length&&e<t.segments.length;e++)if(this.segments[e]!=t.segments[e]){for(var r="",n=e;n<t.segments.length;n++)r+="../";for(n=e;n<this.segments.length;n++)r+=this.segments[n],n+1<this.segments.length&&(r+="/");return"/"==this.path.charAt(this.path.length-1)&&(r+="/"),r}if(this.segments.length==t.segments.length)return this.hash?this.hash:this.query?this.query:"";if(e<this.segments.length){for(r="",n=e;n<this.segments.length;n++)r+=this.segments[n],n+1<this.segments.length&&(r+="/");return"/"==this.path.charAt(this.path.length-1)&&(r+="/"),r}throw"Cannot calculate a relative URI for "+this.spec+" against "+t.spec},e},t.prototype.parseGeneric=function(t){if("/"!=t.schemeSpecificPart.charAt(0)||"/"!=t.schemeSpecificPart.charAt(1))throw"Generic URI values should start with '//':"+t.spec;var e=t.schemeSpecificPart.substring(2),r=e.indexOf("/");if(t.authority=0>r?e:e.substring(0,r),t.path=0>r?"":e.substring(r),0<=(e=t.path.indexOf("#"))&&(t.fragment=t.path.substring(e+1),t.path=t.path.substring(0,e)),0<=(e=t.path.indexOf("?"))&&(t.query=t.path.substring(e+1),t.path=t.path.substring(0,e)),"/"==t.path||""==t.path)t.segments=[];else for(t.segments=t.path.split(/\//),0<t.segments.length&&""==t.segments[0]&&1<t.path.length&&"/"!=t.path.charAt(1)&&t.segments.shift(),0<t.segments.length&&0<t.path.length&&"/"==t.path.charAt(t.path.length-1)&&""==t.segments[t.segments.length-1]&&1<t.path.length&&"/"!=t.path.charAt(t.path.length-2)&&t.segments.pop(),e=0;e<t.segments.length;e++){r=t.segments[e].split(/%[A-Za-z0-9][A-Za-z0-9]|[\ud800-\udfff][\ud800-\udfff]|[A-Za-z0-9\-\._~!$&'()*+,;=@:\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/);for(var n=0;n<r.length;n++)if(0<r[n].length)throw"Unecaped character "+r[n].charAt(0)+" ("+r[n].charCodeAt(0)+") in URI "+t.spec}t.isGeneric=!0},(e.prototype=new t).constructor=e,e.prototype.newBlankNode=function(){return this.blankCounter++,"_:"+this.blankCounter},e.XMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral",e.HTMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML",e.PlainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral",e.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object",e.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",e.nameChar="[-A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd\u10000-\uefffF.0-9\xb7\u0300-\u036f\u203f-\u2040]",e.nameStartChar="[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u0131\u0134-\u013e\u0141-\u0148\u014a-\u017e\u0180-\u01c3\u01cd-\u01f0\u01f4-\u01f5\u01fa-\u0217\u0250-\u02a8\u02bb-\u02c1\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03ce\u03d0-\u03d6\u03da\u03dc\u03de\u03e0\u03e2-\u03f3\u0401-\u040c\u040e-\u044f\u0451-\u045c\u045e-\u0481\u0490-\u04c4\u04c7-\u04c8\u04cb-\u04cc\u04d0-\u04eb\u04ee-\u04f5\u04f8-\u04f9\u0531-\u0556\u0559\u0561-\u0586\u05d0-\u05ea\u05f0-\u05f2\u0621-\u063a\u0641-\u064a\u0671-\u06b7\u06ba-\u06be\u06c0-\u06ce\u06d0-\u06d3\u06d5\u06e5-\u06e6\u0905-\u0939\u093d\u0958-\u0961\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09dc-\u09dd\u09df-\u09e1\u09f0-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8b\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ae0\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b36-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb5\u0bb7-\u0bb9\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c60-\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cde\u0ce0-\u0ce1\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d60-\u0d61\u0e01-\u0e2e\u0e30\u0e32-\u0e33\u0e40-\u0e45\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab\u0ead-\u0eae\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0f40-\u0f47\u0f49-\u0f69\u10a0-\u10c5\u10d0-\u10f6\u1100\u1102-\u1103\u1105-\u1107\u1109\u110b-\u110c\u110e-\u1112\u113c\u113e\u1140\u114c\u114e\u1150\u1154-\u1155\u1159\u115f-\u1161\u1163\u1165\u1167\u1169\u116d-\u116e\u1172-\u1173\u1175\u119e\u11a8\u11ab\u11ae-\u11af\u11b7-\u11b8\u11ba\u11bc-\u11c2\u11eb\u11f0\u11f9\u1e00-\u1e9b\u1ea0-\u1ef9\u1f00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2126\u212a-\u212b\u212e\u2180-\u2182\u3041-\u3094\u30a1-\u30fa\u3105-\u312c\uac00-\ud7a3\u4e00-\u9fa5\u3007\u3021-\u3029_]",e.NCNAME=RegExp("^"+e.nameStartChar+e.nameChar+"*$"),e.trim=function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},e.prototype.tokenize=function(t){return e.trim(t).split(/\s+/)},e.prototype.parseSafeCURIEOrCURIEOrURI=function(t,r,n){return"["==(t=e.trim(t)).charAt(0)&&"]"==t.charAt(t.length-1)?0==(t=(t=t.substring(1,t.length-1)).trim(t)).length?null:"_:"==t?this.theOne:this.parseCURIE(t,r,n):this.parseCURIEOrURI(t,r,n)},e.prototype.parseCURIE=function(t,r){var n=t.indexOf(":");if(0<=n){var i=t.substring(0,n);if(""==i)return(i=r[""])?i+t.substring(n+1):null;if("_"==i)return"_:"+t.substring(n+1);if(e.NCNAME.test(i)&&(i=r[i]))return i+t.substring(n+1)}return null},e.prototype.parseCURIEOrURI=function(t,e,r){return(e=this.parseCURIE(t,e,r))?e:this.resolveAndNormalize(r,t)},e.prototype.parsePredicate=function(t,e,r,n,i,a){return""==t?null:(t=this.parseTermOrCURIEOrAbsURI(t,e,a?null:r,n,i))&&0==t.indexOf("_:")?null:t},e.prototype.parseTermOrCURIEOrURI=function(t,r,n,i,a){return t=e.trim(t),(i=this.parseCURIE(t,i,a))||(i=n[t])?i:(i=n[i=t.toLowerCase()])?i:r&&!this.absURIRE.exec(t)?r+t:this.resolveAndNormalize(a,t)},e.prototype.parseTermOrCURIEOrAbsURI=function(t,r,n,i,a){if(t=e.trim(t),i=this.parseCURIE(t,i,a))return i;if(n){if(r&&!this.absURIRE.exec(t))return r+t;if(r=n[t])return r;if(r=n[r=t.toLowerCase()])return r}return this.absURIRE.exec(t)?this.resolveAndNormalize(a,t):null},e.prototype.resolveAndNormalize=function(t,e){var r=t.resolve(e);return(r=this.parseURI(r)).normalize(),r.spec},e.prototype.parsePrefixMappings=function(t,e){for(var r=this.tokenize(t),n=null,i=0;i<r.length;i++)":"==r[i][r[i].length-1]?n=r[i].substring(0,r[i].length-1):n&&(e[n]=this.target.baseURI?this.target.baseURI.resolve(r[i]):r[i],n=null)},e.prototype.copyMappings=function(t){var e,r={};for(e in t)r[e]=t[e];return r},e.prototype.ancestorPath=function(t){for(var e="";t&&t.nodeType!=Node.DOCUMENT_NODE;)e="/"+t.localName+e,t=t.parentNode;return e},e.prototype.setContext=function(t){"html"==t.localName&&"XHTML+RDFa 1.1"==t.getAttribute("version")?this.setXHTMLContext():"html"==t.localName||"http://www.w3.org/1999/xhtml"==t.namespaceURI?document.doctype?"-//W3C//DTD XHTML+RDFa 1.0//EN"==document.doctype.publicId&&"http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd"==document.doctype.systemId?(console.log("WARNING: RDF 1.0 is not supported.  Defaulting to HTML5 mode."),this.setHTMLContext()):"-//W3C//DTD XHTML+RDFa 1.1//EN"==document.doctype.publicId&&"http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd"==document.doctype.systemId?this.setXHTMLContext():this.setHTMLContext():this.setHTMLContext():this.setXMLContext()},e.prototype.setInitialContext=function(){this.vocabulary=null,this.target.graph.prefixes={},this.target.graph.terms={},this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}],this.target.graph.prefixes[""]="http://www.w3.org/1999/xhtml/vocab#",this.target.graph.prefixes.grddl="http://www.w3.org/2003/g/data-view#",this.target.graph.prefixes.ma="http://www.w3.org/ns/ma-ont#",this.target.graph.prefixes.owl="http://www.w3.org/2002/07/owl#",this.target.graph.prefixes.rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#",this.target.graph.prefixes.rdfa="http://www.w3.org/ns/rdfa#",this.target.graph.prefixes.rdfs="http://www.w3.org/2000/01/rdf-schema#",this.target.graph.prefixes.rif="http://www.w3.org/2007/rif#",this.target.graph.prefixes.skos="http://www.w3.org/2004/02/skos/core#",this.target.graph.prefixes.skosxl="http://www.w3.org/2008/05/skos-xl#",this.target.graph.prefixes.wdr="http://www.w3.org/2007/05/powder#",this.target.graph.prefixes.void="http://rdfs.org/ns/void#",this.target.graph.prefixes.wdrs="http://www.w3.org/2007/05/powder-s#",this.target.graph.prefixes.xhv="http://www.w3.org/1999/xhtml/vocab#",this.target.graph.prefixes.xml="http://www.w3.org/XML/1998/namespace",this.target.graph.prefixes.xsd="http://www.w3.org/2001/XMLSchema#",this.target.graph.prefixes.sd="http://www.w3.org/ns/sparql-service-description#",this.target.graph.prefixes.org="http://www.w3.org/ns/org#",this.target.graph.prefixes.gldp="http://www.w3.org/ns/people#",this.target.graph.prefixes.cnt="http://www.w3.org/2008/content#",this.target.graph.prefixes.dcat="http://www.w3.org/ns/dcat#",this.target.graph.prefixes.earl="http://www.w3.org/ns/earl#",this.target.graph.prefixes.ht="http://www.w3.org/2006/http#",this.target.graph.prefixes.ptr="http://www.w3.org/2009/pointers#",this.target.graph.prefixes.cc="http://creativecommons.org/ns#",this.target.graph.prefixes.ctag="http://commontag.org/ns#",this.target.graph.prefixes.dc="http://purl.org/dc/terms/",this.target.graph.prefixes.dcterms="http://purl.org/dc/terms/",this.target.graph.prefixes.foaf="http://xmlns.com/foaf/0.1/",this.target.graph.prefixes.gr="http://purl.org/goodrelations/v1#",this.target.graph.prefixes.ical="http://www.w3.org/2002/12/cal/icaltzd#",this.target.graph.prefixes.og="http://ogp.me/ns#",this.target.graph.prefixes.rev="http://purl.org/stuff/rev#",this.target.graph.prefixes.sioc="http://rdfs.org/sioc/ns#",this.target.graph.prefixes.v="http://rdf.data-vocabulary.org/#",this.target.graph.prefixes.vcard="http://www.w3.org/2006/vcard/ns#",this.target.graph.prefixes.schema="http://schema.org/",this.target.graph.terms.describedby="http://www.w3.org/2007/05/powder-s#describedby",this.target.graph.terms.license="http://www.w3.org/1999/xhtml/vocab#license",this.target.graph.terms.role="http://www.w3.org/1999/xhtml/vocab#role"},e.prototype.setXMLContext=function(){this.setInitialContext(),this.inHTMLMode=this.inXHTMLMode=!1},e.prototype.setHTMLContext=function(){this.setInitialContext(),this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.inXHTMLMode=!1,this.inHTMLMode=!0},e.prototype.setXHTMLContext=function(){this.setInitialContext(),this.inXHTMLMode=!0,this.inHTMLMode=!1,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.target.graph.terms.alternate="http://www.w3.org/1999/xhtml/vocab#alternate",this.target.graph.terms.appendix="http://www.w3.org/1999/xhtml/vocab#appendix",this.target.graph.terms.bookmark="http://www.w3.org/1999/xhtml/vocab#bookmark",this.target.graph.terms.cite="http://www.w3.org/1999/xhtml/vocab#cite",this.target.graph.terms.chapter="http://www.w3.org/1999/xhtml/vocab#chapter",this.target.graph.terms.contents="http://www.w3.org/1999/xhtml/vocab#contents",this.target.graph.terms.copyright="http://www.w3.org/1999/xhtml/vocab#copyright",this.target.graph.terms.first="http://www.w3.org/1999/xhtml/vocab#first",this.target.graph.terms.glossary="http://www.w3.org/1999/xhtml/vocab#glossary",this.target.graph.terms.help="http://www.w3.org/1999/xhtml/vocab#help",this.target.graph.terms.icon="http://www.w3.org/1999/xhtml/vocab#icon",this.target.graph.terms.index="http://www.w3.org/1999/xhtml/vocab#index",this.target.graph.terms.last="http://www.w3.org/1999/xhtml/vocab#last",this.target.graph.terms.license="http://www.w3.org/1999/xhtml/vocab#license",this.target.graph.terms.meta="http://www.w3.org/1999/xhtml/vocab#meta",this.target.graph.terms.next="http://www.w3.org/1999/xhtml/vocab#next",this.target.graph.terms.prev="http://www.w3.org/1999/xhtml/vocab#prev",this.target.graph.terms.previous="http://www.w3.org/1999/xhtml/vocab#previous",this.target.graph.terms.section="http://www.w3.org/1999/xhtml/vocab#section",this.target.graph.terms.stylesheet="http://www.w3.org/1999/xhtml/vocab#stylesheet",this.target.graph.terms.subsection="http://www.w3.org/1999/xhtml/vocab#subsection",this.target.graph.terms.start="http://www.w3.org/1999/xhtml/vocab#start",this.target.graph.terms.top="http://www.w3.org/1999/xhtml/vocab#top",this.target.graph.terms.up="http://www.w3.org/1999/xhtml/vocab#up",this.target.graph.terms.p3pv1="http://www.w3.org/1999/xhtml/vocab#p3pv1",this.target.graph.terms.related="http://www.w3.org/1999/xhtml/vocab#related",this.target.graph.terms.role="http://www.w3.org/1999/xhtml/vocab#role",this.target.graph.terms.transformation="http://www.w3.org/1999/xhtml/vocab#transformation"},e.prototype.init=function(){},e.prototype.newSubjectOrigin=function(){},e.prototype.addTriple=function(){},e.dateTimeTypes=[{pattern:/-?P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?(?:T(?:[0-9]+H)?(?:[0-9]+M)?(?:[0-9]+(?:\.[0-9]+)?S)?)?/,type:"http://www.w3.org/2001/XMLSchema#duration"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9]T(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#dateTime"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9](?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#date"},{pattern:/(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#time"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]/,type:"http://www.w3.org/2001/XMLSchema#gYearMonth"},{pattern:/-?[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9]/,type:"http://www.w3.org/2001/XMLSchema#gYear"}],e.deriveDateTimeType=function(t){for(var r=0;r<e.dateTimeTypes.length;r++){var n=e.dateTimeTypes[r].pattern.exec(t);if(n&&n[0].length==t.length)return e.dateTimeTypes[r].type}return null},e.prototype.process=function(t,r){t.nodeType==Node.DOCUMENT_NODE?this.setContext(t=t.documentElement):t.parentNode.nodeType==Node.DOCUMENT_NODE&&this.setContext(t);var n=[],i=function(t){var e=t.indexOf("#");return 0<=e&&(t=t.substring(0,e)),r&&r.baseURIMap&&(t=r.baseURIMap(t)),t};for(n.push({current:t,context:this.push(null,i(t.baseURI))});0<n.length;)if((u=n.shift()).parent){if(!u.context.parent||u.context.parent.listMapping!=u.listMapping)for(var a in u.listMapping)if(0==(d=u.listMapping[a]).length)this.addTriple(u.parent,u.subject,a,{type:e.objectURI,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});else{for(var o=[],s=0;s<d.length;s++)o.push(this.newBlankNode());for(s=0;s<o.length;s++)this.addTriple(u.parent,o[s],"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",d[s]),this.addTriple(u.parent,o[s],"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",{type:e.objectURI,value:s+1<o.length?o[s+1]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});this.addTriple(u.parent,u.subject,a,{type:e.objectURI,value:o[0]})}}else{o=u.current;var u,l=!1,c=null,h=null,f=null,p=(u=u.context).prefixes,d=!1,g=[],m=u.listMapping,v=!u.parent,y=u.language,b=u.vocabulary,w=this.parseURI(i(o.baseURI));for(o.item=null,(s=o.getAttributeNode("vocab"))&&(0<(s=e.trim(s.value)).length?this.addTriple(o,w.spec,"http://www.w3.org/ns/rdfa#usesVocabulary",{type:e.objectURI,value:b=s}):b=this.vocabulary),s=0;s<o.attributes.length;s++)if("x"==(_=o.attributes[s]).nodeName.charAt(0)&&0==_.nodeName.indexOf("xmlns:")){d||(p=this.copyMappings(p),d=!0);var x=_.nodeName.substring(6),_=e.trim(_.value);p[x]=this.target.baseURI?this.target.baseURI.resolve(_):_}for((s=o.getAttributeNode("prefix"))&&(d||(p=this.copyMappings(p),d=!0),this.parsePrefixMappings(s.value,p)),d=null,s=0;!d&&s<this.langAttributes.length;s++)d=o.getAttributeNodeNS(this.langAttributes[s].namespaceURI,this.langAttributes[s].localName);d&&(y=0<(s=e.trim(d.value)).length?s:null),x=o.getAttributeNode("rel"),_=o.getAttributeNode("rev");var j=o.getAttributeNode("typeof"),O=o.getAttributeNode("property"),L=o.getAttributeNode("datatype"),R=this.inHTMLMode?o.getAttributeNode("datetime"):null,M=o.getAttributeNode("content"),I=o.getAttributeNode("about"),A=o.getAttributeNode("src"),U=o.getAttributeNode("resource"),C=o.getAttributeNode("href"),W=o.getAttributeNode("inlist"),N=[];if(x){var D=this.tokenize(x.value);for(s=0;s<D.length;s++)(a=this.parsePredicate(D[s],b,u.terms,p,w,this.inHTMLMode&&null!=O))&&N.push(a)}var T=[];if(_)for(D=this.tokenize(_.value),s=0;s<D.length;s++)(a=this.parsePredicate(D[s],b,u.terms,p,w,this.inHTMLMode&&null!=O))&&T.push(a);if(!this.inHTMLMode||null==x&&null==_||null==O||(0==N.length&&(x=null),0==T.length&&(_=null)),x||_?(I&&(c=this.parseSafeCURIEOrCURIEOrURI(I.value,p,w)),j&&(f=c),c||(o.parentNode.nodeType==Node.DOCUMENT_NODE?c=i(o.baseURI):u.parentObject&&(c=i(o.parentNode.baseURI)==u.parentObject?i(o.baseURI):u.parentObject)),U&&(h=this.parseSafeCURIEOrCURIEOrURI(U.value,p,w)),h||(C?h=this.resolveAndNormalize(w,encodeURI(C.value)):A?h=this.resolveAndNormalize(w,encodeURI(A.value)):!j||I||this.inXHTMLMode&&("head"==o.localName||"body"==o.localName)||(h=this.newBlankNode())),!j||I||!this.inXHTMLMode||"head"!=o.localName&&"body"!=o.localName?j&&!I&&(f=h):f=c):!O||M||L?(I&&(c=this.parseSafeCURIEOrCURIEOrURI(I.value,p,w)),!c&&U&&(c=this.parseSafeCURIEOrCURIEOrURI(U.value,p,w)),!c&&C&&(c=this.resolveAndNormalize(w,encodeURI(C.value))),!c&&A&&(c=this.resolveAndNormalize(w,encodeURI(A.value))),c||(o.parentNode.nodeType==Node.DOCUMENT_NODE?c=i(o.baseURI):!this.inXHTMLMode&&!this.inHTMLMode||"head"!=o.localName&&"body"!=o.localName?j?c=this.newBlankNode():u.parentObject&&(c=i(o.parentNode.baseURI)==u.parentObject?i(o.baseURI):u.parentObject,O||(l=!0)):c=i(o.parentNode.baseURI)==u.parentObject?i(o.baseURI):u.parentObject),j&&(f=c)):(I&&(c=this.parseSafeCURIEOrCURIEOrURI(I.value,p,w),j&&(f=c)),c||o.parentNode.nodeType!=Node.DOCUMENT_NODE?!c&&u.parentObject&&(c=i(o.parentNode.baseURI)==u.parentObject?i(o.baseURI):u.parentObject):(c=i(o.baseURI),j&&(f=c)),j&&!f&&(U&&(f=this.parseSafeCURIEOrCURIEOrURI(U.value,p,w)),!f&&C&&(f=this.resolveAndNormalize(w,encodeURI(C.value))),!f&&A&&(f=this.resolveAndNormalize(w,encodeURI(A.value))),f||!this.inXHTMLMode&&!this.inHTMLMode||"head"!=o.localName&&"body"!=o.localName||(f=c),f||(f=this.newBlankNode()),h=f)),c&&(I||U||f)&&(s=c,j&&!I&&!U&&h&&(s=h),this.newSubjectOrigin(o,s)),f)for(D=this.tokenize(j.value),s=0;s<D.length;s++)(d=this.parseTermOrCURIEOrAbsURI(D[s],b,u.terms,p,w))&&this.addTriple(o,f,e.typeURI,{type:e.objectURI,value:d});if(c&&c!=u.parentObject&&(m={},v=!0),h){if(x&&W)for(s=0;s<N.length;s++)(d=m[N[s]])||(m[N[s]]=d=[]),d.push({type:e.objectURI,value:h});else if(x)for(s=0;s<N.length;s++)this.addTriple(o,c,N[s],{type:e.objectURI,value:h});if(_)for(s=0;s<T.length;s++)this.addTriple(o,h,T[s],{type:e.objectURI,value:c})}else{if(c&&!h&&(x||_)&&(h=this.newBlankNode()),x&&W)for(s=0;s<N.length;s++)(d=m[N[s]])||(m[a]=d=[]),g.push({predicate:N[s],list:d});else if(x)for(s=0;s<N.length;s++)g.push({predicate:N[s],forward:!0});if(_)for(s=0;s<T.length;s++)g.push({predicate:T[s],forward:!1})}if(O)for(T=N=null,L?(N=""==L.value?e.PlainLiteralURI:this.parseTermOrCURIEOrAbsURI(L.value,b,u.terms,p,w),T=R&&!M?R.value:N==e.XMLLiteralURI||N==e.HTMLLiteralURI?null:M?M.value:o.textContent):M?(N=e.PlainLiteralURI,T=M.value):R?(N=e.deriveDateTimeType(T=R.value))||(N=e.PlainLiteralURI):!x&&!_&&(U&&(T=this.parseSafeCURIEOrCURIEOrURI(U.value,p,w)),!T&&C?T=this.resolveAndNormalize(w,encodeURI(C.value)):!T&&A&&(T=this.resolveAndNormalize(w,encodeURI(A.value))),T&&(N=e.objectURI)),N||(j&&!I?(N=e.objectURI,T=f):(T=o.textContent,this.inHTMLMode&&"time"==o.localName&&(N=e.deriveDateTimeType(T)),N||(N=e.PlainLiteralURI))),D=this.tokenize(O.value),s=0;s<D.length;s++)(a=this.parsePredicate(D[s],b,u.terms,p,w))&&(W?((d=m[a])||(m[a]=d=[]),d.push(N==e.XMLLiteralURI||N==e.HTMLLiteralURI?{type:N,value:o.childNodes}:{type:N||e.PlainLiteralURI,value:T,language:y})):this.addTriple(o,c,a,N==e.XMLLiteralURI||N==e.HTMLLiteralURI?{type:N,value:o.childNodes}:{type:N||e.PlainLiteralURI,value:T,language:y}));if(c&&!l)for(s=0;s<u.incomplete.length;s++)u.incomplete[s].list?u.incomplete[s].list.push({type:e.objectURI,value:c}):u.incomplete[s].forward?this.addTriple(o,u.subject,u.incomplete[s].predicate,{type:e.objectURI,value:c}):this.addTriple(o,c,u.incomplete[s].predicate,{type:e.objectURI,value:u.subject});for(f=null,w=c,l?((f=this.push(u,u.subject)).parentObject=i(o.parentNode.baseURI)==u.parentObject?i(o.baseURI):u.parentObject,f.incomplete=u.incomplete,f.language=y,f.prefixes=p):((f=this.push(u,c)).parentObject=h||c||u.subject,f.prefixes=p,f.incomplete=g,h&&(w=h,m={},v=!0),f.listMapping=m,f.language=y),f.vocabulary=b,v&&n.unshift({parent:o,context:u,subject:w,listMapping:m}),o=o.lastChild;o;o=o.previousSibling)o.nodeType==Node.ELEMENT_NODE&&n.unshift({current:o,context:f})}for(this.inHTMLMode&&this.copyProperties(),s=0;s<this.finishedHandlers.length;s++)this.finishedHandlers[s](t)},e.prototype.copyProperties=function(){},e.prototype.push=function(t,e){return{parent:t,subject:e||(t?t.subject:null),parentObject:null,incomplete:[],listMapping:t?t.listMapping:{},language:t?t.language:this.language,prefixes:t?t.prefixes:this.target.graph.prefixes,terms:t?t.terms:this.target.graph.terms,vocabulary:t?t.vocabulary:this.vocabulary}},n.prototype.toString=function(){var t,e="_:"==this.subject.substring(0,2)?this.subject+"":"<"+this.subject+">",r=!0;for(t in this.predicates)r?r=!1:e+=";\n",e+=" "+this.predicates[t];return e+" ."},n.prototype.toObject=function(){var t,r={subject:this.subject,predicates:{}};for(t in this.predicates){var n=this.predicates[t],i={predicate:t,objects:[]};r.predicates[t]=i;for(var a=0;a<n.objects.length;a++){var o=n.objects[a];if(o.type==e.XMLLiteralURI){for(var s=new XMLSerializer,u="",l=0;l<o.value.length;l++)o.value[l].nodeType==Node.ELEMENT_NODE?u+=s.serializeToString(o.value[l]):o.value[l].nodeType==Node.TEXT_NODE&&(u+=o.value[l].nodeValue);i.objects.push({type:o.type,value:u,language:o.language})}else i.objects.push({type:o.type,value:o.value,language:o.language})}}return r},n.prototype.getValues=function(){for(var t=[],e=0;e<arguments.length;e++){var r=this.graph.curieParser.parse(arguments[e],!0);if(r=this.predicates[r])for(var n=0;n<r.objects.length;n++)t.push(r.objects[n].value)}return t},i.getPrefixMap=function(t){for(var e={};t.attributes;){for(var r=0;r<t.attributes.length;r++)if("http://www.w3.org/2000/xmlns/"==t.attributes[r].namespaceURI){var n=t.attributes[r].localName;"xmlns"==t.attributes[r].localName&&(n=""),n in e||(e[n]=t.attributes[r].nodeValue)}t=t.parentNode}return e},i.prototype.toString=function(){for(var t="<"+this.predicate+"> ",e=0;e<this.objects.length;e++)if(0<e&&(t+=", "),"http://www.w3.org/1999/02/22-rdf-syntax-ns#object"==this.objects[e].type)t="_:"==this.objects[e].value.substring(0,2)?t+this.objects[e].value:t+"<"+this.objects[e].value+">";else if("http://www.w3.org/2001/XMLSchema#integer"==this.objects[e].type||"http://www.w3.org/2001/XMLSchema#decimal"==this.objects[e].type||"http://www.w3.org/2001/XMLSchema#double"==this.objects[e].type||"http://www.w3.org/2001/XMLSchema#boolean"==this.objects[e].type)t+=this.objects[e].value;else if("http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral"==this.objects[e].type){for(var r=new XMLSerializer,n="",a=0;a<this.objects[e].value.length;a++)if(this.objects[e].value[a].nodeType==Node.ELEMENT_NODE){var o,s=i.getPrefixMap(this.objects[e].value[a]),u=[];for(o in s)u.push(o);u.sort();for(var l=this.objects[e].value[a].cloneNode(!0),c=0;c<u.length;c++)l.setAttributeNS("http://www.w3.org/2000/xmlns/",0==u[c].length?"xmlns":"xmlns:"+u[c],s[u[c]]);n+=r.serializeToString(l)}else this.objects[e].value[a].nodeType==Node.TEXT_NODE&&(n+=this.objects[e].value[a].nodeValue);t+='"""'+n.replace(/"""/,'\\"\\"\\"')+'"""^^<http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral>'}else t=0<=(r=this.objects[e].value).indexOf("\n")||0<=r.indexOf("\r")?t+'"""'+r.replace(/"""/,'\\"\\"\\"')+'"""':t+'"'+r.replace(/"/,'\\"')+'"',"http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral"!=this.objects[e].type?t+="^^<"+this.objects[e].type+">":this.objects[e].language&&(t+="@"+this.objects[e].language);return t},(a.prototype=new e).constructor=e,a.prototype.getObjectSize=function(t){var e,r=0;for(e in t)t.hasOwnProperty(e)&&r++;return r},a.prototype.init=function(){this.target.tripleCount=0;var t=this;this.finishedHandlers.push(function(){for(var e in t.target.graph.subjects)0==t.getObjectSize(t.target.graph.subjects[e].predicates)&&delete t.target.graph.subjects[e]})},a.prototype.newSubjectOrigin=function(t,e){for(var r=this.newSubject(null,e),n=0;n<r.origins.length;n++)if(r.origins[n]===t)return;r.origins.push(t),t.data||Object.defineProperty(t,"data",{value:r,writable:!1,configurable:!0,enumerable:!0})},a.prototype.newSubject=function(t,e){var r=this.target.graph.subjects[e];return r||(r=new n(this.target,e),this.target.graph.subjects[e]=r),r},a.prototype.addTriple=function(t,r,n,a){var o=this.newSubject(t,r);(r=o.predicates[n])||(r=new i(n),o.predicates[n]=r);for(var s=0;s<r.objects.length;s++)if(r.objects[s].type==a.type&&r.objects[s].value==a.value)return void(r.objects[s].origin!==t&&(Array.isArray(r.objects[s].origin)||(n=[],n.push(r.objects[s].origin),r.objects[s].origin=n),r.objects[s].origin.push(t)));this.target.tripleCount++,r.objects.push(a),a.origin=t,n==e.typeURI&&o.types.push(a.value)},a.rdfaCopyPredicate="http://www.w3.org/ns/rdfa#copy",a.rdfaPatternType="http://www.w3.org/ns/rdfa#Pattern",a.prototype.copyProperties=function(){var t,r=[],n={};for(t in this.target.graph.subjects){var o=this.target.graph.subjects[t],s=o.predicates[a.rdfaCopyPredicate];if(s){r.push(t);for(var u=0;u<s.objects.length;u++)if(s.objects[u].type==e.objectURI){var l=s.objects[u].value,c=this.target.graph.subjects[l];if(c){var h=c.predicates[e.typeURI];if(h){for(var f=!1,p=0;p<h.objects.length&&!f;p++)h.objects[p].value==a.rdfaPatternType&&h.objects[p].type==e.objectURI&&(f=!0);if(f)for(var d in n[l]=!0,c.predicates)if(l=c.predicates[d],d==e.typeURI){if(1!=l.objects.length)for(p=0;p<l.objects.length;p++)l.objects[p].value!=a.rdfaPatternType&&((h=o.predicates[d])||(h=new i(d),o.predicates[d]=h),h.objects.push({type:l.objects[p].type,value:l.objects[p].value,language:l.objects[p].language,origin:l.objects[p].origin}),o.types.push(l.objects[p].value))}else for((h=o.predicates[d])||(h=new i(d),o.predicates[d]=h),p=0;p<l.objects.length;p++)h.objects.push({type:l.objects[p].type,value:l.objects[p].value,language:l.objects[p].language,origin:l.objects[p].origin})}}}}}for(u=0;u<r.length;u++)delete(o=this.target.graph.subjects[r[u]]).predicates[a.rdfaCopyPredicate];for(t in n)delete this.target.graph.subjects[t]},o.prototype.getProperties=function(){var t,e=[];for(t in this._data_.properties)e.push(t);return e},o.prototype.getSubject=function(){return this._data_.subject},o.prototype.get=function(t){return t=this._data_.owner._data_.graph.curieParser.parse(t,!0),(t=this._data_.properties[t])?t[0]:null},o.prototype.getAll=function(t){return t=this._data_.owner._data_.graph.curieParser.parse(t,!0),this._data_.properties[t]},(s.prototype=new t).constructor=s,s.nameChar="[-A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd\u10000-\uefffF.0-9\xb7\u0300-\u036f\u203f-\u2040]",s.nameStartChar="[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u0131\u0134-\u013e\u0141-\u0148\u014a-\u017e\u0180-\u01c3\u01cd-\u01f0\u01f4-\u01f5\u01fa-\u0217\u0250-\u02a8\u02bb-\u02c1\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03ce\u03d0-\u03d6\u03da\u03dc\u03de\u03e0\u03e2-\u03f3\u0401-\u040c\u040e-\u044f\u0451-\u045c\u045e-\u0481\u0490-\u04c4\u04c7-\u04c8\u04cb-\u04cc\u04d0-\u04eb\u04ee-\u04f5\u04f8-\u04f9\u0531-\u0556\u0559\u0561-\u0586\u05d0-\u05ea\u05f0-\u05f2\u0621-\u063a\u0641-\u064a\u0671-\u06b7\u06ba-\u06be\u06c0-\u06ce\u06d0-\u06d3\u06d5\u06e5-\u06e6\u0905-\u0939\u093d\u0958-\u0961\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09dc-\u09dd\u09df-\u09e1\u09f0-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8b\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ae0\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b36-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb5\u0bb7-\u0bb9\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c60-\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cde\u0ce0-\u0ce1\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d60-\u0d61\u0e01-\u0e2e\u0e30\u0e32-\u0e33\u0e40-\u0e45\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab\u0ead-\u0eae\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0f40-\u0f47\u0f49-\u0f69\u10a0-\u10c5\u10d0-\u10f6\u1100\u1102-\u1103\u1105-\u1107\u1109\u110b-\u110c\u110e-\u1112\u113c\u113e\u1140\u114c\u114e\u1150\u1154-\u1155\u1159\u115f-\u1161\u1163\u1165\u1167\u1169\u116d-\u116e\u1172-\u1173\u1175\u119e\u11a8\u11ab\u11ae-\u11af\u11b7-\u11b8\u11ba\u11bc-\u11c2\u11eb\u11f0\u11f9\u1e00-\u1e9b\u1ea0-\u1ef9\u1f00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2126\u212a-\u212b\u212e\u2180-\u2182\u3041-\u3094\u30a1-\u30fa\u3105-\u312c\uac00-\ud7a3\u4e00-\u9fa5\u3007\u3021-\u3029_]",s.NCNAME=RegExp("^"+e.nameStartChar+e.nameChar+"*$"),s.toProjection=function(t,e,r){var n,i=new o(t,e.subject);for(n in e.predicates){var a=e.predicates[n],s=[];i._data_.properties[n]=s;for(var u=0;u<a.objects.length;u++)s.push(a.objects[u].value)}if(r)for(var l in r)n=t._data_.graph.curieParser.parse(n=r[l],!0),(s=i._data_.properties[n])&&(i[l]=1==s.length?s[0]:s);return i},s.prototype.getProperties=function(t){var e,r=[];if(t){if(t=this._data_.graph.curieParser.parse(t,!0),i=this._data_.graph.subjects[t])for(var n in i.predicates)r.push(n)}else for(e in t={},this._data_.graph.subjects){var i=this._data_.graph.subjects[e];if(i)for(n in i.predicates)t[n]||(t[n]=!0,r.push(n))}return r},s.prototype.getSubjects=function(t,e){var r=[];if(t&&(t=this._data_.graph.curieParser.parse(t,!0)),t&&e){var n,i=this._data_.graph.curieParser.parse(e,!0);for(n in this._data_.graph.subjects)if(s=(s=this._data_.graph.subjects[n]).predicates[t])for(var a=0;a<s.objects.length;a++)if(s.objects[a].value==e||s.objects[a].value==i){r.push(n);break}}else if(t)for(n in this._data_.graph.subjects)(s=(s=this._data_.graph.subjects[n]).predicates[t])&&r.push(n);else if(e)for(n in i=this._data_.graph.curieParser.parse(e,!0),this._data_.graph.subjects){var o,s=this._data_.graph.subjects[n];for(o in s.predicates)if(s=n.predicates[o]){var u=null;for(a=0;!u&&a<s.objects.length;a++)s.objects[a].value!=e&&node.objects[a].value!=i||(u=s.objects[a]);if(u){r.push(n);break}}}else for(n in this._data_.graph.subjects)r.push(n);return r},s.prototype.getValueOrigins=function(t,e){var r=[],n=function(t){if(t)for(var e=0;e<t.objects.length;e++)if(Array.isArray(t.objects[e].origin))for(var n=0;n<t.objects[e].origin.length;n++)r.push({origin:t.objects[e].origin[n],value:t.objects[e].value});else r.push({origin:t.objects[e].origin,value:t.objects[e].value})};if(e&&(e=this._data_.graph.curieParser.parse(e,!0)),t){t=this._data_.graph.curieParser.parse(t,!0);var i=this._data_.graph.subjects[t];if(i)if(e)n(i.predicates[e]);else for(var a in i.predicates)n(i.predicates[a])}else if(e)for(var o in this._data_.graph.subjects)n((i=this._data_.graph.subjects[o]).predicates[e]);else for(o in this._data_.graph.subjects)for(a in(i=this._data_.graph.subjects[o]).predicates)n(i.predicates[a]);return r},s.prototype.getValues=function(t,e){var r=[];if(e&&(e=this._data_.graph.curieParser.parse(e,!0)),t){t=this._data_.graph.curieParser.parse(t,!0);var n=this._data_.graph.subjects[t];if(n)if(e){var i=n.predicates[e];if(i)for(var a=0;a<i.objects.length;a++)r.push(i.objects[a].value)}else for(var o in n.predicates)for(i=n.predicates[o],a=0;a<i.objects.length;a++)r.push(i.objects[a].value)}else if(e){for(var s in this._data_.graph.subjects)if(i=(n=this._data_.graph.subjects[s]).predicates[e])for(a=0;a<i.objects.length;a++)r.push(i.objects[a].value)}else for(s in this._data_.graph.subjects)for(o in(n=this._data_.graph.subjects[s]).predicates)for(i=n.predicates[o],a=0;a<i.objects.length;a++)r.push(i.objects[a].value);return r},Object.defineProperty(s.prototype,"prefixes",{enumerable:!0,get:function(){return Object.keys(this._data_.graph.prefixes)}}),s.prototype.setMapping=function(t,e){this._data_.graph.prefixes[t]=e},s.prototype.getMapping=function(t){return this._data_.graph.prefixes[t]},s.prototype.expand=function(t){return this._data_.graph.curieParser.parse(t,!0)},s.prototype.shorten=function(t){for(prefix in this._data_.graph.prefixes){var e=this._data_.graph.prefixes[prefix];if(0==t.indexOf(e))return prefix+":"+t.substring(e.length)}return t},s.prototype.getSubject=function(t){return t?(t=this._data_.graph.curieParser.parse(t,!0),(t=this._data_.graph.subjects[t])?t:null):null},s.prototype.getProjection=function(t,e){if(!t)return null;t=this._data_.graph.curieParser.parse(t,!0);var r=this._data_.graph.subjects[t];return r?s.toProjection(this,r,e):null},s.prototype.getProjections=function(t,e,r){t&&(t=this._data_.graph.curieParser.parse(t,!0));var n=[];if("undefined"==typeof e&&"undefined"==typeof r&&(r=t),t&&e){var i,a=this._data_.graph.curieParser.parse(e,!0);for(i in this._data_.graph.subjects){var o=this._data_.graph.subjects[i],u=o.predicates[t];if(u)for(var l=0;l<u.objects.length;l++)if(u.objects[l].value==e||u.objects[l].value==a){n.push(s.toProjection(this,o,r));break}}}else if(t)for(i in this._data_.graph.subjects)(o=this._data_.graph.subjects[i]).predicates[t]&&n.push(s.toProjection(this,o,r));else for(i in this._data_.graph.subjects)n.push(s.toProjection(this,o=this._data_.graph.subjects[i],r));return n},s.prototype.merge=function(t,r){var n=0;if(!(o=!(!r||!r.mergeBlankNodes)))for(var i in this._data_.graph.subjects)(u=/_:([0-9]+)/.exec(i))&&(u=parseInt(u[1]))>n&&(n=u);if(t){var a={},o=o?function(t){return t}:function(t){var e=a[t];return!e&&/_:([0-9]+)/.test(t)&&(a[t]=e="_:"+ ++n),e||t};for(i in t){var s=o(i),u=t[i];if(s=this._data_.graph.subjects[i=s||i])for(var l in u.predicates){var c=u.predicates[l],h=s.predicates[l];if(h)for(var f=0;f<c.objects.length;f++){for(var p=c.objects[f],d=[],g=0;g<h.objects.length;g++)p.type!=e.XMLLiteralURI||h.objects[g].type==p.type&&h.objects[g].value===p.value?(h.objects[g].type!=p.type||h.objects[g].value==p.value)&&d.push(p):d.push(p);for(g=0;g<d.length;g++)d[g].type==e.objectURI&&(d[g].value=o(d[g].value)),h.objects.push(d[g])}else for(s.predicates[l]=c,f=0;f<c.objects.length;f++)c.objects[f].type==e.objectURI&&(c.objects[f].value=o(c.objects[f].value))}else for(l in this._data_.graph.subjects[i]=u,u.subject=i,u.predicates)for(c=u.predicates[l],f=0;f<c.objects.length;f++)c.objects[f].type==e.objectURI&&(c.objects[f].value=o(c.objects[f].value))}}if(r&&r.prefixes)for(var m in r.prefixes)this._data_.graph.prefixes[m]||(this._data_.graph.prefixes[m]=r.prefixes[m])},Element.prototype.getElementsByType=function(){var t=arguments,e=this.ownerDocument.createTreeWalker(this,NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){if(!e.data)return NodeFilter.FILTER_SKIP;for(var r=0;r<t.length;r++)if(0<=e.data.types.indexOf(t[r]))return NodeFilter.FILTER_ACCEPT;return NodeFilter.FILTER_SKIP}},!1),r=[];for(r.item=function(t){return this[t]};e.nextNode();)r.push(e.currentNode);return r},Element.prototype.getFirstElementByType=function(){var t=arguments,e=this.ownerDocument.createTreeWalker(this,NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){if(!e.data)return NodeFilter.FILTER_SKIP;for(var r=0;r<t.length;r++)if(0<=e.data.types.indexOf(t[r]))return NodeFilter.FILTER_ACCEPT;return NodeFilter.FILTER_SKIP}},!1);return e.nextNode()?e.currentNode:null},s.attach=function(t,e){Object.defineProperty(t,"data",{value:new s(e&&e.baseURI?e.baseURI:t.nodeType==Node.DOCUMENT_NODE?t.documentElement.baseURI:t.graph.baseURI),writable:!1,configurable:!1,enumerable:!0}),t.getElementsByType=function(t){return this.getElementsByProperty("http://www.w3.org/1999/02/22-rdf-syntax-ns#type",t)},t.getElementsBySubject=function(t){var e=[];if(e.item=function(t){return this[t]},t=this.data._data_.graph.curieParser.parse(t,!0),t=this.data._data_.graph.subjects[t])for(var r=0;r<t.origins.length;r++)e.push(t.origins[r]);return e},t.getElementsByProperty=function(t,e){var r=[];r.item=function(t){return this[t]},e&&(e=this.data._data_.graph.curieParser.parse(e,!1));var n,i="undefined"==typeof e;for(n in t=this.data._data_.graph.curieParser.parse(t,!0),this.data._data_.graph.subjects){var a=this.data._data_.graph.subjects[n].predicates[t];if(a)for(var o=0;o<a.objects.length;o++)(i||a.objects[o].value==e)&&(Array.isArray(a.objects[o].origin)?r.push.apply(r,a.objects[o].origin):r.push(a.objects[o].origin))}return r},t.getElementSubject=function(t){for(var e in this.data._data_.graph.subjects)if(0<=this.data._data_.graph.subjects[e].origins.indexOf(t))return e;return null}},(u.prototype=new t).constructor=u,u.commentRE=/^#.*/,u.wsRE=/^\s+/,u.iriRE=/^\<((?:(?:[^\x00-\x20<>"{}|^`\\]|\\u[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f]|\\U[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f])*))\>/,u.singleQuoteLiteralRE=/^'((?:[^'\n\r\\]*|\\'|\\)*)'/,u.doubleQuoteLiteralRE=/^\"((?:[^"\n\r\\]*|\\"|\\)*)\"/,u.longDoubleQuoteLiteralRE=/^\"\"\"((?:[^"\\]*|\\"|\\|\"(?!\")|\"\"(?!\"))*)\"\"\"/,u.longSingleQuoteLiteralRE=/^'''((?:[^'\\]*|\\'|\\|'(?!')|''(?!'))*)'''/,u.typeRE=/^\^\^/,u.dotRE=/^\./,u.openSquareBracketRE=/^\[/,u.closeSquareBracketRE=/^\]/,u.prefixRE=/^((?:(?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff])(?:(?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff]|[_\.\-\u00B7]|[0-9]|[\u0300-\u036F]|[\u203F-\u2040])*(?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff]|[_\-\u00B7]|[0-9]|[\u0300-\u036F]|[\u203F-\u2040]))?)?):/,u.blankNodeRE=/^(_:)/,u.localNameRE=/^((?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff]|[_:]|[0-9]|%[0-9A-Fa-f][0-9A-Fa-f]|\\[_~\.\-!$&'()*+,;=\/?#@%])(?:(?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff]|[_\-\.:\u00b7]|[\u0300-\u036F]|[\u203F-\u2040]|[0-9]|%[0-9A-Fa-f][0-9A-Fa-f]|\\[_~\.\-!$&'()*+,;=/?#@%])*(?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff]|[_\-:\u00b7]|[\u0300-\u036F]|[\u203F-\u2040]|[0-9]|%[0-9A-Fa-f][0-9A-Fa-f]|\\[_~\.\-!$&'()*+,;=/?#@%]))?)/,u.langRE=/^@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)/,u.prefixIDRE=/^@prefix/,u.baseRE=/^@base/,u.sparqlPrefixRE=/^[Pp][Rr][Ee][Ff][Ii][Xx]/,u.sparqlBaseRE=/^[Bb][Aa][Ss][Ee]/,u.semicolonRE=/^;/,u.commaRE=/^,/,u.aRE=/^a/,u.openParenRE=/^\(/,u.closeParenRE=/^\)/,u.integerRE=/^([+-]?[0-9]+)/,u.decimalRE=/^([+-]?[0-9]*\.[0-9]+)/,u.doubleRE=/^([+-]?(?:[0-9]+\.[0-9]*[eE][+-]?[0-9]+|\.[0-9]+[eE][+-]?[0-9]+|[0-9]+[eE][+-]?[0-9]+))/,u.booleanRE=/^(true|false)/,u.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",u.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object",u.plainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral",u.nilURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil",u.firstURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#first",u.restURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",u.xsdStringURI="http://www.w3.org/2001/XMLSchema#string",u.xsdIntegerURI="http://www.w3.org/2001/XMLSchema#integer",u.xsdDecimalURI="http://www.w3.org/2001/XMLSchema#decimal",u.xsdDoubleURI="http://www.w3.org/2001/XMLSchema#double",u.xsdBooleanURI="http://www.w3.org/2001/XMLSchema#boolean",u.prototype.reset=function(){this.context=new r,this.errorCount=this.blankNodeCounter=0,this.lineNumber=1},u.dumpGraph=function(t){for(var e in t)console.log(t[e].toString())},u.prototype.newBlankNode=function(){return this.blankNodeCounter++,"_:"+this.blankNodeCounter},u.prototype._match=function(t,e){var r=t.exec(e);return r?{text:r[0],remaining:e.substring(r[0].length),values:1<r.length?r.splice(1):null}:null},u.prototype._trim=function(t){var e=null;do{(e=u.wsRE.exec(t))&&(this.lineNumber+=e[0].split(/\n/).length-1,t=t.substring(e[0].length)),(e=u.commentRE.exec(t))&&(t=t.substring(e[0].length))}while(e);return t},u.prototype.reportError=function(t){this.onError(this.lineNumber,t)},u.prototype.parse=function(t,e){for(e&&(this.context.baseURI=this.parseURI(e));0<t.length;)0<(t=this._trim(t)).length&&(t=this.parseStatement(t))},u.prototype.parseStatement=function(t){if(e=this._match(u.prefixIDRE,t)){var e,r=this._trim(e.remaining);if(!(e=this.parsePrefixName(r)))return this.reportError("Cannot parse prefix after @prefix: "+t.substring(20)+"..."),this.errorCount++,r;if(t=e.prefix,r=this._trim(e.remaining),!(e=this.parseIRIReference(r)))return this.reportError("Cannot parse IRI after @prefix: "+r.substring(20)+"..."),this.errorCount++,r;this.context.prefixes[t]=this.context.baseURI?this.context.baseURI.resolve(e.iri):e.iri;try{this.parseURI(this.context.prefixes[t])}catch(t){this.reportError(t.toString()),this.errorCount++}return r=this._trim(e.remaining),(e=this._match(u.dotRE,r))?e.remaining:(this.reportError("Missing end . for @prefix statement.  Found: "+r.substring(0,20)+"..."),this.errorCount++,r)}if(e=this._match(u.baseRE,t)){if(r=this._trim(e.remaining),!(e=this.parseIRIReference(r)))return this.reportError("Cannot parse IRI after @base: "+r.substring(0,20)+"..."),this.errorCount++,r;try{this.context.baseURI=this.parseURI(this.context.baseURI?this.context.baseURI.resolve(e.iri):e.iri)}catch(t){this.reportError(t+"; IRI: "+e.iri),this.errorCount++}return r=this._trim(e.remaining),(e=this._match(u.dotRE,r))?e.remaining:(this.reportError("Missing end . for @base statement.  Found: "+r.substring(0,20)+"..."),this.errorCount++,r)}if(e=this._match(u.sparqlPrefixRE,t)){if(r=this._trim(e.remaining),!(e=this.parsePrefixName(r)))return this.reportError("Cannot parse prefix after PREFIX: "+t.substring(0,20)+"..."),this.errorCount++,r;if(t=e.prefix,r=this._trim(e.remaining),!(e=this.parseIRIReference(r)))return this.reportError("Cannot parse IRI after PREFIX: "+r.substring(0,20)+"..."),this.errorCount++,r;this.context.prefixes[t]=this.context.baseURI?this.context.baseURI.resolve(e.iri):e.iri;try{this.parseURI(this.context.prefixes[t])}catch(t){this.reportError(t.toString()),this.errorCount++}return e.remaining}if(e=this._match(u.sparqlBaseRE,t)){if(r=this._trim(e.remaining),!(e=this.parseIRIReference(r)))return this.reportError("Cannot parse IRI after BASE: "+r.substring(0,20)+"..."),this.errorCount++,r;try{this.context.baseURI=this.parseURI(this.context.baseURI?this.context.baseURI.resolve(e.iri):e.iri)}catch(t){this.reportError(t+"; IRI: "+e.iri),this.errorCount++}return e.remaining}return t=this.parseTriples(t),t=this._trim(t),(e=this._match(u.dotRE,t))?e.remaining:(this.reportError("Missing end . triples.  Found: "+t.substring(0,20)+"..."),this.errorCount++,t)},u.prototype.parseTriples=function(t){var e=this.parseIRI(t);if(e||(e=this.parseBlankNode(t)))return this.parsePredicateObjectList(e.iri,this._trim(e.remaining));if(e=this._match(u.openParenRE,t)){t=null;var r=e.remaining,n=null;do{if(r=this._trim(r),e=this._match(u.closeParenRE,r)){r=e.remaining,n?this.addTriple(n,u.restURI,{type:u.objectURI,value:u.nilURI}):t=this.newBlankNode();break}e=this.newBlankNode(),n?this.addTriple(n,u.restURI,{type:u.objectURI,value:e}):t=e,r=this.parseObject(n=e,u.firstURI,r)}while(0<r.length);return this.parsePredicateObjectList(t,this._trim(r))}return(e=this._match(u.openSquareBracketRE,t))?(t=this.newBlankNode(),r=this._trim(e.remaining),(e=this._match(u.closeSquareBracketRE,r))?r=e.remaining:(r=this.parsePredicateObjectList(t,r),(e=this._match(u.closeSquareBracketRE,this._trim(r)))?r=e.remaining:this.reportError("Missing end square bracket ']'.")),this.parsePredicateObjectList(t,this._trim(r),!0)):e?this.parsePredicateObjectList(e.iri,this._trim(e.remaining)):(this.reportError("Terminating: Cannot parse at "+t.substring(0,20)+" ..."),this.errorCount++,"")},u.prototype.parsePredicateObjectList=function(t,e,r){var n=!0,i=null;do{var a=this.parseIRI(e);if(!a&&(a=this._match(u.aRE,e))&&(a.iri=u.typeURI),!a)return r?e:(this.reportError("Terminating: Cannot parse predicate IRI."),this.errorCount++,"");if(i=this.parseObjectList(t,a.iri,this._trim(a.remaining)),a=this._match(u.semicolonRE,this._trim(i))){do{e=this._trim(a.remaining),a=this._match(u.semicolonRE,e)}while(a);r=!0}else n=!1}while(n);return i},u.prototype.parseObjectList=function(t,e,r){var n=!0,i=null;do{i=this.parseObject(t,e,r);var a=this._match(u.commaRE,this._trim(i));a?r=this._trim(a.remaining):n=!1}while(n);return i},u.prototype.parseObject=function(t,e,r){var n=this.parseIRI(r);if(n||(n=this.parseBlankNode(r)))return this.addTriple(t,e,{type:u.objectURI,value:n.iri}),n.remaining;if(n=this._match(u.openParenRE,r)){var i=t,a=n.remaining;do{if(a=this._trim(a),n=this._match(u.closeParenRE,a))return this.addTriple(i,i==t?e:u.restURI,{type:u.objectURI,value:u.nilURI}),n.remaining;n=this.newBlankNode(),i==t?this.addTriple(t,e,{type:u.objectURI,value:n}):this.addTriple(i,u.restURI,{type:u.objectURI,value:n}),a=this.parseObject(i=n,u.firstURI,a)}while(0<a.length)}return(n=this._match(u.openSquareBracketRE,r))?(r=this.newBlankNode(),this.addTriple(t,e,{type:u.objectURI,value:r}),a=this.parsePredicateObjectList(r,this._trim(n.remaining),!0),a=this._trim(a),(n=this._match(u.closeSquareBracketRE,a))?n.remaining:(this.reportError("Missing close square bracket ']' for blank node "+r+" predicate object list"),this.errorCount++,a)):(n=this.parseLiteral(r))?(this.addTriple(t,e,{type:n.type?n.type:u.plainLiteralURI,value:n.literal,language:n.language}),n.remaining):(this.reportError("Terminating: Cannot parse literal at "+r.substring(0,20)),this.errorCount++,"")},u.prototype.parsePrefixName=function(t){return(t=this._match(u.prefixRE,t))&&(t.prefix=t.values[0]),t},u.prototype.parseIRIReference=function(t){return(t=this._match(u.iriRE,t))&&(t.iri=u.expandURI(t.values[0])),t},u.prototype.parseIRI=function(t){var e=this._match(u.iriRE,t);if(e){t=u.expandURI(e.values[0]),e.iri=this.context.baseURI?this.context.baseURI.resolve(t):t;try{this.parseURI(e.iri)}catch(t){this.reportError(t.toString()),this.errorCount++}return e}if(e=this._match(u.prefixRE,t)){var r=e.values[0];if(!(t=this.context.prefixes[r]))return this.reportError("No prefix mapping for "+r),this.errorCount++,null;if(e=this._match(u.localNameRE,r=e.remaining)){e.iri=t+u.expandName(e.values[0]);try{this.parseURI(e.iri)}catch(t){this.reportError(t.toString()),this.errorCount++}return e}return{iri:t,remaining:r}}return null},u.prototype.parseBlankNode=function(t){return(t=this._match(u.blankNodeRE,t))&&(t=this._match(u.localNameRE,t.remaining))?(t.iri="_:"+u.expandName(t.values[0]),t):null},u.prototype.parseLiteral=function(t){var e=this._match(u.longDoubleQuoteLiteralRE,t);if(e||(e=this._match(u.longSingleQuoteLiteralRE,t)),e||(e=this._match(u.singleQuoteLiteralRE,t)),e||(e=this._match(u.doubleQuoteLiteralRE,t)),e){t=null;try{t=u.expandLiteral(e.values[0])}catch(t){this.reportError(t.toString()),this.errorCount++}var r=e.remaining;if(e=this._match(u.langRE,r))return e.literal=t,e.language=e.values[0],e;if(e=this._match(u.typeRE,r)){if(e=this.parseIRI(r=e.remaining))return e.literal=t,e.type=e.iri,e;this.reportError("Missing type URI after ^^"),this.errorCount++}return{literal:t,remaining:r}}return(e=this._match(u.doubleRE,t))?(e.literal=e.values[0],e.type=u.xsdDoubleURI,e):(e=this._match(u.decimalRE,t))?(e.literal=e.values[0],e.type=u.xsdDecimalURI,e):(e=this._match(u.integerRE,t))?(e.literal=e.values[0],e.type=u.xsdIntegerURI,e):(e=this._match(u.booleanRE,t))?(e.literal=e.values[0],e.type=u.xsdBooleanURI,e):null},u.prototype.newSubject=function(t){var e=this.context.subjects[t];return e||(e=new n(this.context,t),this.context.subjects[t]=e),e},u.expandHex=function(t){for(var e=t.split(/[0-9A-Fa-f]+/),r=0;r<e.length;r++)if(0<e[r].length)throw"Bad hex in escape: "+t;if(e=parseInt(t,16),isNaN(e))throw"Bad hex in escape: "+t;return 65536>e?String.fromCharCode(e):(e=1023&(t=e-65536),String.fromCharCode(55296+(t>>10))+String.fromCharCode(e+56320))},u.escapedSequenceRE=/(\\t|\\b|\\n|\\r|\\f|\\"|\\'|\\\\|(?:\\U[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f])|(?:\\u[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f]))/,u.expandLiteral=function(t){t=t.split(u.escapedSequenceRE);for(var e="",r=0;r<t.length;r++)if(0!=t[r].length)if("\\t"==t[r])e+="\t";else if("\\b"==t[r])e+="\b";else if("\\n"==t[r])e+="\n";else if("\\r"==t[r])e+="\r";else if("\\f"==t[r])e+="\f";else if('\\"'==t[r])e+='"';else if("\\'"==t[r])e+="'";else if("\\\\"==t[r])e+="\\";else if(6==t[r].length&&"\\"==t[r].charAt(0)&&"u"==t[r].charAt(1))e+=u.expandHex(t[r].substring(2));else if(10==t[r].length&&"\\"==t[r].charAt(0)&&"U"==t[r].charAt(1))e+=u.expandHex(t[r].substring(2));else{var n=t[r].substring(0,2);if(2==n.length&&"\\U"==n)throw"Bad hex in \\U escape "+t[r].substring(0,10);if(2==n.length&&"\\u"==n)throw"Bad hex in \\u escape "+t[r].substring(0,6);if(0<=(n=t[r].indexOf("\\")))throw"Bad escape "+t[r].substring(n,n+2);e+=t[r]}return e},u.escapedURIRE=/((?:\\U[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f])|(?:\\u[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f]))/,u.expandURI=function(t){t=t.split(u.escapedURIRE);for(var e="",r=0;r<t.length;r++)if(0!=t[r].length)if(6==t[r].length&&"\\"==t[r].charAt(0)&&"u"==t[r].charAt(1))e+=u.expandHex(t[r].substring(2));else if(10==t[r].length&&"\\"==t[r].charAt(0)&&"U"==t[r].charAt(1))e+=u.expandHex(t[r].substring(2));else{var n=t[r].substring(0,2);if(2==n.length&&"\\U"==n)throw"Bad hex in \\U escape "+t[r].substring(0,10);if(2==n.length&&"\\u"==n)throw"Bad hex in \\u escape "+t[r].substring(0,6);if(0<=(n=t[r].indexOf("\\")))throw"Bad escape "+t[r].substring(n,n+2);e+=t[r]}return e},u.escapedNameCharRE=/(\\[_~\.\-!$&'()*+,;=/?#@%])/,u.expandName=function(t){t=t.split(u.escapedNameCharRE);for(var e="",r=0;r<t.length;r++)0!=t[r].length&&(e="\\"==t[r].charAt(0)?e+t[r].charAt(1):e+t[r]);return e},u.prototype.addTriple=function(t,e,r){var n=(t=this.newSubject(t)).predicates[e];n||(n=new i(e),t.predicates[e]=n),n.objects.push(r),e==u.typeURI&&t.types.push(r.value)};var c={attach:function(t,e){var r=t.implementation.hasFeature;t.implementation.hasFeature=function(t,e){return"RDFaAPI"==t&&"1.1"==e||r.apply(this,arguments)};var n=!!t.data;if(t.head){var i=t.createElement("meta");i.setAttribute("name","green-turtle-rdfa-message"),t.head.appendChild(i);var o=function(){var e=t.createEvent("Event");return e.initEvent("green-turtle-rdfa-extension",!0,!0),e};i.addEventListener("green-turtle-rdfa-document",function(){var e=JSON.parse(i.getAttribute("content"));if("status"==e.type){var r=o();i.setAttribute("content",'{ "type": "status", "loaded": '+n+', "count": '+t.data._data_.tripleCount+" }"),setTimeout(function(){i.dispatchEvent(r)},1)}else if("get-subjects"==e.type){var a=t.data.getSubjects();i.setAttribute("content",'{ "type": "subjects", "subjects": '+JSON.stringify(a)+" }");var s=o();setTimeout(function(){i.dispatchEvent(s)},1)}else if("get-subject"==e.type){var u=null;if(t.data.getSubject)u=t.data.getSubject(e.subject).toObject();else{u={subject:e.subject,predicates:{}};for(var l=t.data.getProjection(e.subject),c=l.getProperties(),h=0;h<c.length;h++){var f=[];u.predicates[c[h]]={predicate:predicate,objects:f};for(var p=l.getAll(c[h]),d=0;d<p.length;d++)f.push(a[p[d]]?{type:"http://www.w3.org/1999/02/22-rdf-syntax-ns#object",value:p[d]}:{type:"http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral",value:p[d]})}}i.setAttribute("content",JSON.stringify({type:"subject",subject:e.subject,triples:u}));var g=o();setTimeout(function(){i.dispatchEvent(g)},1)}},!1)}t.data?t.data._data_&&t.data._data_.graph.clear():s.attach(t,e);var u=function(){var r=new a(t.data._data_);r.finishedHandlers.push(function(){for(var r in c.processors)c.processors[r].process(t,e)}),r.finishedHandlers.push(function(t){if(t.ownerDocument){var e=t.ownerDocument.createEvent("HTMLEvents");e.initEvent("rdfa.loaded",!0,!0),t.ownerDocument.dispatchEvent(e)}}),r.process(t.documentElement,e),n=!0};"loading"==t.readyState?window.addEventListener("load",function(){u()},!1):u()},parse:function(t,e,r){var n=this.processors[e];if(!n)throw"Unsupported media type "+e;if(n=n.createParser(),r&&r.errorHandler&&(n.onError=r.errorHandler),n.parse(t,r=r?r.baseURI:null),0<n.errorCount)throw r?"Errors during parsing "+r+" of type "+e:"Errors during parsing of type "+e;return n.context},createDocumentData:function(t){return new s(t||(window?window.location.href:"about:blank"))}};return Object.defineProperty(c,"processors",{value:{},writable:!1,configurable:!1,enumerable:!0}),c.processors["text/turtle"]={createParser:function(){return new u},process:function(t,e){var r=t.nodeType==Node.DOCUMENT_NODE?t:t.ownerDocument;if(r.data){for(var n=!0,i=r.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","script"),a=0;a<i.length;a++)if("text/turtle"==i[a].getAttribute("type")){var o=this.createParser();e&&e.errorHandler&&(o.onError=e.errorHandler),o.parse(i[a].textContent,e?e.baseURI:null),0<o.errorCount?n=!1:r.data.merge(o.context.subjects,{prefixes:o.context.prefixes})}return n}}},Object.defineProperty(l,"implementation",{value:c,writable:!1,configurable:!1,enumerable:!0}),l.attach=function(t,e){c.attach(t,e)},l}();GreenTurtle.attach(document),function(){function t(){}function e(t){return t}function r(){return this}function n(){return!0}function i(t){return"function"==typeof t?t:function(){return t}}function a(t,e,r){return function(){var n=r.apply(e,arguments);return arguments.length?t:n}}function o(t){return null!=t&&!isNaN(t)}function s(t){return t.length}function u(t){return null==t}function l(t){return t.replace(/(^\s+)|(\s+$)/g,"").replace(/\s+/g," ")}function c(){}function h(e){function r(){for(var t,r=n,i=-1,a=r.length;++i<a;)(t=r[i].on)&&t.apply(this,arguments);return e}var n=[],i=new t;return r.on=function(t,r){var a,o=i.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,a=n.indexOf(o)).concat(n.slice(a+1)),i.remove(t)),r&&n.push(i.set(t,{on:r})),e)},r}function f(t,e){return e-(t?1+Math.floor(Math.log(t+Math.pow(10,1+Math.floor(Math.log(t)/Math.LN10)-e))/Math.LN10):1)}function p(t){return t+""}function g(t){for(var e=t.lastIndexOf("."),r=e>=0?t.substring(e):(e=t.length,""),n=[];e>0;)n.push(t.substring(e-=3,e+3));return n.reverse().join(",")+r}function m(t){return function(e){return 1-t(1-e)}}function v(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function y(t){return t}function b(t){return function(e){return Math.pow(e,t)}}function w(t){return 1-Math.cos(t*Math.PI/2)}function x(t){return Math.pow(2,10*(t-1))}function _(t){return 1-Math.sqrt(1-t*t)}function j(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function O(){d3.event.stopPropagation(),d3.event.preventDefault()}function L(){for(var t,e=d3.event;t=e.sourceEvent;)e=t;return e}function R(t){for(var e=new c,r=0,n=arguments.length;++r<n;)e[arguments[r]]=h(e);return e.of=function(r,n){return function(i){try{var a=i.sourceEvent=d3.event;i.target=t,d3.event=i,e[i.type].apply(r,n)}finally{d3.event=a}}},e}function M(t){return"transform"==t?d3.interpolateTransform:d3.interpolate}function I(t,e){return e=e-(t=+t)?1/(e-t):0,function(r){return(r-t)*e}}function A(t,e){return e=e-(t=+t)?1/(e-t):0,function(r){return Math.max(0,Math.min(1,(r-t)*e))}}function U(t,e,r){return new C(t,e,r)}function C(t,e,r){this.r=t,this.g=e,this.b=r}function W(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function N(t,e,r){var n,i,a,o=0,s=0,u=0;if(n=/([a-z]+)\((.*)\)/i.exec(t))switch(i=n[2].split(","),n[1]){case"hsl":return r(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(T(i[0]),T(i[1]),T(i[2]))}return(a=Or.get(t))?e(a.r,a.g,a.b):(null!=t&&"#"===t.charAt(0)&&(4===t.length?(o=t.charAt(1),o+=o,s=t.charAt(2),s+=s,u=t.charAt(3),u+=u):7===t.length&&(o=t.substring(1,3),s=t.substring(3,5),u=t.substring(5,7)),o=parseInt(o,16),s=parseInt(s,16),u=parseInt(u,16)),e(o,s,u))}function D(t,e,r){var n,i,a=Math.min(t/=255,e/=255,r/=255),o=Math.max(t,e,r),s=o-a,u=(o+a)/2;return s?(i=u<.5?s/(o+a):s/(2-o-a),n=t==o?(e-r)/s+(e<r?6:0):e==o?(r-t)/s+2:(t-e)/s+4,n*=60):i=n=0,S(n,i,u)}function T(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function S(t,e,r){return new E(t,e,r)}function E(t,e,r){this.h=t,this.s=e,this.l=r}function P(t,e,r){function n(t){return Math.round(255*function(t){return t>360?t-=360:t<0&&(t+=360),t<60?i+(a-i)*t/60:t<180?a:t<240?i+(a-i)*(240-t)/60:i}(t))}var i,a;return(t%=360)<0&&(t+=360),e=e<0?0:e>1?1:e,i=2*(r=r<0?0:r>1?1:r)-(a=r<=.5?r*(1+e):r+e-r*e),U(n(t+120),n(t),n(t-120))}function F(t){return lr(t,Ur),t}function k(t){return function(){return Lr(t,this)}}function q(t){return function(){return Rr(t,this)}}function z(t,e){function r(){if(e=this.classList)return e.add(t);var e=this.className,r=null!=e.baseVal,n=r?e.baseVal:e;i.lastIndex=0,i.test(n)||(n=l(n+" "+t),r?e.baseVal=n:this.className=n)}function n(){if(e=this.classList)return e.remove(t);var e=this.className,r=null!=e.baseVal,n=r?e.baseVal:e;n=l(n.replace(i," ")),r?e.baseVal=n:this.className=n}var i=new RegExp("(^|\\s+)"+d3.requote(t)+"(\\s+|$)","g");if(arguments.length<2){var a=this.node();if(o=a.classList)return o.contains(t);var o=a.className;return i.lastIndex=0,i.test(null!=o.baseVal?o.baseVal:o)}return this.each("function"==typeof e?function(){(e.apply(this,arguments)?r:n).call(this)}:e?r:n)}function X(t){return{__data__:t}}function H(t){return lr(t,Nr),t}function $(e,r,n){lr(e,Tr);var i=new t,a=d3.dispatch("start","end"),o=kr;return e.id=r,e.time=n,e.tween=function(t,r){return arguments.length<2?i.get(t):(null==r?i.remove(t):i.set(t,r),e)},e.ease=function(t){return arguments.length?(o="function"==typeof t?t:d3.ease.apply(d3,arguments),e):o},e.each=function(t,r){return arguments.length<2?(function(t){var e=Er,r=kr,n=Pr,i=Fr;Er=this.id,kr=this.ease();for(var a=0,o=this.length;a<o;a++)for(var s=this[a],u=0,l=s.length;u<l;u++){var c=s[u];c&&(Pr=this[a][u].delay,Fr=this[a][u].duration,t.call(c=c.node,c.__data__,u,a))}return Er=e,kr=r,Pr=n,Fr=i,this}).call(e,t):(a.on(t,r),e)},d3.timer(function(t){return e.each(function(s,u,l){function c(t){return v.active>r?f():(v.active=r,i.forEach(function(t,e){(e=e.call(d,s,u))&&p.push(e)}),a.start.call(d,s,u),h(t)||d3.timer(h,0,n),1)}function h(t){if(v.active!==r)return f();for(var e=(t-g)/m,n=o(e),i=p.length;i>0;)p[--i].call(d,n);return e>=1?(f(),Er=r,a.end.call(d,s,u),Er=0,1):void 0}function f(){return--v.count||delete d.__transition__,1}var p=[],d=this,g=e[l][u].delay,m=e[l][u].duration,v=d.__transition__||(d.__transition__={active:0,count:0});++v.count,g<=t?c(t):d3.timer(c,g,n)}),1},0,n),e}function Q(t,e,r){return""!=r&&Dr}function V(t,e){var r=M(t);return"function"==typeof e?function(t,n,i){var a=e.call(this,t,n);return null==a?""!=i&&Dr:i!=a&&r(i,a)}:null==e?Q:(e+="",function(t,n,i){return i!=e&&r(i,e)})}function B(){for(var t,e=Date.now(),r=Xr;r;)(t=e-r.then)>=r.delay&&(r.flush=r.callback(t)),r=r.next;var n=Y()-e;n>24?(isFinite(n)&&(clearTimeout(zr),zr=setTimeout(B,n)),qr=0):(qr=1,Hr(B))}function Y(){for(var t=null,e=Xr,r=1/0;e;)e.flush?e=t?t.next=e.next:Xr=e.next:(r=Math.min(r,e.then+e.delay),e=(t=e).next);return r}function Z(t){var e=[t.a,t.b],r=[t.c,t.d],n=K(e),i=G(e,r),a=K(function(t,e,r){return t[0]+=r*e[0],t[1]+=r*e[1],t}(r,e,-i))||0;e[0]*r[1]<r[0]*e[1]&&(e[0]*=-1,e[1]*=-1,n*=-1,i*=-1),this.rotate=(n?Math.atan2(e[1],e[0]):Math.atan2(-r[0],r[1]))*$r,this.translate=[t.e,t.f],this.scale=[n,a],this.skew=a?Math.atan2(i,a)*$r:0}function G(t,e){return t[0]*e[0]+t[1]*e[1]}function K(t){var e=Math.sqrt(G(t,t));return e&&(t[0]/=e,t[1]/=e),e}function J(t,e){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();if(Qr<0&&(window.scrollX||window.scrollY)){var i=(r=d3.select(document.body).append("svg").style("position","absolute").style("top",0).style("left",0))[0][0].getScreenCTM();Qr=!i.f&&!i.e,r.remove()}return Qr?(n.x=e.pageX,n.y=e.pageY):(n.x=e.clientX,n.y=e.clientY),[(n=n.matrixTransform(t.getScreenCTM().inverse())).x,n.y]}var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}function tt(t){var e=t[0],r=t[t.length-1];return e<r?[e,r]:[r,e]}function et(t){return t.rangeExtent?t.rangeExtent():tt(t.range())}function rt(t,e){var r,n=0,i=t.length-1,a=t[n],o=t[i];return o<a&&(r=n,n=i,i=r,r=a,a=o,o=r),(r=o-a)&&(e=e(r),t[n]=e.floor(a),t[i]=e.ceil(o)),t}function nt(){return Math}function it(t,e){return d3.rebind(t,e,"range","rangeRound","interpolate","clamp")}function at(t){return t=Math.pow(10,Math.round(Math.log(t)/Math.LN10)-1),{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}}function ot(t,e){var r=tt(t),n=r[1]-r[0],i=Math.pow(10,Math.floor(Math.log(n/e)/Math.LN10)),a=e/n*i;return a<=.15?i*=10:a<=.35?i*=5:a<=.75&&(i*=2),r[0]=Math.ceil(r[0]/i)*i,r[1]=Math.floor(r[1]/i)*i+.5*i,r[2]=i,r}function st(t,e){return d3.range.apply(d3,ot(t,e))}function ut(t,e){return d3.format(",."+Math.max(0,-Math.floor(Math.log(ot(t,e)[2])/Math.LN10+.01))+"f")}function lt(t,e,r,n){var i=r(t[0],t[1]),a=n(e[0],e[1]);return function(t){return a(i(t))}}function ct(t,e,r,n){var i=[],a=[],o=0,s=Math.min(t.length,e.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<=s;)i.push(r(t[o-1],t[o])),a.push(n(e[o-1],e[o]));return function(e){var r=d3.bisect(t,e,1,s)-1;return a[r](i[r](e))}}function ht(t){return Math.log(t<0?0:t)/Math.LN10}function ft(t){return-Math.log(t>0?0:-t)/Math.LN10}function pt(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function dt(t){return t.innerRadius}function gt(t){return t.outerRadius}function mt(t){return t.startAngle}function vt(t){return t.endAngle}function yt(t){function e(e){function n(){c.push("M",u(t(h),l))}for(var s,c=[],h=[],f=-1,p=e.length,d=i(r),g=i(a);++f<p;)o.call(this,s=e[f],f)?h.push([+d.call(this,s,f),+g.call(this,s,f)]):h.length&&(n(),h=[]);return h.length&&n(),c.length?c.join(""):null}var r=bt,a=wt,o=n,s=tn,u=xt,l=.7;return e.x=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(a=t,e):a},e.defined=function(t){return arguments.length?(o=t,e):o},e.interpolate=function(t){return arguments.length?(en.has(t+="")||(t=tn),u=en.get(s=t),e):s},e.tension=function(t){return arguments.length?(l=t,e):l},e}function bt(t){return t[0]}function wt(t){return t[1]}function xt(t){for(var e=0,r=t.length,n=t[0],i=[n[0],",",n[1]];++e<r;)i.push("L",(n=t[e])[0],",",n[1]);return i.join("")}function _t(t){for(var e=0,r=t.length,n=t[0],i=[n[0],",",n[1]];++e<r;)i.push("V",(n=t[e])[1],"H",n[0]);return i.join("")}function jt(t){for(var e=0,r=t.length,n=t[0],i=[n[0],",",n[1]];++e<r;)i.push("H",(n=t[e])[0],"V",n[1]);return i.join("")}function Ot(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return xt(t);var r=t.length!=e.length,n="",i=t[0],a=t[1],o=e[0],s=o,u=1;if(r&&(n+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=t[1],u=2),e.length>1){a=t[u],u++,n+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-(s=e[1])[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var l=2;l<e.length;l++,u++)n+="S"+((a=t[u])[0]-(s=e[l])[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(r){var c=t[u];n+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+c[0]+","+c[1]}return n}function Lt(t,e){for(var r,n=[],i=(1-e)/2,a=t[0],o=t[1],s=1,u=t.length;++s<u;)r=a,a=o,n.push([i*((o=t[s])[0]-r[0]),i*(o[1]-r[1])]);return n}function Rt(t){if(t.length<3)return xt(t);var e=1,r=t.length,n=t[0],i=n[0],a=n[1],o=[i,i,i,(n=t[1])[0]],s=[a,a,a,n[1]],u=[i,",",a];for(It(u,o,s);++e<r;)n=t[e],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),It(u,o,s);for(e=-1;++e<2;)o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),It(u,o,s);return u.join("")}function Mt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function It(t,e,r){t.push("C",Mt(rn,e),",",Mt(rn,r),",",Mt(nn,e),",",Mt(nn,r),",",Mt(an,e),",",Mt(an,r))}function At(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Ut(t){for(var e,r,n,i=-1,a=t.length;++i<a;)n=(e=t[i])[1]+Kr,e[0]=(r=e[0])*Math.cos(n),e[1]=r*Math.sin(n);return t}function Ct(t){function e(e){function n(){m.push("M",c(t(y),p),f,h(t(v.reverse()),p),"Z")}for(var l,d,g,m=[],v=[],y=[],b=-1,w=e.length,x=i(r),_=i(o),j=r===a?function(){return d}:i(a),O=o===s?function(){return g}:i(s);++b<w;)u.call(this,l=e[b],b)?(v.push([d=+x.call(this,l,b),g=+_.call(this,l,b)]),y.push([+j.call(this,l,b),+O.call(this,l,b)])):v.length&&(n(),v=[],y=[]);return v.length&&n(),m.length?m.join(""):null}var r=bt,a=bt,o=0,s=wt,u=n,l=tn,c=xt,h=xt,f="L",p=.7;return e.x=function(t){return arguments.length?(r=a=t,e):a},e.x0=function(t){return arguments.length?(r=t,e):r},e.x1=function(t){return arguments.length?(a=t,e):a},e.y=function(t){return arguments.length?(o=s=t,e):s},e.y0=function(t){return arguments.length?(o=t,e):o},e.y1=function(t){return arguments.length?(s=t,e):s},e.defined=function(t){return arguments.length?(u=t,e):u},e.interpolate=function(t){return arguments.length?(en.has(t+="")||(t=tn),c=en.get(l=t),h=c.reverse||c,f=/-closed$/.test(t)?"M":"L",e):l},e.tension=function(t){return arguments.length?(p=t,e):p},e}function Wt(t){return t.source}function Nt(t){return t.target}function Dt(t){return t.radius}function Tt(t){return[t.x,t.y]}function St(){return 64}function Et(){return"circle"}function Pt(t){var e=Math.sqrt(t/Math.PI);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function Ft(t,e){t.attr("transform",function(t){return"translate("+e(t)+",0)"})}function kt(t,e){t.attr("transform",function(t){return"translate(0,"+e(t)+")"})}function qt(t){for(var e=t.source,r=t.target,n=function(t,e){if(t===e)return t;for(var r=zt(t),n=zt(e),i=r.pop(),a=n.pop(),o=null;i===a;)o=i,i=r.pop(),a=n.pop();return o}(e,r),i=[e];e!==n;)i.push(e=e.parent);for(var a=i.length;r!==n;)i.splice(a,0,r),r=r.parent;return i}function zt(t){for(var e=[],r=t.parent;null!=r;)e.push(t),t=r,r=r.parent;return e.push(t),e}function Xt(t){t.fixed|=2}function Ht(t){t!==pn&&(t.fixed&=1)}function $t(){pn.fixed&=1,fn=pn=null}function Qt(){pn.px=d3.event.x,pn.py=d3.event.y,fn.resume()}function Vt(t){return 20}function Bt(t){return 1}function Yt(t){return t.x}function Zt(t){return t.y}function Gt(t,e,r){t.y0=e,t.y=r}function Kt(t){return d3.range(t.length)}function Jt(t){for(var e=-1,r=t[0].length,n=[];++e<r;)n[e]=0;return n}function te(t){for(var e,r=1,n=0,i=t[0][1],a=t.length;r<a;++r)(e=t[r][1])>i&&(n=r,i=e);return n}function ee(t){return t.reduce(re,0)}function re(t,e){return t+e[1]}function ne(t,e){return ie(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function ie(t,e){for(var r=-1,n=+t[0],i=(t[1]-n)/e,a=[];++r<=e;)a[r]=i*r+n;return a}function ae(t){return[d3.min(t),d3.max(t)]}function oe(t,e){return d3.rebind(t,e,"sort","children","value"),t.links=ce,t.nodes=function(e){return yn=!0,(t.nodes=t)(e)},t}function se(t){return t.children}function ue(t){return t.value}function le(t,e){return e.value-t.value}function ce(t){return d3.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function he(t,e){return t.value-e.value}function fe(t,e){var r=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=r,r._pack_prev=e}function pe(t,e){t._pack_next=e,e._pack_prev=t}function de(t,e){var r=e.x-t.x,n=e.y-t.y,i=t.r+e.r;return i*i-r*r-n*n>.001}function ge(t){t._pack_next=t._pack_prev=t}function me(t){delete t._pack_next,delete t._pack_prev}function ve(t){var e=t.children;e&&e.length?(e.forEach(ve),t.r=function(t){function e(t){s=Math.min(t.x-t.r,s),u=Math.max(t.x+t.r,u),l=Math.min(t.y-t.r,l),c=Math.max(t.y+t.r,c)}var r,n,i,a,o,s=1/0,u=-1/0,l=1/0,c=-1/0,h=t.length;if(t.forEach(ge),(r=t[0]).x=-r.r,r.y=0,e(r),h>1&&((n=t[1]).x=n.r,n.y=0,e(n),h>2)){ye(r,n,i=t[2]),e(i),fe(r,i),r._pack_prev=i,fe(i,n),n=r._pack_next;for(var f=3;f<h;f++){ye(r,n,i=t[f]);var p=0,d=1,g=1;for(a=n._pack_next;a!==n;a=a._pack_next,d++)if(de(a,i)){p=1;break}if(1==p)for(o=r._pack_prev;o!==a._pack_prev&&!de(o,i);o=o._pack_prev,g++);p?(d<g||d==g&&n.r<r.r?pe(r,n=a):pe(r=o,n),f--):(fe(r,i),n=i,e(i))}}var m=(s+u)/2,v=(l+c)/2,y=0;for(f=0;f<h;f++){var b=t[f];b.x-=m,b.y-=v,y=Math.max(y,b.r+Math.sqrt(b.x*b.x+b.y*b.y))}return t.forEach(me),y}(e)):t.r=Math.sqrt(t.value)}function ye(t,e,r){var n=t.r+r.r,i=e.x-t.x,a=e.y-t.y;if(n&&(i||a)){var o=e.r+r.r,s=Math.sqrt(i*i+a*a),u=Math.max(-1,Math.min(1,(n*n+s*s-o*o)/(2*n*s))),l=Math.acos(u),c=u*(n/=s),h=Math.sin(l)*n;r.x=t.x+c*i+h*a,r.y=t.y+c*a-h*i}else r.x=t.x+n,r.y=t.y}function be(t,e){return t.parent==e.parent?1:2}function we(t){var e=t.children;return e&&e.length?e[0]:t._tree.thread}function xe(t){var e,r=t.children;return r&&(e=r.length)?r[e-1]:t._tree.thread}function _e(t,e){var r=t.children;if(r&&(i=r.length))for(var n,i,a=-1;++a<i;)e(n=_e(r[a],e),t)>0&&(t=n);return t}function je(t,e){return t.x-e.x}function Oe(t,e){return e.x-t.x}function Le(t,e){return t.depth-e.depth}function Re(t,e){!function t(r,n){var i=r.children;if(i&&(o=i.length))for(var a,o,s=null,u=-1;++u<o;)t(a=i[u],s),s=a;e(r,n)}(t,null)}function Me(t,e,r){var n=r/((e=e._tree).number-(t=t._tree).number);t.change+=n,e.change-=n,e.shift+=r,e.prelim+=r,e.mod+=r}function Ie(t,e,r){return t._tree.ancestor.parent==e.parent?t._tree.ancestor:r}function Ae(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Ue(t,e){var r=t.x+e[3],n=t.y+e[0],i=t.dx-e[1]-e[3],a=t.dy-e[0]-e[2];return i<0&&(r+=i/2,i=0),a<0&&(n+=a/2,a=0),{x:r,y:n,dx:i,dy:a}}function Ce(t){return t.map(We).join(",")}function We(t){return/[",\n]/.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}function Ne(t,e){return function(r){return r&&t.hasOwnProperty(r.type)?t[r.type](r):e}}function De(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Te(t,e){wn.hasOwnProperty(t.type)&&wn[t.type](t,e)}function Se(t,e){for(var r=t.coordinates,n=0,i=r.length;n<i;n++)e.apply(null,r[n])}function Ee(t){return t.source}function Pe(t){return t.target}function Fe(t,e){function r(t){var e=Math.sin(g-(t*=g))/m,r=Math.sin(t)/m,n=e*s*i+r*p*c,o=e*s*a+r*p*h,l=e*u+r*d;return[Math.atan2(o,n)/bn,Math.atan2(l,Math.sqrt(n*n+o*o))/bn]}var n=t[0]*bn,i=Math.cos(n),a=Math.sin(n),o=t[1]*bn,s=Math.cos(o),u=Math.sin(o),l=e[0]*bn,c=Math.cos(l),h=Math.sin(l),f=e[1]*bn,p=Math.cos(f),d=Math.sin(f),g=r.d=Math.acos(Math.max(-1,Math.min(1,u*d+s*p*Math.cos(l-n)))),m=Math.sin(g);return r}function ke(t,e,r,n){var i,a,o,s,u;return a=(i=n[t])[0],o=i[1],s=(i=n[e])[0],u=i[1],((i=n[r])[1]-o)*(s-a)-(u-o)*(i[0]-a)>0}function qe(t,e,r){return(r[0]-e[0])*(t[1]-e[1])<(r[1]-e[1])*(t[0]-e[0])}function ze(t,e,r,n){var i=t[0],a=r[0],o=t[1],s=r[1],u=e[0]-i,l=n[0]-a,c=e[1]-o,h=n[1]-s,f=(l*(o-s)-h*(i-a))/(h*u-l*c);return[i+f*u,o+f*c]}function Xe(t,e){var r={list:t.map(function(t,e){return{index:e,x:t[0],y:t[1]}}).sort(function(t,e){return t.y<e.y?-1:t.y>e.y?1:t.x<e.x?-1:t.x>e.x?1:0}),bottomSite:null},n={list:[],leftEnd:null,rightEnd:null,init:function(){n.leftEnd=n.createHalfEdge(null,"l"),n.rightEnd=n.createHalfEdge(null,"l"),n.leftEnd.r=n.rightEnd,n.rightEnd.l=n.leftEnd,n.list.unshift(n.leftEnd,n.rightEnd)},createHalfEdge:function(t,e){return{edge:t,side:e,vertex:null,l:null,r:null}},insert:function(t,e){e.l=t,e.r=t.r,t.r.l=e,t.r=e},leftBound:function(t){var e=n.leftEnd;do{e=e.r}while(e!=n.rightEnd&&i.rightOf(e,t));return e.l},del:function(t){t.l.r=t.r,t.r.l=t.l,t.edge=null},right:function(t){return t.r},left:function(t){return t.l},leftRegion:function(t){return null==t.edge?r.bottomSite:t.edge.region[t.side]},rightRegion:function(t){return null==t.edge?r.bottomSite:t.edge.region[jn[t.side]]}},i={bisect:function(t,e){var r={region:{l:t,r:e},ep:{l:null,r:null}},n=e.x-t.x,i=e.y-t.y,a=n>0?n:-n,o=i>0?i:-i;return r.c=t.x*n+t.y*i+.5*(n*n+i*i),a>o?(r.a=1,r.b=i/n,r.c/=n):(r.b=1,r.a=n/i,r.c/=i),r},intersect:function(t,e){var r=t.edge,n=e.edge;if(!r||!n||r.region.r==n.region.r)return null;var i=r.a*n.b-r.b*n.a;if(Math.abs(i)<1e-10)return null;var a,o,s=(r.c*n.b-n.c*r.b)/i,u=r.region.r,l=n.region.r;u.y<l.y||u.y==l.y&&u.x<l.x?(a=t,o=r):(a=e,o=n);var c=s>=o.region.r.x;return c&&"l"===a.side||!c&&"r"===a.side?null:{x:s,y:(n.c*r.a-r.c*n.a)/i}},rightOf:function(t,e){var r=t.edge,n=r.region.r,i=e.x>n.x;if(i&&"l"===t.side)return 1;if(!i&&"r"===t.side)return 0;if(1===r.a){var a=e.y-n.y,o=e.x-n.x,s=0,u=0;if(!i&&r.b<0||i&&r.b>=0?u=s=a>=r.b*o:(u=e.x+e.y*r.b>r.c,r.b<0&&(u=!u),u||(s=1)),!s){var l=n.x-r.region.l.x;u=r.b*(o*o-a*a)<l*a*(1+2*o/l+r.b*r.b),r.b<0&&(u=!u)}}else{var c=r.c-r.a*e.x,h=e.y-c,f=e.x-n.x,p=c-n.y;u=h*h>f*f+p*p}return"l"===t.side?u:!u},endPoint:function(t,r,n){t.ep[r]=n,t.ep[jn[r]]&&e(t)},distance:function(t,e){var r=t.x-e.x,n=t.y-e.y;return Math.sqrt(r*r+n*n)}},a={list:[],insert:function(t,e,r){t.vertex=e,t.ystar=e.y+r;for(var n=0,i=a.list,o=i.length;n<o;n++){var s=i[n];if(!(t.ystar>s.ystar||t.ystar==s.ystar&&e.x>s.vertex.x))break}i.splice(n,0,t)},del:function(t){for(var e=0,r=a.list,n=r.length;e<n&&r[e]!=t;++e);r.splice(e,1)},empty:function(){return 0===a.list.length},nextEvent:function(t){for(var e=0,r=a.list,n=r.length;e<n;++e)if(r[e]==t)return r[e+1];return null},min:function(){var t=a.list[0];return{x:t.vertex.x,y:t.ystar}},extractMin:function(){return a.list.shift()}};n.init(),r.bottomSite=r.list.shift();for(var o,s,u,l,c,h,f,p,d,g,m,v,y,b=r.list.shift();;)if(a.empty()||(o=a.min()),b&&(a.empty()||b.y<o.y||b.y==o.y&&b.x<o.x))s=n.leftBound(b),u=n.right(s),f=n.rightRegion(s),v=i.bisect(f,b),h=n.createHalfEdge(v,"l"),n.insert(s,h),(g=i.intersect(s,h))&&(a.del(s),a.insert(s,g,i.distance(g,b))),s=h,h=n.createHalfEdge(v,"r"),n.insert(s,h),(g=i.intersect(h,u))&&a.insert(h,g,i.distance(g,b)),b=r.list.shift();else{if(a.empty())break;s=a.extractMin(),l=n.left(s),u=n.right(s),c=n.right(u),f=n.leftRegion(s),p=n.rightRegion(u),i.endPoint(s.edge,s.side,m=s.vertex),i.endPoint(u.edge,u.side,m),n.del(s),a.del(u),n.del(u),y="l",f.y>p.y&&(d=f,f=p,p=d,y="r"),v=i.bisect(f,p),h=n.createHalfEdge(v,y),n.insert(l,h),i.endPoint(v,jn[y],m),(g=i.intersect(l,h))&&(a.del(l),a.insert(l,g,i.distance(g,f))),(g=i.intersect(h,c))&&a.insert(h,g,i.distance(g,f))}for(s=n.right(n.leftEnd);s!=n.rightEnd;s=n.right(s))e(s.edge)}function He(t){return{x:t[0],y:t[1]}}function $e(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Qe(t,e,r,n){for(var i,a,o=0,s=e.length,u=r.length;o<s;){if(n>=u)return-1;if(37==(i=e.charCodeAt(o++))){if(!(a=Cn[e.charAt(o++)])||(n=a(t,r,n))<0)return-1}else if(i!=r.charCodeAt(n++))return-1}return n}function Ve(t,e,r){Fn.lastIndex=0;var n=Fn.exec(e.substring(r,r+2));return n?(t.d=+n[0],r+=n[0].length):-1}function Be(t,e,r){Fn.lastIndex=0;var n=Fn.exec(e.substring(r,r+2));return n?(t.H=+n[0],r+=n[0].length):-1}function Ye(t){return t.toISOString()}function Ze(t,e,r){function n(e){var r=t(e),n=a(r,1);return e-r<n-e?r:n}function i(r){return e(r=t(new On(r-1)),1),r}function a(t,r){return e(t=new On(+t),r),t}function o(t,n,a){var o=i(t),s=[];if(a>1)for(;o<n;)r(o)%a||s.push(new Date(+o)),e(o,1);else for(;o<n;)s.push(new Date(+o)),e(o,1);return s}t.floor=t,t.round=n,t.ceil=i,t.offset=a,t.range=o;var s=t.utc=Ge(t);return s.floor=s,s.round=Ge(n),s.ceil=Ge(i),s.offset=Ge(a),s.range=function(t,e,r){try{On=$e;var n=new $e;return n._=t,o(n,e,r)}finally{On=Date}},t}function Ge(t){return function(e,r){try{On=$e;var n=new $e;return n._=e,t(n,r)._}finally{On=Date}}}function Ke(t,e,r){function n(e){return t(e)}return n.invert=function(e){return tr(t.invert(e))},n.domain=function(e){return arguments.length?(t.domain(e),n):t.domain().map(tr)},n.nice=function(t){var e=Je(n.domain());return n.domain([t.floor(e[0]),t.ceil(e[1])])},n.ticks=function(r,i){var a=Je(n.domain());if("function"!=typeof r){var o=(a[1]-a[0])/r,s=d3.bisect(zn,o);if(s==zn.length)return e.year(a,r);if(!s)return t.ticks(r).map(tr);Math.log(o/zn[s-1])<Math.log(zn[s]/o)&&--s,i=(r=e[s])[1],r=r[0].range}return r(a[0],new Date(+a[1]+1),i)},n.tickFormat=function(){return r},n.copy=function(){return Ke(t.copy(),e,r)},d3.rebind(n,t,"range","rangeRound","interpolate","clamp")}function Je(t){var e=t[0],r=t[t.length-1];return e<r?[e,r]:[r,e]}function tr(t){return new Date(t)}function er(t){return function(e){for(var r=t.length-1,n=t[r];!n[1](e);)n=t[--r];return n[0](e)}}function rr(t){var e=new Date(t,0,1);return e.setFullYear(t),e}function nr(t){var e=t.getFullYear(),r=rr(e);return e+(t-r)/(rr(e+1)-r)}function ir(t){var e=new Date(Date.UTC(t,0,1));return e.setUTCFullYear(t),e}function ar(t){var e=t.getUTCFullYear(),r=ir(e);return e+(t-r)/(ir(e+1)-r)}Date.now||(Date.now=function(){return+new Date});try{document.createElement("div").style.setProperty("opacity",0,"")}catch(t){var or=CSSStyleDeclaration.prototype,sr=or.setProperty;or.setProperty=function(t,e,r){sr.call(this,t,e+"",r)}}d3={version:"2.9.1"};var ur=function(t){return Array.prototype.slice.call(t)};try{ur(document.documentElement.childNodes)}catch(t){ur=function(t){for(var e=-1,r=t.length,n=[];++e<r;)n.push(t[e]);return n}}var lr=[].__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)t[r]=e[r]};d3.map=function(e){var r=new t;for(var n in e)r.set(n,e[n]);return r},function(t,e){try{for(var r in e)Object.defineProperty(t.prototype,r,{value:e[r],enumerable:!1})}catch(r){t.prototype=e}}(t,{has:function(t){return cr+t in this},get:function(t){return this[cr+t]},set:function(t,e){return this[cr+t]=e},remove:function(t){return(t=cr+t)in this&&delete this[t]},keys:function(){var t=[];return this.forEach(function(e){t.push(e)}),t},values:function(){var t=[];return this.forEach(function(e,r){t.push(r)}),t},entries:function(){var t=[];return this.forEach(function(e,r){t.push({key:e,value:r})}),t},forEach:function(t){for(var e in this)e.charCodeAt(0)===hr&&t.call(this,e.substring(1),this[e])}});var cr="\0",hr=cr.charCodeAt(0);d3.functor=i,d3.rebind=function(t,e){for(var r,n=1,i=arguments.length;++n<i;)t[r=arguments[n]]=a(t,e,e[r]);return t},d3.ascending=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},d3.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},d3.mean=function(t,e){var r,n=t.length,i=0,a=-1,s=0;if(1===arguments.length)for(;++a<n;)o(r=t[a])&&(i+=(r-i)/++s);else for(;++a<n;)o(r=e.call(t,t[a],a))&&(i+=(r-i)/++s);return s?i:void 0},d3.median=function(t,e){return arguments.length>1&&(t=t.map(e)),(t=t.filter(o)).length?d3.quantile(t.sort(d3.ascending),.5):void 0},d3.min=function(t,e){var r,n,i=-1,a=t.length;if(1===arguments.length){for(;++i<a&&(null==(r=t[i])||r!=r);)r=void 0;for(;++i<a;)null!=(n=t[i])&&r>n&&(r=n)}else{for(;++i<a&&(null==(r=e.call(t,t[i],i))||r!=r);)r=void 0;for(;++i<a;)null!=(n=e.call(t,t[i],i))&&r>n&&(r=n)}return r},d3.max=function(t,e){var r,n,i=-1,a=t.length;if(1===arguments.length){for(;++i<a&&(null==(r=t[i])||r!=r);)r=void 0;for(;++i<a;)null!=(n=t[i])&&n>r&&(r=n)}else{for(;++i<a&&(null==(r=e.call(t,t[i],i))||r!=r);)r=void 0;for(;++i<a;)null!=(n=e.call(t,t[i],i))&&n>r&&(r=n)}return r},d3.extent=function(t,e){var r,n,i,a=-1,o=t.length;if(1===arguments.length){for(;++a<o&&(null==(r=i=t[a])||r!=r);)r=i=void 0;for(;++a<o;)null!=(n=t[a])&&(r>n&&(r=n),i<n&&(i=n))}else{for(;++a<o&&(null==(r=i=e.call(t,t[a],a))||r!=r);)r=void 0;for(;++a<o;)null!=(n=e.call(t,t[a],a))&&(r>n&&(r=n),i<n&&(i=n))}return[r,i]},d3.random={normal:function(t,e){return arguments.length<2&&(e=1),arguments.length<1&&(t=0),function(){var r,n,i;do{i=(r=2*Math.random()-1)*r+(n=2*Math.random()-1)*n}while(!i||i>1);return t+e*r*Math.sqrt(-2*Math.log(i)/i)}}},d3.sum=function(t,e){var r,n=0,i=t.length,a=-1;if(1===arguments.length)for(;++a<i;)isNaN(r=+t[a])||(n+=r);else for(;++a<i;)isNaN(r=+e.call(t,t[a],a))||(n+=r);return n},d3.quantile=function(t,e){var r=(t.length-1)*e+1,n=Math.floor(r),i=t[n-1],a=r-n;return a?i+a*(t[n]-i):i},d3.transpose=function(t){return d3.zip.apply(d3,t)},d3.zip=function(){if(!(n=arguments.length))return[];for(var t=-1,e=d3.min(arguments,s),r=new Array(e);++t<e;)for(var n,i=-1,a=r[t]=new Array(n);++i<n;)a[i]=arguments[i][t];return r},d3.bisector=function(t){return{left:function(e,r,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=e.length);n<i;){var a=n+i>>1;t.call(e,e[a],a)<r?n=a+1:i=a}return n},right:function(e,r,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=e.length);n<i;){var a=n+i>>1;r<t.call(e,e[a],a)?i=a:n=a+1}return n}}};var fr=d3.bisector(function(t){return t});d3.bisectLeft=fr.left,d3.bisect=d3.bisectRight=fr.right,d3.first=function(t,e){var r,n=0,i=t.length,a=t[0];for(1===arguments.length&&(e=d3.ascending);++n<i;)e.call(t,a,r=t[n])>0&&(a=r);return a},d3.last=function(t,e){var r,n=0,i=t.length,a=t[0];for(1===arguments.length&&(e=d3.ascending);++n<i;)e.call(t,a,r=t[n])<=0&&(a=r);return a},d3.nest=function(){function e(o,s){if(s>=a.length)return n?n.call(i,o):r?o.sort(r):o;for(var u,l,c,h=-1,f=o.length,p=a[s++],d=new t,g={};++h<f;)(c=d.get(u=p(l=o[h])))?c.push(l):d.set(u,[l]);return d.forEach(function(t){g[t]=e(d.get(t),s)}),g}var r,n,i={},a=[],o=[];return i.map=function(t){return e(t,0)},i.entries=function(t){return function t(e,r){if(r>=a.length)return e;var n,i=[],s=o[r++];for(n in e)i.push({key:n,values:t(e[n],r)});return s&&i.sort(function(t,e){return s(t.key,e.key)}),i}(e(t,0),0)},i.key=function(t){return a.push(t),i},i.sortKeys=function(t){return o[a.length-1]=t,i},i.sortValues=function(t){return r=t,i},i.rollup=function(t){return n=t,i},i},d3.keys=function(t){var e=[];for(var r in t)e.push(r);return e},d3.values=function(t){var e=[];for(var r in t)e.push(t[r]);return e},d3.entries=function(t){var e=[];for(var r in t)e.push({key:r,value:t[r]});return e},d3.permute=function(t,e){for(var r=[],n=-1,i=e.length;++n<i;)r[n]=t[e[n]];return r},d3.merge=function(t){return Array.prototype.concat.apply([],t)},d3.split=function(t,e){var r,n=[],i=[],a=-1,o=t.length;for(arguments.length<2&&(e=u);++a<o;)e.call(i,r=t[a],a)?i=[]:(i.length||n.push(i),i.push(r));return n},d3.range=function(t,e,r){if(arguments.length<3&&(r=1,arguments.length<2&&(e=t,t=0)),(e-t)/r==1/0)throw new Error("infinite range");var n,i=[],a=function(t){for(var e=1;t*e%1;)e*=10;return e}(Math.abs(r)),o=-1;if(t*=a,e*=a,(r*=a)<0)for(;(n=t+r*++o)>e;)i.push(n/a);else for(;(n=t+r*++o)<e;)i.push(n/a);return i},d3.requote=function(t){return t.replace(pr,"\\$&")};var pr=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;d3.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},d3.xhr=function(t,e,r){var n=new XMLHttpRequest;arguments.length<3?(r=e,e=null):e&&n.overrideMimeType&&n.overrideMimeType(e),n.open("GET",t,!0),e&&n.setRequestHeader("Accept",e),n.onreadystatechange=function(){if(4===n.readyState){var t=n.status;r(t>=200&&t<300||304===t?n:null)}},n.send(null)},d3.text=function(t,e,r){arguments.length<3&&(r=e,e=null),d3.xhr(t,e,function(t){r(t&&t.responseText)})},d3.json=function(t,e){d3.text(t,"application/json",function(t){e(t?JSON.parse(t):null)})},d3.html=function(t,e){d3.text(t,"text/html",function(t){if(null!=t){var r=document.createRange();r.selectNode(document.body),t=r.createContextualFragment(t)}e(t)})},d3.xml=function(t,e,r){arguments.length<3&&(r=e,e=null),d3.xhr(t,e,function(t){r(t&&t.responseXML)})};var dr={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};d3.ns={prefix:dr,qualify:function(t){var e=t.indexOf(":"),r=t;return e>=0&&(r=t.substring(0,e),t=t.substring(e+1)),dr.hasOwnProperty(r)?{space:dr[r],local:t}:t}},d3.dispatch=function(){for(var t=new c,e=-1,r=arguments.length;++e<r;)t[arguments[e]]=h(t);return t},c.prototype.on=function(t,e){var r=t.indexOf("."),n="";return r>0&&(n=t.substring(r+1),t=t.substring(0,r)),arguments.length<2?this[t].on(n):this[t].on(n,e)},d3.format=function(t){var e=gr.exec(t),r=e[1]||" ",n=e[3]||"",i=e[5],a=+e[6],o=e[7],s=e[8],u=e[9],l=1,c="",h=!1;switch(s&&(s=+s.substring(1)),i&&(r="0",o&&(a-=Math.floor((a-1)/4))),u){case"n":o=!0,u="g";break;case"%":l=100,c="%",u="f";break;case"p":l=100,c="%",u="r";break;case"d":h=!0,s=0;break;case"s":l=-1,u="r"}return"r"==u&&!s&&(u="g"),u=mr.get(u)||p,function(t){if(h&&t%1)return"";var e,f=t<0&&(t=-t)?"\u2212":n;if(l<0){var p=d3.formatPrefix(t,s);t*=p.scale,c=p.symbol}else t*=l;return t=u(t,s),i?((e=t.length+f.length)<a&&(t=new Array(a-e+1).join(r)+t),o&&(t=g(t)),t=f+t):(o&&(t=g(t)),(e=(t=f+t).length)<a&&(t=new Array(a-e+1).join(r)+t)),t+c}};var gr=/(?:([^{])?([<>=^]))?([+\- ])?(#)?(0)?([0-9]+)?(,)?(\.[0-9]+)?([a-zA-Z%])?/,mr=d3.map({g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return d3.round(t,e=f(t,e)).toFixed(Math.max(0,Math.min(20,e)))}}),vr=["y","z","a","f","p","n","\u03bc","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){return{scale:Math.pow(10,3*(8-e)),symbol:t}});d3.formatPrefix=function(t,e){var r=0;return t&&(t<0&&(t*=-1),e&&(t=d3.round(t,f(t,e))),r=1+Math.floor(1e-12+Math.log(t)/Math.LN10),r=Math.max(-24,Math.min(24,3*Math.floor((r<=0?r+1:r-1)/3)))),vr[8+r/3]};var yr=b(2),br=b(3),wr=function(){return y},xr=d3.map({linear:wr,poly:b,quad:function(){return yr},cubic:function(){return br},sin:function(){return w},exp:function(){return x},circle:function(){return _},elastic:function(t,e){var r;return arguments.length<2&&(e=.45),arguments.length<1?(t=1,r=e/4):r=e/(2*Math.PI)*Math.asin(1/t),function(n){return 1+t*Math.pow(2,10*-n)*Math.sin(2*(n-r)*Math.PI/e)}},back:function(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}},bounce:function(){return j}}),_r=d3.map({in:y,out:m,"in-out":v,"out-in":function(t){return v(m(t))}});d3.ease=function(t){var e=t.indexOf("-"),r=e>=0?t.substring(0,e):t,n=e>=0?t.substring(e+1):"in";return r=xr.get(r)||wr,function(t){return function(e){return e<=0?0:e>=1?1:t(e)}}((n=_r.get(n)||y)(r.apply(null,Array.prototype.slice.call(arguments,1))))},d3.event=null,d3.interpolate=function(t,e){for(var r,n=d3.interpolators.length;--n>=0&&!(r=d3.interpolators[n](t,e)););return r},d3.interpolateNumber=function(t,e){return e-=t,function(r){return t+e*r}},d3.interpolateRound=function(t,e){return e-=t,function(r){return Math.round(t+e*r)}},d3.interpolateString=function(t,e){var r,n,i,a,o,s=0,u=[],l=[];for(jr.lastIndex=0,n=0;r=jr.exec(e);++n)r.index&&u.push(e.substring(s,r.index)),l.push({i:u.length,x:r[0]}),u.push(null),s=jr.lastIndex;for(s<e.length&&u.push(e.substring(s)),n=0,a=l.length;(r=jr.exec(t))&&n<a;++n)if((o=l[n]).x==r[0]){if(o.i)if(null==u[o.i+1])for(u[o.i-1]+=o.x,u.splice(o.i,1),i=n+1;i<a;++i)l[i].i--;else for(u[o.i-1]+=o.x+u[o.i+1],u.splice(o.i,2),i=n+1;i<a;++i)l[i].i-=2;else if(null==u[o.i+1])u[o.i]=o.x;else for(u[o.i]=o.x+u[o.i+1],u.splice(o.i+1,1),i=n+1;i<a;++i)l[i].i--;l.splice(n,1),a--,n--}else o.x=d3.interpolateNumber(parseFloat(r[0]),parseFloat(o.x));for(;n<a;)o=l.pop(),null==u[o.i+1]?u[o.i]=o.x:(u[o.i]=o.x+u[o.i+1],u.splice(o.i+1,1)),a--;return 1===u.length?null==u[0]?l[0].x:function(){return e}:function(t){for(n=0;n<a;++n)u[(o=l[n]).i]=o.x(t);return u.join("")}},d3.interpolateTransform=function(t,e){var r,n=[],i=[],a=d3.transform(t),o=d3.transform(e),s=a.translate,u=o.translate,l=a.rotate,c=o.rotate,h=a.skew,f=o.skew,p=a.scale,d=o.scale;return s[0]!=u[0]||s[1]!=u[1]?(n.push("translate(",null,",",null,")"),i.push({i:1,x:d3.interpolateNumber(s[0],u[0])},{i:3,x:d3.interpolateNumber(s[1],u[1])})):n.push(u[0]||u[1]?"translate("+u+")":""),l!=c?i.push({i:n.push(n.pop()+"rotate(",null,")")-2,x:d3.interpolateNumber(l,c)}):c&&n.push(n.pop()+"rotate("+c+")"),h!=f?i.push({i:n.push(n.pop()+"skewX(",null,")")-2,x:d3.interpolateNumber(h,f)}):f&&n.push(n.pop()+"skewX("+f+")"),p[0]!=d[0]||p[1]!=d[1]?(r=n.push(n.pop()+"scale(",null,",",null,")"),i.push({i:r-4,x:d3.interpolateNumber(p[0],d[0])},{i:r-2,x:d3.interpolateNumber(p[1],d[1])})):(1!=d[0]||1!=d[1])&&n.push(n.pop()+"scale("+d+")"),r=i.length,function(t){for(var e,a=-1;++a<r;)n[(e=i[a]).i]=e.x(t);return n.join("")}},d3.interpolateRgb=function(t,e){t=d3.rgb(t),e=d3.rgb(e);var r=t.r,n=t.g,i=t.b,a=e.r-r,o=e.g-n,s=e.b-i;return function(t){return"#"+W(Math.round(r+a*t))+W(Math.round(n+o*t))+W(Math.round(i+s*t))}},d3.interpolateHsl=function(t,e){t=d3.hsl(t),e=d3.hsl(e);var r=t.h,n=t.s,i=t.l,a=e.h-r,o=e.s-n,s=e.l-i;return function(t){return P(r+a*t,n+o*t,i+s*t).toString()}},d3.interpolateArray=function(t,e){var r,n=[],i=[],a=t.length,o=e.length,s=Math.min(t.length,e.length);for(r=0;r<s;++r)n.push(d3.interpolate(t[r],e[r]));for(;r<a;++r)i[r]=t[r];for(;r<o;++r)i[r]=e[r];return function(t){for(r=0;r<s;++r)i[r]=n[r](t);return i}},d3.interpolateObject=function(t,e){var r,n={},i={};for(r in t)r in e?n[r]=M(r)(t[r],e[r]):i[r]=t[r];for(r in e)r in t||(i[r]=e[r]);return function(t){for(r in n)i[r]=n[r](t);return i}};var jr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;d3.interpolators=[d3.interpolateObject,function(t,e){return e instanceof Array&&d3.interpolateArray(t,e)},function(t,e){return("string"==typeof t||"string"==typeof e)&&d3.interpolateString(t+"",e+"")},function(t,e){return("string"==typeof e?Or.has(e)||/^(#|rgb\(|hsl\()/.test(e):e instanceof C||e instanceof E)&&d3.interpolateRgb(t,e)},function(t,e){return!isNaN(t=+t)&&!isNaN(e=+e)&&d3.interpolateNumber(t,e)}],d3.rgb=function(t,e,r){return 1===arguments.length?t instanceof C?U(t.r,t.g,t.b):N(""+t,U,P):U(~~t,~~e,~~r)},C.prototype.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,r=this.g,n=this.b,i=30;return e||r||n?(e&&e<i&&(e=i),r&&r<i&&(r=i),n&&n<i&&(n=i),U(Math.min(255,Math.floor(e/t)),Math.min(255,Math.floor(r/t)),Math.min(255,Math.floor(n/t)))):U(i,i,i)},C.prototype.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),U(Math.floor(t*this.r),Math.floor(t*this.g),Math.floor(t*this.b))},C.prototype.hsl=function(){return D(this.r,this.g,this.b)},C.prototype.toString=function(){return"#"+W(this.r)+W(this.g)+W(this.b)};var Or=d3.map({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"});Or.forEach(function(t,e){Or.set(t,N(e,U,P))}),d3.hsl=function(t,e,r){return 1===arguments.length?t instanceof E?S(t.h,t.s,t.l):N(""+t,D,S):S(+t,+e,+r)},E.prototype.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),S(this.h,this.s,this.l/t)},E.prototype.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),S(this.h,this.s,t*this.l)},E.prototype.rgb=function(){return P(this.h,this.s,this.l)},E.prototype.toString=function(){return this.rgb().toString()};var Lr=function(t,e){return e.querySelector(t)},Rr=function(t,e){return e.querySelectorAll(t)},Mr=document.documentElement,Ir=Mr.matchesSelector||Mr.webkitMatchesSelector||Mr.mozMatchesSelector||Mr.msMatchesSelector||Mr.oMatchesSelector,Ar=function(t,e){return Ir.call(t,e)};"function"==typeof Sizzle&&(Lr=function(t,e){return Sizzle(t,e)[0]},Rr=function(t,e){return Sizzle.uniqueSort(Sizzle(t,e))},Ar=Sizzle.matchesSelector);var Ur=[];d3.selection=function(){return Wr},d3.selection.prototype=Ur,Ur.select=function(t){var e,r,n,i,a=[];"function"!=typeof t&&(t=k(t));for(var o=-1,s=this.length;++o<s;){a.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var u=-1,l=n.length;++u<l;)(i=n[u])?(e.push(r=t.call(i,i.__data__,u)),r&&"__data__"in i&&(r.__data__=i.__data__)):e.push(null)}return F(a)},Ur.selectAll=function(t){var e,r,n=[];"function"!=typeof t&&(t=q(t));for(var i=-1,a=this.length;++i<a;)for(var o=this[i],s=-1,u=o.length;++s<u;)(r=o[s])&&(n.push(e=ur(t.call(r,r.__data__,s))),e.parentNode=r);return F(n)},Ur.attr=function(t,e){if(t=d3.ns.qualify(t),arguments.length<2){var r=this.node();return t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}return this.each(null==e?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"==typeof e?t.local?function(){var r=e.apply(this,arguments);null==r?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}:function(){var r=e.apply(this,arguments);null==r?this.removeAttribute(t):this.setAttribute(t,r)}:t.local?function(){this.setAttributeNS(t.space,t.local,e)}:function(){this.setAttribute(t,e)})},Ur.classed=function(t,e){var r=t.split(Cr),n=r.length,i=-1;if(arguments.length>1){for(;++i<n;)z.call(this,r[i],e);return this}for(;++i<n;)if(!z.call(this,r[i]))return!1;return!0};var Cr=/\s+/g;Ur.style=function(t,e,r){return arguments.length<3&&(r=""),arguments.length<2?window.getComputedStyle(this.node(),null).getPropertyValue(t):this.each(null==e?function(){this.style.removeProperty(t)}:"function"==typeof e?function(){var n=e.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,r)}:function(){this.style.setProperty(t,e,r)})},Ur.property=function(t,e){return arguments.length<2?this.node()[t]:this.each(null==e?function(){delete this[t]}:"function"==typeof e?function(){var r=e.apply(this,arguments);null==r?delete this[t]:this[t]=r}:function(){this[t]=e})},Ur.text=function(t){return arguments.length<1?this.node().textContent:this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t})},Ur.html=function(t){return arguments.length<1?this.node().innerHTML:this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t})},Ur.append=function(t){return t=d3.ns.qualify(t),this.select(t.local?function(){return this.appendChild(document.createElementNS(t.space,t.local))}:function(){return this.appendChild(document.createElementNS(this.namespaceURI,t))})},Ur.insert=function(t,e){return t=d3.ns.qualify(t),this.select(t.local?function(){return this.insertBefore(document.createElementNS(t.space,t.local),Lr(e,this))}:function(){return this.insertBefore(document.createElementNS(this.namespaceURI,t),Lr(e,this))})},Ur.remove=function(){return this.each(function(){var t=this.parentNode;t&&t.removeChild(this)})},Ur.data=function(e,r){function n(e,n){var i,a,o,s=e.length,h=n.length,f=Math.min(s,h),p=Math.max(s,h),d=[],g=[],m=[];if(r){var v,y=new t,b=[],w=n.length;for(i=-1;++i<s;)v=r.call(a=e[i],a.__data__,i),y.has(v)?m[w++]=a:y.set(v,a),b.push(v);for(i=-1;++i<h;)v=r.call(n,o=n[i],i),y.has(v)?(d[i]=a=y.get(v),a.__data__=o,g[i]=m[i]=null):(g[i]=X(o),d[i]=m[i]=null),y.remove(v);for(i=-1;++i<s;)y.has(b[i])&&(m[i]=e[i])}else{for(i=-1;++i<f;)o=n[i],(a=e[i])?(a.__data__=o,d[i]=a,g[i]=m[i]=null):(g[i]=X(o),d[i]=m[i]=null);for(;i<h;++i)g[i]=X(n[i]),d[i]=m[i]=null;for(;i<p;++i)m[i]=e[i],g[i]=d[i]=null}g.update=d,g.parentNode=d.parentNode=m.parentNode=e.parentNode,u.push(g),l.push(d),c.push(m)}var i,a,o=-1,s=this.length;if(!arguments.length){for(e=new Array(s=(i=this[0]).length);++o<s;)(a=i[o])&&(e[o]=a.__data__);return e}var u=H([]),l=F([]),c=F([]);if("function"==typeof e)for(;++o<s;)n(i=this[o],e.call(i,i.parentNode.__data__,o));else for(;++o<s;)n(i=this[o],e);return l.enter=function(){return u},l.exit=function(){return c},l},Ur.datum=Ur.map=function(t){return arguments.length<1?this.property("__data__"):this.property("__data__",t)},Ur.filter=function(t){var e,r,n,i=[];"function"!=typeof t&&(t=function(t){return function(){return Ar(this,t)}}(t));for(var a=0,o=this.length;a<o;a++){i.push(e=[]),e.parentNode=(r=this[a]).parentNode;for(var s=0,u=r.length;s<u;s++)(n=r[s])&&t.call(n,n.__data__,s)&&e.push(n)}return F(i)},Ur.order=function(){for(var t=-1,e=this.length;++t<e;)for(var r,n=this[t],i=n.length-1,a=n[i];--i>=0;)(r=n[i])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},Ur.sort=function(t){t=(function(t){return arguments.length||(t=d3.ascending),function(e,r){return t(e&&e.__data__,r&&r.__data__)}}).apply(this,arguments);for(var e=-1,r=this.length;++e<r;)this[e].sort(t);return this.order()},Ur.on=function(t,e,r){arguments.length<3&&(r=!1);var n="__on"+t,i=t.indexOf(".");return i>0&&(t=t.substring(0,i)),arguments.length<2?(i=this.node()[n])&&i._:this.each(function(i,a){function o(t){var r=d3.event;d3.event=t;try{e.call(s,s.__data__,a)}finally{d3.event=r}}var s=this,u=s[n];u&&(s.removeEventListener(t,u,u.$),delete s[n]),e&&(s.addEventListener(t,s[n]=o,o.$=r),o._=e)})},Ur.each=function(t){for(var e=-1,r=this.length;++e<r;)for(var n=this[e],i=-1,a=n.length;++i<a;){var o=n[i];o&&t.call(o,o.__data__,i,e)}return this},Ur.call=function(t){return t.apply(this,(arguments[0]=this,arguments)),this},Ur.empty=function(){return!this.node()},Ur.node=function(t){for(var e=0,r=this.length;e<r;e++)for(var n=this[e],i=0,a=n.length;i<a;i++){var o=n[i];if(o)return o}return null},Ur.transition=function(){for(var t,e,r=[],n=-1,i=this.length;++n<i;){r.push(t=[]);for(var a=this[n],o=-1,s=a.length;++o<s;)t.push((e=a[o])?{node:e,delay:Pr,duration:Fr}:null)}return $(r,Er||++Sr,Date.now())};var Wr=F([[document]]);Wr[0].parentNode=Mr,d3.select=function(t){return"string"==typeof t?Wr.select(t):F([[t]])},d3.selectAll=function(t){return"string"==typeof t?Wr.selectAll(t):F([ur(t)])};var Nr=[];d3.selection.enter=H,d3.selection.enter.prototype=Nr,Nr.append=Ur.append,Nr.insert=Ur.insert,Nr.empty=Ur.empty,Nr.node=Ur.node,Nr.select=function(t){for(var e,r,n,i,a,o=[],s=-1,u=this.length;++s<u;){n=(i=this[s]).update,o.push(e=[]),e.parentNode=i.parentNode;for(var l=-1,c=i.length;++l<c;)(a=i[l])?(e.push(n[l]=r=t.call(i.parentNode,a.__data__,l)),r.__data__=a.__data__):e.push(null)}return F(o)};var Dr={},Tr=[],Sr=0,Er=0,Pr=0,Fr=250,kr=d3.ease("cubic-in-out");Tr.call=Ur.call,d3.transition=function(t){return arguments.length?Er?t.transition():t:Wr.transition()},d3.transition.prototype=Tr,Tr.select=function(t){var e,r,n,i=[];"function"!=typeof t&&(t=k(t));for(var a=-1,o=this.length;++a<o;){i.push(e=[]);for(var s=this[a],u=-1,l=s.length;++u<l;)(n=s[u])&&(r=t.call(n.node,n.node.__data__,u))?("__data__"in n.node&&(r.__data__=n.node.__data__),e.push({node:r,delay:n.delay,duration:n.duration})):e.push(null)}return $(i,this.id,this.time).ease(this.ease())},Tr.selectAll=function(t){var e,r,n,i=[];"function"!=typeof t&&(t=q(t));for(var a=-1,o=this.length;++a<o;)for(var s=this[a],u=-1,l=s.length;++u<l;)if(n=s[u]){r=t.call(n.node,n.node.__data__,u),i.push(e=[]);for(var c=-1,h=r.length;++c<h;)e.push({node:r[c],delay:n.delay,duration:n.duration})}return $(i,this.id,this.time).ease(this.ease())},Tr.attr=function(t,e){return this.attrTween(t,V(t,e))},Tr.attrTween=function(t,e){var r=d3.ns.qualify(t);return this.tween("attr."+t,r.local?function(t,n){var i=e.call(this,t,n,this.getAttributeNS(r.space,r.local));return i===Dr?(this.removeAttributeNS(r.space,r.local),null):i&&function(t){this.setAttributeNS(r.space,r.local,i(t))}}:function(t,n){var i=e.call(this,t,n,this.getAttribute(r));return i===Dr?(this.removeAttribute(r),null):i&&function(t){this.setAttribute(r,i(t))}})},Tr.style=function(t,e,r){return arguments.length<3&&(r=""),this.styleTween(t,V(t,e),r)},Tr.styleTween=function(t,e,r){return arguments.length<3&&(r=""),this.tween("style."+t,function(n,i){var a=e.call(this,n,i,window.getComputedStyle(this,null).getPropertyValue(t));return a===Dr?(this.style.removeProperty(t),null):a&&function(e){this.style.setProperty(t,a(e),r)}})},Tr.text=function(t){return this.tween("text",function(e,r){this.textContent="function"==typeof t?t.call(this,e,r):t})},Tr.remove=function(){return this.each("end.transition",function(){var t;!this.__transition__&&(t=this.parentNode)&&t.removeChild(this)})},Tr.delay=function(t){var e=this;return e.each("function"==typeof t?function(r,n,i){e[i][n].delay=0|t.apply(this,arguments)}:(t|=0,function(r,n,i){e[i][n].delay=t}))},Tr.duration=function(t){var e=this;return e.each("function"==typeof t?function(r,n,i){e[i][n].duration=Math.max(1,0|t.apply(this,arguments))}:(t=Math.max(1,0|t),function(r,n,i){e[i][n].duration=t}))},Tr.transition=function(){return this.select(r)};var qr,zr,Xr=null;d3.timer=function(t,e,r){var n=!1,i=Xr;if(arguments.length<3){if(arguments.length<2)e=0;else if(!isFinite(e))return;r=Date.now()}for(;i;){if(i.callback===t){i.then=r,i.delay=e,n=!0;break}i=i.next}n||(Xr={callback:t,then:r,delay:e,next:Xr}),qr||(zr=clearTimeout(zr),qr=1,Hr(B))},d3.timer.flush=function(){for(var t=Date.now(),e=Xr;e;)e.delay||(e.flush=e.callback(t-e.then)),e=e.next;Y()};var Hr=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){setTimeout(t,17)};d3.transform=function(t){var e=document.createElementNS(d3.ns.prefix.svg,"g"),r={a:1,b:0,c:0,d:1,e:0,f:0};return(d3.transform=function(t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate();return new Z(n?n.matrix:r)})(t)},Z.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var $r=180/Math.PI;d3.mouse=function(t){return J(t,L())};var Qr=/WebKit/.test(navigator.userAgent)?-1:0;d3.touches=function(t,e){return arguments.length<2&&(e=L().touches),e?ur(e).map(function(e){var r=J(t,e);return r.identifier=e.identifier,r}):[]},d3.scale={},d3.scale.linear=function(){return function t(e,r,n,i){function a(){var t=Math.min(e.length,r.length)>2?ct:lt,a=i?A:I;return s=t(e,r,a,n),u=t(r,e,a,d3.interpolate),o}function o(t){return s(t)}var s,u;return o.invert=function(t){return u(t)},o.domain=function(t){return arguments.length?(e=t.map(Number),a()):e},o.range=function(t){return arguments.length?(r=t,a()):r},o.rangeRound=function(t){return o.range(t).interpolate(d3.interpolateRound)},o.clamp=function(t){return arguments.length?(i=t,a()):i},o.interpolate=function(t){return arguments.length?(n=t,a()):n},o.ticks=function(t){return st(e,t)},o.tickFormat=function(t){return ut(e,t)},o.nice=function(){return rt(e,at),a()},o.copy=function(){return t(e,r,n,i)},a()}([0,1],[0,1],d3.interpolate,!1)},d3.scale.log=function(){return function t(e,r){function n(t){return e(r(t))}var i=r.pow;return n.invert=function(t){return i(e.invert(t))},n.domain=function(t){return arguments.length?(i=(r=t[0]<0?ft:ht).pow,e.domain(t.map(r)),n):e.domain().map(i)},n.nice=function(){return e.domain(rt(e.domain(),nt)),n},n.ticks=function(){var t=tt(e.domain()),n=[];if(t.every(isFinite)){var a=Math.floor(t[0]),o=Math.ceil(t[1]),s=i(t[0]),u=i(t[1]);if(r===ft)for(n.push(i(a));a++<o;)for(var l=9;l>0;l--)n.push(i(a)*l);else{for(;a<o;a++)for(l=1;l<10;l++)n.push(i(a)*l);n.push(i(a))}for(a=0;n[a]<s;a++);for(o=n.length;n[o-1]>u;o--);n=n.slice(a,o)}return n},n.tickFormat=function(t,e){if(arguments.length<2&&(e=Vr),arguments.length<1)return e;var a,o=t/n.ticks().length,s=r===ft?(a=-1e-12,Math.floor):(a=1e-12,Math.ceil);return function(t){return t/i(s(r(t)+a))<o?e(t):""}},n.copy=function(){return t(e.copy(),r)},it(n,e)}(d3.scale.linear(),ht)};var Vr=d3.format(".0e");ht.pow=function(t){return Math.pow(10,t)},ft.pow=function(t){return-Math.pow(10,-t)},d3.scale.pow=function(){return function t(e,r){function n(t){return e(i(t))}var i=pt(r),a=pt(1/r);return n.invert=function(t){return a(e.invert(t))},n.domain=function(t){return arguments.length?(e.domain(t.map(i)),n):e.domain().map(a)},n.ticks=function(t){return st(n.domain(),t)},n.tickFormat=function(t){return ut(n.domain(),t)},n.nice=function(){return n.domain(rt(n.domain(),at))},n.exponent=function(t){if(!arguments.length)return r;var e=n.domain();return i=pt(r=t),a=pt(1/r),n.domain(e)},n.copy=function(){return t(e.copy(),r)},it(n,e)}(d3.scale.linear(),1)},d3.scale.sqrt=function(){return d3.scale.pow().exponent(.5)},d3.scale.ordinal=function(){return function e(r,n){function i(t){return s[((o.get(t)||o.set(t,r.push(t)))-1)%s.length]}function a(t,e){return d3.range(r.length).map(function(r){return t+e*r})}var o,s,u;return i.domain=function(e){if(!arguments.length)return r;r=[],o=new t;for(var a,s=-1,u=e.length;++s<u;)o.has(a=e[s])||o.set(a,r.push(a));return i[n.t](n.x,n.p)},i.range=function(t){return arguments.length?(s=t,u=0,n={t:"range",x:t},i):s},i.rangePoints=function(t,e){arguments.length<2&&(e=0);var o=t[0],l=t[1],c=(l-o)/(r.length-1+e);return s=a(r.length<2?(o+l)/2:o+c*e/2,c),u=0,n={t:"rangePoints",x:t,p:e},i},i.rangeBands=function(t,e){arguments.length<2&&(e=0);var o=t[1]<t[0],l=t[o-0],c=(t[1-o]-l)/(r.length+e);return s=a(l+c*e,c),o&&s.reverse(),u=c*(1-e),n={t:"rangeBands",x:t,p:e},i},i.rangeRoundBands=function(t,e){arguments.length<2&&(e=0);var o=t[1]<t[0],l=t[o-0],c=t[1-o],h=Math.floor((c-l)/(r.length+e));return s=a(l+Math.round((c-l-(r.length-e)*h)/2),h),o&&s.reverse(),u=Math.round(h*(1-e)),n={t:"rangeRoundBands",x:t,p:e},i},i.rangeBand=function(){return u},i.rangeExtent=function(){return tt(n.x)},i.copy=function(){return e(r,n)},i.domain(r)}([],{t:"range",x:[]})},d3.scale.category10=function(){return d3.scale.ordinal().range(Br)},d3.scale.category20=function(){return d3.scale.ordinal().range(Yr)},d3.scale.category20b=function(){return d3.scale.ordinal().range(Zr)},d3.scale.category20c=function(){return d3.scale.ordinal().range(Gr)};var Br=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],Yr=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],Zr=["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"],Gr=["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"];d3.scale.quantile=function(){return function t(e,r){function n(){var t=0,n=r.length;for(a=[];++t<n;)a[t-1]=d3.quantile(e,t/n);return i}function i(t){return isNaN(t=+t)?NaN:r[d3.bisect(a,t)]}var a;return i.domain=function(t){return arguments.length?(e=t.filter(function(t){return!isNaN(t)}).sort(d3.ascending),n()):e},i.range=function(t){return arguments.length?(r=t,n()):r},i.quantiles=function(){return a},i.copy=function(){return t(e,r)},n()}([],[])},d3.scale.quantize=function(){return function t(e,r,n){function i(t){return n[Math.max(0,Math.min(s,Math.floor(o*(t-e))))]}function a(){return o=n.length/(r-e),s=n.length-1,i}var o,s;return i.domain=function(t){return arguments.length?(e=+t[0],r=+t[t.length-1],a()):[e,r]},i.range=function(t){return arguments.length?(n=t,a()):n},i.copy=function(){return t(e,r,n)},a()}(0,1,[0,1])},d3.scale.identity=function(){return function t(e){function r(t){return+t}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(e=t.map(r),r):e},r.ticks=function(t){return st(e,t)},r.tickFormat=function(t){return ut(e,t)},r.copy=function(){return t(e)},r}([0,1])},d3.svg={},d3.svg.arc=function(){function t(){var t=e.apply(this,arguments),i=r.apply(this,arguments),o=n.apply(this,arguments)+Kr,s=a.apply(this,arguments)+Kr,u=(s<o&&(u=o,o=s,s=u),s-o),l=u<Math.PI?"0":"1",c=Math.cos(o),h=Math.sin(o),f=Math.cos(s),p=Math.sin(s);return u>=Jr?t?"M0,"+i+"A"+i+","+i+" 0 1,1 0,"+-i+"A"+i+","+i+" 0 1,1 0,"+i+"M0,"+t+"A"+t+","+t+" 0 1,0 0,"+-t+"A"+t+","+t+" 0 1,0 0,"+t+"Z":"M0,"+i+"A"+i+","+i+" 0 1,1 0,"+-i+"A"+i+","+i+" 0 1,1 0,"+i+"Z":t?"M"+i*c+","+i*h+"A"+i+","+i+" 0 "+l+",1 "+i*f+","+i*p+"L"+t*f+","+t*p+"A"+t+","+t+" 0 "+l+",0 "+t*c+","+t*h+"Z":"M"+i*c+","+i*h+"A"+i+","+i+" 0 "+l+",1 "+i*f+","+i*p+"L0,0Z"}var e=dt,r=gt,n=mt,a=vt;return t.innerRadius=function(r){return arguments.length?(e=i(r),t):e},t.outerRadius=function(e){return arguments.length?(r=i(e),t):r},t.startAngle=function(e){return arguments.length?(n=i(e),t):n},t.endAngle=function(e){return arguments.length?(a=i(e),t):a},t.centroid=function(){var t=(e.apply(this,arguments)+r.apply(this,arguments))/2,i=(n.apply(this,arguments)+a.apply(this,arguments))/2+Kr;return[Math.cos(i)*t,Math.sin(i)*t]},t};var Kr=-Math.PI/2,Jr=2*Math.PI-1e-6;d3.svg.line=function(){return yt(e)};var tn="linear",en=d3.map({linear:xt,"step-before":_t,"step-after":jt,basis:Rt,"basis-open":function(t){if(t.length<4)return xt(t);for(var e,r=[],n=-1,i=t.length,a=[0],o=[0];++n<3;)a.push((e=t[n])[0]),o.push(e[1]);for(r.push(Mt(an,a)+","+Mt(an,o)),--n;++n<i;)e=t[n],a.shift(),a.push(e[0]),o.shift(),o.push(e[1]),It(r,a,o);return r.join("")},"basis-closed":function(t){for(var e,r,n=-1,i=t.length,a=i+4,o=[],s=[];++n<4;)o.push((r=t[n%i])[0]),s.push(r[1]);for(e=[Mt(an,o),",",Mt(an,s)],--n;++n<a;)r=t[n%i],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),It(e,o,s);return e.join("")},bundle:function(t,e){for(var r,n,i=t.length-1,a=t[0][0],o=t[0][1],s=t[i][0]-a,u=t[i][1]-o,l=-1;++l<=i;)(r=t[l])[0]=e*r[0]+(1-e)*(a+(n=l/i)*s),r[1]=e*r[1]+(1-e)*(o+n*u);return Rt(t)},cardinal:function(t,e,r){return t.length<3?xt(t):t[0]+Ot(t,Lt(t,e))},"cardinal-open":function(t,e){return t.length<4?xt(t):t[1]+Ot(t.slice(1,t.length-1),Lt(t,e))},"cardinal-closed":function(t,e){return t.length<3?xt(t):t[0]+Ot((t.push(t[0]),t),Lt([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?xt(t):t[0]+Ot(t,function(t){for(var e,r,n,i,a=[],o=function(t){for(var e=0,r=t.length-1,n=[],i=t[0],a=t[1],o=n[0]=At(i,a);++e<r;)n[e]=o+(o=At(i=a,a=t[e+1]));return n[e]=o,n}(t),s=-1,u=t.length-1;++s<u;)e=At(t[s],t[s+1]),Math.abs(e)<1e-6?o[s]=o[s+1]=0:(i=(r=o[s]/e)*r+(n=o[s+1]/e)*n)>9&&(i=3*e/Math.sqrt(i),o[s]=i*r,o[s+1]=i*n);for(s=-1;++s<=u;)i=(t[Math.min(u,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([i||0,o[s]*i||0]);return a}(t))}}),rn=[0,2/3,1/3,0],nn=[0,1/3,2/3,0],an=[0,1/6,2/3,1/6];d3.svg.line.radial=function(){var t=yt(Ut);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},_t.reverse=jt,jt.reverse=_t,d3.svg.area=function(){return Ct(Object)},d3.svg.area.radial=function(){var t=Ct(Ut);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},d3.svg.chord=function(){function t(t,i){var s=e(this,a,t,i),u=e(this,o,t,i);return"M"+s.p0+r(s.r,s.p1,s.a1-s.a0)+(s.a0==u.a0&&s.a1==u.a1?n(0,0,0,s.p0):n(0,0,0,u.p0)+r(u.r,u.p1,u.a1-u.a0)+n(0,0,0,s.p0))+"Z"}function e(t,e,r,n){var i=e.call(t,r,n),a=s.call(t,i,n),o=u.call(t,i,n)+Kr,c=l.call(t,i,n)+Kr;return{r:a,a0:o,a1:c,p0:[a*Math.cos(o),a*Math.sin(o)],p1:[a*Math.cos(c),a*Math.sin(c)]}}function r(t,e,r){return"A"+t+","+t+" 0 "+ +(r>Math.PI)+",1 "+e}function n(t,e,r,n){return"Q 0,0 "+n}var a=Wt,o=Nt,s=Dt,u=mt,l=vt;return t.radius=function(e){return arguments.length?(s=i(e),t):s},t.source=function(e){return arguments.length?(a=i(e),t):a},t.target=function(e){return arguments.length?(o=i(e),t):o},t.startAngle=function(e){return arguments.length?(u=i(e),t):u},t.endAngle=function(e){return arguments.length?(l=i(e),t):l},t},d3.svg.diagonal=function(){function t(t,i){var a=e.call(this,t,i),o=r.call(this,t,i),s=(a.y+o.y)/2,u=[a,{x:a.x,y:s},{x:o.x,y:s},o];return"M"+(u=u.map(n))[0]+"C"+u[1]+" "+u[2]+" "+u[3]}var e=Wt,r=Nt,n=Tt;return t.source=function(r){return arguments.length?(e=i(r),t):e},t.target=function(e){return arguments.length?(r=i(e),t):r},t.projection=function(e){return arguments.length?(n=e,t):n},t},d3.svg.diagonal.radial=function(){var t=d3.svg.diagonal(),e=Tt,r=t.projection;return t.projection=function(t){return arguments.length?r(function(t){return function(){var e=t.apply(this,arguments),r=e[0],n=e[1]+Kr;return[r*Math.cos(n),r*Math.sin(n)]}}(e=t)):e},t},d3.svg.mouse=d3.mouse,d3.svg.touches=d3.touches,d3.svg.symbol=function(){function t(t,n){return(on.get(e.call(this,t,n))||Pt)(r.call(this,t,n))}var e=Et,r=St;return t.type=function(r){return arguments.length?(e=i(r),t):e},t.size=function(e){return arguments.length?(r=i(e),t):r},t};var on=d3.map({circle:Pt,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*un)),r=e*un;return"M0,"+-e+"L"+r+",0 0,"+e+" "+-r+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/sn),r=e*sn/2;return"M0,"+r+"L"+e+","+-r+" "+-e+","+-r+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/sn),r=e*sn/2;return"M0,"+-r+"L"+e+","+r+" "+-e+","+r+"Z"}});d3.svg.symbolTypes=on.keys();var sn=Math.sqrt(3),un=Math.tan(30*Math.PI/180);d3.svg.axis=function(){function t(t){t.each(function(){var t,h=d3.select(this),f=null==l?r.ticks?r.ticks.apply(r,u):r.domain():l,p=null==e?r.tickFormat?r.tickFormat.apply(r,u):String:e,d=function(t,e,r){if(n=[],r&&e.length>1){for(var n,i,a,o=tt(t.domain()),s=-1,u=e.length,l=(e[1]-e[0])/++r;++s<u;)for(i=r;--i>0;)(a=+e[s]-i*l)>=o[0]&&n.push(a);for(--s,i=0;++i<r&&(a=+e[s]+i*l)<o[1];)n.push(a)}return n}(r,f,c),g=h.selectAll(".minor").data(d,String),m=g.enter().insert("line","g").attr("class","tick minor").style("opacity",1e-6),v=d3.transition(g.exit()).style("opacity",1e-6).remove(),y=d3.transition(g).style("opacity",1),b=h.selectAll("g").data(f,String),w=b.enter().insert("g","path").style("opacity",1e-6),x=d3.transition(b.exit()).style("opacity",1e-6).remove(),_=d3.transition(b).style("opacity",1),j=et(r),O=h.selectAll(".domain").data([0]),L=(O.enter().append("path").attr("class","domain"),d3.transition(O)),R=r.copy(),M=this.__chart__||R;switch(this.__chart__=R,w.append("line").attr("class","tick"),w.append("text"),_.select("text").text(p),n){case"bottom":t=Ft,m.attr("y2",a),y.attr("x2",0).attr("y2",a),w.select("line").attr("y2",i),w.select("text").attr("y",Math.max(i,0)+s),_.select("line").attr("x2",0).attr("y2",i),_.select("text").attr("x",0).attr("y",Math.max(i,0)+s).attr("dy",".71em").attr("text-anchor","middle"),L.attr("d","M"+j[0]+","+o+"V0H"+j[1]+"V"+o);break;case"top":t=Ft,m.attr("y2",-a),y.attr("x2",0).attr("y2",-a),w.select("line").attr("y2",-i),w.select("text").attr("y",-(Math.max(i,0)+s)),_.select("line").attr("x2",0).attr("y2",-i),_.select("text").attr("x",0).attr("y",-(Math.max(i,0)+s)).attr("dy","0em").attr("text-anchor","middle"),L.attr("d","M"+j[0]+","+-o+"V0H"+j[1]+"V"+-o);break;case"left":t=kt,m.attr("x2",-a),y.attr("x2",-a).attr("y2",0),w.select("line").attr("x2",-i),w.select("text").attr("x",-(Math.max(i,0)+s)),_.select("line").attr("x2",-i).attr("y2",0),_.select("text").attr("x",-(Math.max(i,0)+s)).attr("y",0).attr("dy",".32em").attr("text-anchor","end"),L.attr("d","M"+-o+","+j[0]+"H0V"+j[1]+"H"+-o);break;case"right":t=kt,m.attr("x2",a),y.attr("x2",a).attr("y2",0),w.select("line").attr("x2",i),w.select("text").attr("x",Math.max(i,0)+s),_.select("line").attr("x2",i).attr("y2",0),_.select("text").attr("x",Math.max(i,0)+s).attr("y",0).attr("dy",".32em").attr("text-anchor","start"),L.attr("d","M"+o+","+j[0]+"H0V"+j[1]+"H"+o)}if(r.ticks)w.call(t,M),_.call(t,R),x.call(t,R),m.call(t,M),y.call(t,R),v.call(t,R);else{var I=R.rangeBand()/2,A=function(t){return R(t)+I};w.call(t,A),_.call(t,A)}})}var e,r=d3.scale.linear(),n="bottom",i=6,a=6,o=6,s=3,u=[10],l=null,c=0;return t.scale=function(e){return arguments.length?(r=e,t):r},t.orient=function(e){return arguments.length?(n=e,t):n},t.ticks=function(){return arguments.length?(u=arguments,t):u},t.tickValues=function(e){return arguments.length?(l=e,t):l},t.tickFormat=function(r){return arguments.length?(e=r,t):e},t.tickSize=function(e,r,n){if(!arguments.length)return i;var s=arguments.length-1;return i=+e,a=s>1?+r:i,o=s>0?+arguments[s]:i,t},t.tickPadding=function(e){return arguments.length?(s=+e,t):s},t.tickSubdivide=function(e){return arguments.length?(c=+e,t):c},t},d3.svg.brush=function(){function t(a){a.each(function(){var a,o=d3.select(this),c=o.selectAll(".background").data([0]),h=o.selectAll(".extent").data([0]),f=o.selectAll(".resize").data(l,String);o.style("pointer-events","all").on("mousedown.brush",i).on("touchstart.brush",i),c.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),h.enter().append("rect").attr("class","extent").style("cursor","move"),f.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return ln[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),f.style("display",t.empty()?"none":null),f.exit().remove(),s&&(a=et(s),c.attr("x",a[0]).attr("width",a[1]-a[0]),r(o)),u&&(a=et(u),c.attr("y",a[0]).attr("height",a[1]-a[0]),n(o)),e(o)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+c[+/e$/.test(t)][0]+","+c[+/^s/.test(t)][1]+")"})}function r(t){t.select(".extent").attr("x",c[0][0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",c[1][0]-c[0][0])}function n(t){t.select(".extent").attr("y",c[0][1]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",c[1][1]-c[0][1])}function i(){function i(){var t=d3.event.changedTouches;return t?d3.touches(g,t)[0]:d3.mouse(g)}function l(){var t=i(),a=!1;d&&(t[0]+=d[0],t[1]+=d[1]),_||(d3.event.altKey?(p||(p=[(c[0][0]+c[1][0])/2,(c[0][1]+c[1][1])/2]),j[0]=c[+(t[0]<p[0])][0],j[1]=c[+(t[1]<p[1])][1]):p=null),w&&h(t,s,0)&&(r(y),a=!0),x&&h(t,u,1)&&(n(y),a=!0),a&&(e(y),v({type:"brush",mode:_?"move":"resize"}))}function h(t,e,r){var n,i,o=et(e),s=o[0],u=o[1],l=j[r],h=c[1][r]-c[0][r];if(_&&(s-=l,u-=h+l),n=Math.max(s,Math.min(u,t[r])),_?i=(n+=l)+h:(p&&(l=Math.max(s,Math.min(u,2*p[r]-n))),l<n?(i=n,n=l):i=l),c[0][r]!==n||c[1][r]!==i)return a=null,c[0][r]=n,c[1][r]=i,!0}function f(){l(),y.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),d3.select("body").style("cursor",null),L.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),v({type:"brushend"}),O()}var p,d,g=this,m=d3.select(d3.event.target),v=o.of(g,arguments),y=d3.select(g),b=m.datum(),w=!/^(n|s)$/.test(b)&&s,x=!/^(e|w)$/.test(b)&&u,_=m.classed("extent"),j=i(),L=d3.select(window).on("mousemove.brush",l).on("mouseup.brush",f).on("touchmove.brush",l).on("touchend.brush",f).on("keydown.brush",function(){32==d3.event.keyCode&&(_||(p=null,j[0]-=c[1][0],j[1]-=c[1][1],_=2),O())}).on("keyup.brush",function(){32==d3.event.keyCode&&2==_&&(j[0]+=c[1][0],j[1]+=c[1][1],_=0,O())});if(_)j[0]=c[0][0]-j[0],j[1]=c[0][1]-j[1];else if(b){var R=+/w$/.test(b),M=+/^n/.test(b);d=[c[1-R][0]-j[0],c[1-M][1]-j[1]],j[0]=c[R][0],j[1]=c[M][1]}else d3.event.altKey&&(p=j.slice());y.style("pointer-events","none").selectAll(".resize").style("display",null),d3.select("body").style("cursor",m.style("cursor")),v({type:"brushstart"}),l(),O()}var a,o=R(t,"brushstart","brush","brushend"),s=null,u=null,l=cn[0],c=[[0,0],[0,0]];return t.x=function(e){return arguments.length?(l=cn[!(s=e)<<1|!u],t):s},t.y=function(e){return arguments.length?(l=cn[!s<<1|!(u=e)],t):u},t.extent=function(e){var r,n,i,o,l;return arguments.length?(a=[[0,0],[0,0]],s&&(r=e[0],n=e[1],u&&(r=r[0],n=n[0]),a[0][0]=r,a[1][0]=n,s.invert&&(r=s(r),n=s(n)),n<r&&(l=r,r=n,n=l),c[0][0]=0|r,c[1][0]=0|n),u&&(i=e[0],o=e[1],s&&(i=i[1],o=o[1]),a[0][1]=i,a[1][1]=o,u.invert&&(i=u(i),o=u(o)),o<i&&(l=i,i=o,o=l),c[0][1]=0|i,c[1][1]=0|o),t):(e=a||c,s&&(r=e[0][0],n=e[1][0],a||(r=c[0][0],n=c[1][0],s.invert&&(r=s.invert(r),n=s.invert(n)),n<r&&(l=r,r=n,n=l))),u&&(i=e[0][1],o=e[1][1],a||(i=c[0][1],o=c[1][1],u.invert&&(i=u.invert(i),o=u.invert(o)),o<i&&(l=i,i=o,o=l))),s&&u?[[r,i],[n,o]]:s?[r,n]:u&&[i,o])},t.clear=function(){return a=null,c[0][0]=c[0][1]=c[1][0]=c[1][1]=0,t},t.empty=function(){return s&&c[0][0]===c[1][0]||u&&c[0][1]===c[1][1]},d3.rebind(t,o,"on")};var ln={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},cn=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];d3.behavior={},d3.behavior.drag=function(){function t(){this.on("mousedown.drag",e).on("touchstart.drag",e)}function e(){function t(){var t=s.parentNode,e=d3.event.changedTouches;return e?d3.touches(t,e)[0]:d3.mouse(t)}function e(){if(!s.parentNode)return i();var e=t(),r=e[0]-c[0],n=e[1]-c[1];h|=r|n,c=e,O(),u({type:"drag",x:e[0]+o[0],y:e[1]+o[1],dx:r,dy:n})}function i(){u({type:"dragend"}),h&&(O(),d3.event.target===l&&f.on("click.drag",a,!0)),f.on("mousemove.drag",null).on("touchmove.drag",null).on("mouseup.drag",null).on("touchend.drag",null)}function a(){O(),f.on("click.drag",null)}var o,s=this,u=r.of(s,arguments),l=d3.event.target,c=t(),h=0,f=d3.select(window).on("mousemove.drag",e).on("touchmove.drag",e).on("mouseup.drag",i,!0).on("touchend.drag",i,!0);o=n?[(o=n.apply(s,arguments)).x-c[0],o.y-c[1]]:[0,0],O(),u({type:"dragstart"})}var r=R(t,"drag","dragstart","dragend"),n=null;return t.origin=function(e){return arguments.length?(n=e,t):n},d3.rebind(t,r,"on")},d3.behavior.zoom=function(){function t(){this.on("mousedown.zoom",o).on("mousewheel.zoom",s).on("mousemove.zoom",u).on("DOMMouseScroll.zoom",s).on("dblclick.zoom",l).on("touchstart.zoom",c).on("touchmove.zoom",h).on("touchend.zoom",c)}function e(t){return[(t[0]-b[0])/w,(t[1]-b[1])/w]}function r(t){return[t[0]*w+b[0],t[1]*w+b[1]]}function n(t){w=Math.max(x[0],Math.min(x[1],t))}function i(t,e){e=r(e),b[0]+=t[0]-e[0],b[1]+=t[1]-e[1]}function a(t){g&&g.domain(d.range().map(function(t){return(t-b[0])/w}).map(d.invert)),v&&v.domain(m.range().map(function(t){return(t-b[1])/w}).map(m.invert)),d3.event.preventDefault(),t({type:"zoom",scale:w,translate:b})}function o(){function t(){O(),u.on("click.zoom",null)}var r=this,n=_.of(r,arguments),o=d3.event.target,s=0,u=d3.select(window).on("mousemove.zoom",function(){s=1,i(d3.mouse(r),l),a(n)}).on("mouseup.zoom",function(){s&&O(),u.on("mousemove.zoom",null).on("mouseup.zoom",null),s&&d3.event.target===o&&u.on("click.zoom",t,!0)}),l=e(d3.mouse(r));window.focus(),O()}function s(){f||(f=e(d3.mouse(this))),n(Math.pow(2,.002*function(){hn||(hn=d3.select("body").append("div").style("visibility","hidden").style("top",0).style("height",0).style("width",0).style("overflow-y","scroll").append("div").style("height","2000px").node().parentNode);var t,e=d3.event;try{hn.scrollTop=1e3,hn.dispatchEvent(e),t=1e3-hn.scrollTop}catch(r){t=e.wheelDelta||5*-e.detail}return t}())*w),i(d3.mouse(this),f),a(_.of(this,arguments))}function u(){f=null}function l(){var t=d3.mouse(this),r=e(t);n(d3.event.shiftKey?w/2:2*w),i(t,r),a(_.of(this,arguments))}function c(){var t=d3.touches(this),r=Date.now();if(p=w,f={},t.forEach(function(t){f[t.identifier]=e(t)}),O(),1===t.length&&r-y<500){var o=t[0],s=e(t[0]);n(2*w),i(o,s),a(_.of(this,arguments))}y=r}function h(){var t=d3.touches(this),e=t[0],r=f[e.identifier];if(o=t[1]){var o,s=f[o.identifier];e=[(e[0]+o[0])/2,(e[1]+o[1])/2],r=[(r[0]+s[0])/2,(r[1]+s[1])/2],n(d3.event.scale*p)}i(e,r),a(_.of(this,arguments))}var f,p,d,g,m,v,y,b=[0,0],w=1,x=dn,_=R(t,"zoom");return t.translate=function(e){return arguments.length?(b=e.map(Number),t):b},t.scale=function(e){return arguments.length?(w=+e,t):w},t.scaleExtent=function(e){return arguments.length?(x=null==e?dn:e.map(Number),t):x},t.x=function(e){return arguments.length?(g=e,d=e.copy(),t):g},t.y=function(e){return arguments.length?(v=e,m=e.copy(),t):v},d3.rebind(t,_,"on")};var hn,fn,pn,dn=[0,1/0];d3.layout={},d3.layout.bundle=function(){return function(t){for(var e=[],r=-1,n=t.length;++r<n;)e.push(qt(t[r]));return e}},d3.layout.chord=function(){function t(){var t,l,h,f,p,d={},g=[],m=d3.range(a),v=[];for(r=[],n=[],t=0,f=-1;++f<a;){for(l=0,p=-1;++p<a;)l+=i[f][p];g.push(l),v.push(d3.range(a)),t+=l}for(o&&m.sort(function(t,e){return o(g[t],g[e])}),s&&v.forEach(function(t,e){t.sort(function(t,r){return s(i[e][t],i[e][r])})}),t=(2*Math.PI-c*a)/t,l=0,f=-1;++f<a;){for(h=l,p=-1;++p<a;){var y=m[f],b=v[y][p],w=i[y][b],x=l,_=l+=w*t;d[y+"-"+b]={index:y,subindex:b,startAngle:x,endAngle:_,value:w}}n[y]={index:y,startAngle:h,endAngle:l,value:(l-h)/t},l+=c}for(f=-1;++f<a;)for(p=f-1;++p<a;){var j=d[f+"-"+p],O=d[p+"-"+f];(j.value||O.value)&&r.push(j.value<O.value?{source:O,target:j}:{source:j,target:O})}u&&e()}function e(){r.sort(function(t,e){return u((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var r,n,i,a,o,s,u,l={},c=0;return l.matrix=function(t){return arguments.length?(a=(i=t)&&i.length,r=n=null,l):i},l.padding=function(t){return arguments.length?(c=t,r=n=null,l):c},l.sortGroups=function(t){return arguments.length?(o=t,r=n=null,l):o},l.sortSubgroups=function(t){return arguments.length?(s=t,r=null,l):s},l.sortChords=function(t){return arguments.length?(u=t,r&&e(),l):u},l.chords=function(){return r||t(),r},l.groups=function(){return n||t(),n},l},d3.layout.force=function(){function t(t){return function(e,r,n,i,a){if(e.point!==t){var o,s=e.cx-t.x,u=e.cy-t.y,l=1/Math.sqrt(s*s+u*u);if((i-r)*l<v)return t.px-=s*(o=e.charge*l*l),t.py-=u*o,!0;e.point&&isFinite(l)&&(t.px-=s*(o=e.pointCharge*l*l),t.py-=u*o)}return!e.charge}}function r(t){Xt(pn=t),fn=l}var n,a,o,s,u,l={},c=d3.dispatch("start","tick","end"),h=[1,1],f=.9,p=Vt,d=Bt,g=-30,m=.1,v=.8,y=[],b=[];return l.tick=function(){if((a*=.99)<.005)return c.end({type:"end",alpha:a=0}),!0;var e,r,n,i,l,p,d,v,w,x=y.length,_=b.length;for(r=0;r<_;++r)(p=(v=(l=(n=b[r]).target).x-(i=n.source).x)*v+(w=l.y-i.y)*w)&&(w*=p=a*s[r]*((p=Math.sqrt(p))-o[r])/p,l.x-=(v*=p)*(d=i.weight/(l.weight+i.weight)),l.y-=w*d,i.x+=v*(d=1-d),i.y+=w*d);if((d=a*m)&&(v=h[0]/2,w=h[1]/2,r=-1,d))for(;++r<x;)(n=y[r]).x+=(v-n.x)*d,n.y+=(w-n.y)*d;if(g)for(function t(e,r,n){var i=0,a=0;if(e.charge=0,!e.leaf)for(var o,s=e.nodes,u=s.length,l=-1;++l<u;)null!=(o=s[l])&&(t(o,r,n),e.charge+=o.charge,i+=o.charge*o.cx,a+=o.charge*o.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var c=r*n[e.point.index];e.charge+=e.pointCharge=c,i+=c*e.point.x,a+=c*e.point.y}e.cx=i/e.charge,e.cy=a/e.charge}(e=d3.geom.quadtree(y),a,u),r=-1;++r<x;)(n=y[r]).fixed||e.visit(t(n));for(r=-1;++r<x;)(n=y[r]).fixed?(n.x=n.px,n.y=n.py):(n.x-=(n.px-(n.px=n.x))*f,n.y-=(n.py-(n.py=n.y))*f);c.tick({type:"tick",alpha:a})},l.nodes=function(t){return arguments.length?(y=t,l):y},l.links=function(t){return arguments.length?(b=t,l):b},l.size=function(t){return arguments.length?(h=t,l):h},l.linkDistance=function(t){return arguments.length?(p=i(t),l):p},l.distance=l.linkDistance,l.linkStrength=function(t){return arguments.length?(d=i(t),l):d},l.friction=function(t){return arguments.length?(f=t,l):f},l.charge=function(t){return arguments.length?(g="function"==typeof t?t:+t,l):g},l.gravity=function(t){return arguments.length?(m=t,l):m},l.theta=function(t){return arguments.length?(v=t,l):v},l.alpha=function(t){return arguments.length?(a?a=t>0?t:0:t>0&&(c.start({type:"start",alpha:a=t}),d3.timer(l.tick)),l):a},l.start=function(){function t(t,r){for(var n,i=e(),a=-1,o=i.length;++a<o;)if(!isNaN(n=i[a][t]))return n;return Math.random()*r}function e(){if(!i){for(i=[],n=0;n<c;++n)i[n]=[];for(n=0;n<f;++n){var t=b[n];i[t.source.index].push(t.target),i[t.target.index].push(t.source)}}return i[r]}var r,n,i,a,c=y.length,f=b.length,m=h[0],v=h[1];for(r=0;r<c;++r)(a=y[r]).index=r,a.weight=0;for(o=[],s=[],r=0;r<f;++r)"number"==typeof(a=b[r]).source&&(a.source=y[a.source]),"number"==typeof a.target&&(a.target=y[a.target]),o[r]=p.call(this,a,r),s[r]=d.call(this,a,r),++a.source.weight,++a.target.weight;for(r=0;r<c;++r)a=y[r],isNaN(a.x)&&(a.x=t("x",m)),isNaN(a.y)&&(a.y=t("y",v)),isNaN(a.px)&&(a.px=a.x),isNaN(a.py)&&(a.py=a.y);if(u=[],"function"==typeof g)for(r=0;r<c;++r)u[r]=+g.call(this,y[r],r);else for(r=0;r<c;++r)u[r]=g;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){n||(n=d3.behavior.drag().origin(e).on("dragstart",r).on("drag",Qt).on("dragend",$t)),this.on("mouseover.force",Xt).on("mouseout.force",Ht).call(n)},d3.rebind(l,c,"on")},d3.layout.partition=function(){function t(t,n){var i=e.call(this,t,n);return function t(e,r,n,i){var a=e.children;if(e.x=r,e.y=e.depth*i,e.dx=n,e.dy=i,a&&(o=a.length)){var o,s,u,l=-1;for(n=e.value?n/e.value:0;++l<o;)t(s=a[l],r,u=s.value*n,i),r+=u}}(i[0],0,r[0],r[1]/function t(e){var r=e.children,n=0;if(r&&(i=r.length))for(var i,a=-1;++a<i;)n=Math.max(n,t(r[a]));return 1+n}(i[0])),i}var e=d3.layout.hierarchy(),r=[1,1];return t.size=function(e){return arguments.length?(r=e,t):r},oe(t,e)},d3.layout.pie=function(){function t(a,o){var s=a.map(function(r,n){return+e.call(t,r,n)}),u=+("function"==typeof n?n.apply(this,arguments):n),l=(("function"==typeof i?i.apply(this,arguments):i)-n)/d3.sum(s),c=d3.range(a.length);null!=r&&c.sort(r===gn?function(t,e){return s[e]-s[t]}:function(t,e){return r(a[t],a[e])});var h=[];return c.forEach(function(t){h[t]={data:a[t],value:d=s[t],startAngle:u,endAngle:u+=d*l}}),h}var e=Number,r=gn,n=0,i=2*Math.PI;return t.value=function(r){return arguments.length?(e=r,t):e},t.sort=function(e){return arguments.length?(r=e,t):r},t.startAngle=function(e){return arguments.length?(n=e,t):n},t.endAngle=function(e){return arguments.length?(i=e,t):i},t};var gn={};d3.layout.stack=function(){function t(e,u){var l=e.map(function(e,n){return r.call(t,e,n)}),c=l.map(function(e,r){return e.map(function(e,r){return[o.call(t,e,r),s.call(t,e,r)]})}),h=n.call(t,c,u);l=d3.permute(l,h),c=d3.permute(c,h);var f,p,d,g=i.call(t,c,u),m=l.length,v=l[0].length;for(p=0;p<v;++p)for(a.call(t,l[0][p],d=g[p],c[0][p][1]),f=1;f<m;++f)a.call(t,l[f][p],d+=c[f-1][p][1],c[f][p][1]);return e}var r=e,n=Kt,i=Jt,a=Gt,o=Yt,s=Zt;return t.values=function(e){return arguments.length?(r=e,t):r},t.order=function(e){return arguments.length?(n="function"==typeof e?e:mn.get(e)||Kt,t):n},t.offset=function(e){return arguments.length?(i="function"==typeof e?e:vn.get(e)||Jt,t):i},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(s=e,t):s},t.out=function(e){return arguments.length?(a=e,t):a},t};var mn=d3.map({"inside-out":function(t){var e,r,n=t.length,i=t.map(te),a=t.map(ee),o=d3.range(n).sort(function(t,e){return i[t]-i[e]}),s=0,u=0,l=[],c=[];for(e=0;e<n;++e)r=o[e],s<u?(s+=a[r],l.push(r)):(u+=a[r],c.push(r));return c.reverse().concat(l)},reverse:function(t){return d3.range(t.length).reverse()},default:Kt}),vn=d3.map({silhouette:function(t){var e,r,n,i=t.length,a=t[0].length,o=[],s=0,u=[];for(r=0;r<a;++r){for(e=0,n=0;e<i;e++)n+=t[e][r][1];n>s&&(s=n),o.push(n)}for(r=0;r<a;++r)u[r]=(s-o[r])/2;return u},wiggle:function(t){var e,r,n,i,a,o,s,u,l,c=t.length,h=t[0],f=h.length,p=[];for(p[0]=u=l=0,r=1;r<f;++r){for(e=0,i=0;e<c;++e)i+=t[e][r][1];for(e=0,a=0,s=h[r][0]-h[r-1][0];e<c;++e){for(n=0,o=(t[e][r][1]-t[e][r-1][1])/(2*s);n<e;++n)o+=(t[n][r][1]-t[n][r-1][1])/s;a+=o*t[e][r][1]}p[r]=u-=i?a/i*s:0,u<l&&(l=u)}for(r=0;r<f;++r)p[r]-=l;return p},expand:function(t){var e,r,n,i=t.length,a=t[0].length,o=1/i,s=[];for(r=0;r<a;++r){for(e=0,n=0;e<i;e++)n+=t[e][r][1];if(n)for(e=0;e<i;e++)t[e][r][1]/=n;else for(e=0;e<i;e++)t[e][r][1]=o}for(r=0;r<a;++r)s[r]=0;return s},zero:Jt});d3.layout.histogram=function(){function t(t,i){for(var o,s,u=[],l=t.map(r,this),c=n.call(this,l,i),h=a.call(this,c,l,i),f=(i=-1,l.length),p=h.length-1,d=e?1:1/f;++i<p;)(o=u[i]=[]).dx=h[i+1]-(o.x=h[i]),o.y=0;if(p>0)for(i=-1;++i<f;)(s=l[i])>=c[0]&&s<=c[1]&&((o=u[d3.bisect(h,s,1,p)-1]).y+=d,o.push(t[i]));return u}var e=!0,r=Number,n=ae,a=ne;return t.value=function(e){return arguments.length?(r=e,t):r},t.range=function(e){return arguments.length?(n=i(e),t):n},t.bins=function(e){return arguments.length?(a="number"==typeof e?function(t){return ie(t,e)}:i(e),t):a},t.frequency=function(r){return arguments.length?(e=!!r,t):e},t},d3.layout.hierarchy=function(){function t(a,o,s){var u=n.call(e,a,o),l=yn?a:{data:a};if(l.depth=o,s.push(l),u&&(c=u.length)){for(var c,h=-1,f=l.children=[],p=0,g=o+1;++h<c;)d=t(u[h],g,s),d.parent=l,f.push(d),p+=d.value;r&&f.sort(r),i&&(l.value=p)}else i&&(l.value=+i.call(e,a,o)||0);return l}function e(e){var r=[];return t(e,0,r),r}var r=le,n=se,i=ue;return e.sort=function(t){return arguments.length?(r=t,e):r},e.children=function(t){return arguments.length?(n=t,e):n},e.value=function(t){return arguments.length?(i=t,e):i},e.revalue=function(t){return function t(r,n){var a=r.children,o=0;if(a&&(s=a.length))for(var s,u=-1,l=n+1;++u<s;)o+=t(a[u],l);else i&&(o=+i.call(e,yn?r:r.data,n)||0);return i&&(r.value=o),o}(t,0),t},e};var yn=!1;d3.layout.pack=function(){function t(t,n){var i=e.call(this,t,n),a=i[0];a.x=0,a.y=0,ve(a);var o=r[0],s=r[1];return function t(e,r,n,i){var a=e.children;if(e.x=r+=i*e.x,e.y=n+=i*e.y,e.r*=i,a)for(var o=-1,s=a.length;++o<s;)t(a[o],r,n,i)}(a,o/2,s/2,1/Math.max(2*a.r/o,2*a.r/s)),i}var e=d3.layout.hierarchy().sort(he),r=[1,1];return t.size=function(e){return arguments.length?(r=e,t):r},oe(t,e)},d3.layout.cluster=function(){function t(t,i){var a,o=e.call(this,t,i),s=o[0],u=0;Re(s,function(t){var e=t.children;e&&e.length?(t.x=function(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}(e),t.y=1+d3.max(e,function(t){return t.y})):(t.x=a?u+=r(t,a):0,t.y=0,a=t)});var l=function t(e){var r=e.children;return r&&r.length?t(r[0]):e}(s),c=function t(e){var r,n=e.children;return n&&(r=n.length)?t(n[r-1]):e}(s),h=l.x-r(l,c)/2,f=c.x+r(c,l)/2;return Re(s,function(t){t.x=(t.x-h)/(f-h)*n[0],t.y=(1-(s.y?t.y/s.y:1))*n[1]}),o}var e=d3.layout.hierarchy().sort(null).value(null),r=be,n=[1,1];return t.separation=function(e){return arguments.length?(r=e,t):r},t.size=function(e){return arguments.length?(n=e,t):n},oe(t,e)},d3.layout.tree=function(){function t(t,i){function a(t,e,n){if(e){for(var i,a=t,o=t,s=e,u=t.parent.children[0],l=a._tree.mod,c=o._tree.mod,h=s._tree.mod,f=u._tree.mod;s=xe(s),a=we(a),s&&a;)u=we(u),(o=xe(o))._tree.ancestor=t,(i=s._tree.prelim+h-a._tree.prelim-l+r(s,a))>0&&(Me(Ie(s,t,n),t,i),l+=i,c+=i),h+=s._tree.mod,l+=a._tree.mod,f+=u._tree.mod,c+=o._tree.mod;s&&!xe(o)&&(o._tree.thread=s,o._tree.mod+=h-c),a&&!we(u)&&(u._tree.thread=a,u._tree.mod+=l-f,n=t)}return n}var o=e.call(this,t,i),s=o[0];Re(s,function(t,e){t._tree={ancestor:t,prelim:0,mod:0,change:0,shift:0,number:e?e._tree.number+1:0}}),function t(e,n){var i=e.children,o=e._tree;if(i&&(s=i.length)){for(var s,u,l,c=i[0],h=c,f=-1;++f<s;)t(l=i[f],u),h=a(l,u,h),u=l;!function(t){for(var e,r=0,n=0,i=t.children,a=i.length;--a>=0;)(e=i[a]._tree).prelim+=r,e.mod+=r,r+=e.shift+(n+=e.change)}(e);var p=.5*(c._tree.prelim+l._tree.prelim);n?(o.prelim=n._tree.prelim+r(e,n),o.mod=o.prelim-p):o.prelim=p}else n&&(o.prelim=n._tree.prelim+r(e,n))}(s),function t(e,r){e.x=e._tree.prelim+r;var n=e.children;if(n&&(i=n.length)){var i,a=-1;for(r+=e._tree.mod;++a<i;)t(n[a],r)}}(s,-s._tree.prelim);var u=_e(s,Oe),l=_e(s,je),c=_e(s,Le),h=u.x-r(u,l)/2,f=l.x+r(l,u)/2,p=c.depth||1;return Re(s,function(t){t.x=(t.x-h)/(f-h)*n[0],t.y=t.depth/p*n[1],delete t._tree}),o}var e=d3.layout.hierarchy().sort(null).value(null),r=be,n=[1,1];return t.separation=function(e){return arguments.length?(r=e,t):r},t.size=function(e){return arguments.length?(n=e,t):n},oe(t,e)},d3.layout.treemap=function(){function t(t,e){for(var r,n,i=-1,a=t.length;++i<a;)n=(r=t[i]).value*(e<0?0:e),r.area=isNaN(n)||n<=0?0:n}function e(r){var a=r.children;if(a&&a.length){var o,s,u,l=h(r),c=[],f=a.slice(),p=1/0,d=Math.min(l.dx,l.dy);for(t(f,l.dx*l.dy/r.value),c.area=0;(u=f.length)>0;)c.push(o=f[u-1]),c.area+=o.area,(s=n(c,d))<=p?(f.pop(),p=s):(c.area-=c.pop().area,i(c,d,l,!1),d=Math.min(l.dx,l.dy),c.length=c.area=0,p=1/0);c.length&&(i(c,d,l,!0),c.length=c.area=0),a.forEach(e)}}function r(e){var n=e.children;if(n&&n.length){var a,o=h(e),s=n.slice(),u=[];for(t(s,o.dx*o.dy/e.value),u.area=0;a=s.pop();)u.push(a),u.area+=a.area,null!=a.z&&(i(u,a.z?o.dx:o.dy,o,!s.length),u.length=u.area=0);n.forEach(r)}}function n(t,e){for(var r,n=t.area,i=0,a=1/0,o=-1,s=t.length;++o<s;)(r=t[o].area)&&(r<a&&(a=r),r>i&&(i=r));return e*=e,(n*=n)?Math.max(e*i*p/n,n/(e*a*p)):1/0}function i(t,e,r,n){var i,a=-1,o=t.length,s=r.x,l=r.y,c=e?u(t.area/e):0;if(e==r.dx){for((n||c>r.dy)&&(c=r.dy);++a<o;)(i=t[a]).x=s,i.y=l,i.dy=c,s+=i.dx=Math.min(r.x+r.dx-s,c?u(i.area/c):0);i.z=!0,i.dx+=r.x+r.dx-s,r.y+=c,r.dy-=c}else{for((n||c>r.dx)&&(c=r.dx);++a<o;)(i=t[a]).x=s,i.y=l,i.dx=c,l+=i.dy=Math.min(r.y+r.dy-l,c?u(i.area/c):0);i.z=!1,i.dy+=r.y+r.dy-l,r.x+=c,r.dx-=c}}function a(n){var i=o||s(n),a=i[0];return a.x=0,a.y=0,a.dx=l[0],a.dy=l[1],o&&s.revalue(a),t([a],a.dx*a.dy/a.value),(o?r:e)(a),f&&(o=i),i}var o,s=d3.layout.hierarchy(),u=Math.round,l=[1,1],c=null,h=Ae,f=!1,p=.5*(1+Math.sqrt(5));return a.size=function(t){return arguments.length?(l=t,a):l},a.padding=function(t){function e(e){return Ue(e,t)}return arguments.length?(h=null==(c=t)?Ae:"function"==(r=typeof t)?function(e){var r=t.call(a,e,e.depth);return null==r?Ae(e):Ue(e,"number"==typeof r?[r,r,r,r]:r)}:"number"===r?(t=[t,t,t,t],e):e,a):c;var r},a.round=function(t){return arguments.length?(u=t?Math.round:Number,a):u!=Number},a.sticky=function(t){return arguments.length?(f=t,o=null,a):f},a.ratio=function(t){return arguments.length?(p=t,a):p},oe(a,s)},d3.csv=function(t,e){d3.text(t,"text/csv",function(t){e(t&&d3.csv.parse(t))})},d3.csv.parse=function(t){var e;return d3.csv.parseRows(t,function(t,r){if(r){for(var n={},i=-1,a=e.length;++i<a;)n[e[i]]=t[i];return n}return e=t,null})},d3.csv.parseRows=function(t,e){function r(){if(u.lastIndex>=t.length)return o;if(i)return i=!1,a;var e=u.lastIndex;if(34===t.charCodeAt(e)){for(var r=e;r++<t.length;)if(34===t.charCodeAt(r)){if(34!==t.charCodeAt(r+1))break;r++}u.lastIndex=r+2;var n=t.charCodeAt(r+1);return 13===n?(i=!0,10===t.charCodeAt(r+2)&&u.lastIndex++):10===n&&(i=!0),t.substring(e+1,r).replace(/""/g,'"')}var s=u.exec(t);return s?(i=44!==s[0].charCodeAt(0),t.substring(e,s.index)):(u.lastIndex=t.length,t.substring(e))}var n,i,a={},o={},s=[],u=/\r\n|[,\r\n]/g,l=0;for(u.lastIndex=0;(n=r())!==o;){for(var c=[];n!==a&&n!==o;)c.push(n),n=r();e&&!(c=e(c,l++))||s.push(c)}return s},d3.csv.format=function(t){return t.map(Ce).join("\n")},d3.geo={};var bn=Math.PI/180;d3.geo.azimuthal=function(){function t(t){var e,n=t[0]*bn-r,l=t[1]*bn,c=Math.cos(n),h=Math.sin(n),f=Math.cos(l),p=Math.sin(l),d="orthographic"!==o?a*p+i*f*c:null,g="stereographic"===o?1/(1+d):"gnomonic"===o?1/d:"equidistant"===o?(e=Math.acos(d))?e/Math.sin(e):0:"equalarea"===o?Math.sqrt(2/(1+d)):1;return[s*(g*f*h)+u[0],s*(g*(a*f*c-i*p))+u[1]]}var e,r,n,i,a,o="orthographic",s=200,u=[480,250];return t.invert=function(t){var e=(t[0]-u[0])/s,n=(t[1]-u[1])/s,l=Math.sqrt(e*e+n*n),c="stereographic"===o?2*Math.atan(l):"gnomonic"===o?Math.atan(l):"equidistant"===o?l:"equalarea"===o?2*Math.asin(.5*l):Math.asin(l),h=Math.sin(c),f=Math.cos(c);return[(r+Math.atan2(e*h,l*i*f+n*a*h))/bn,Math.asin(f*a-(l?n*h*i/l:0))/bn]},t.mode=function(e){return arguments.length?(o=e+"",t):o},t.origin=function(o){return arguments.length?(r=(e=o)[0]*bn,n=e[1]*bn,i=Math.cos(n),a=Math.sin(n),t):e},t.scale=function(e){return arguments.length?(s=+e,t):s},t.translate=function(e){return arguments.length?(u=[+e[0],+e[1]],t):u},t.origin([0,0])},d3.geo.albers=function(){function t(t){var e=n*(bn*t[0]-r),o=Math.sqrt(i-2*n*Math.sin(bn*t[1]))/n;return[u*o*Math.sin(e)+l[0],u*(o*Math.cos(e)-a)+l[1]]}function e(){var e=bn*s[0],u=bn*s[1],l=bn*o[1],c=Math.sin(e),h=Math.cos(e);return r=bn*o[0],n=.5*(c+Math.sin(u)),i=h*h+2*n*c,a=Math.sqrt(i-2*n*Math.sin(l))/n,t}var r,n,i,a,o=[-98,38],s=[29.5,45.5],u=1e3,l=[480,250];return t.invert=function(t){var e=(t[0]-l[0])/u,o=a+(t[1]-l[1])/u,s=Math.atan2(e,o),c=Math.sqrt(e*e+o*o);return[(r+s/n)/bn,Math.asin((i-c*c*n*n)/(2*n))/bn]},t.origin=function(t){return arguments.length?(o=[+t[0],+t[1]],e()):o},t.parallels=function(t){return arguments.length?(s=[+t[0],+t[1]],e()):s},t.scale=function(e){return arguments.length?(u=+e,t):u},t.translate=function(e){return arguments.length?(l=[+e[0],+e[1]],t):l},e()},d3.geo.albersUsa=function(){function t(t){var a=t[1];return(a>50?r:t[0]<-140?n:a<21?i:e)(t)}var e=d3.geo.albers(),r=d3.geo.albers().origin([-160,60]).parallels([55,65]),n=d3.geo.albers().origin([-160,20]).parallels([8,18]),i=d3.geo.albers().origin([-60,10]).parallels([8,18]);return t.scale=function(a){return arguments.length?(e.scale(a),r.scale(.6*a),n.scale(a),i.scale(1.5*a),t.translate(e.translate())):e.scale()},t.translate=function(a){if(!arguments.length)return e.translate();var o=e.scale()/1e3,s=a[0],u=a[1];return e.translate(a),r.translate([s-400*o,u+170*o]),n.translate([s-190*o,u+200*o]),i.translate([s+580*o,u+430*o]),t},t.scale(e.scale())},d3.geo.bonne=function(){function t(t){var s=t[0]*bn-e,u=t[1]*bn-r;if(n){var l=i+n-u,c=s*Math.cos(u)/l;s=l*Math.sin(c),u=l*Math.cos(c)-i}else s*=Math.cos(u),u*=-1;return[a*s+o[0],a*u+o[1]]}var e,r,n,i,a=200,o=[480,250];return t.invert=function(t){var r=(t[0]-o[0])/a,s=(t[1]-o[1])/a;if(n){var u=i+s,l=Math.sqrt(r*r+u*u);s=i+n-l,r=e+l*Math.atan2(r,u)/Math.cos(s)}else s*=-1,r/=Math.cos(s);return[r/bn,s/bn]},t.parallel=function(e){return arguments.length?(i=1/Math.tan(n=e*bn),t):n/bn},t.origin=function(n){return arguments.length?(e=n[0]*bn,r=n[1]*bn,t):[e/bn,r/bn]},t.scale=function(e){return arguments.length?(a=+e,t):a},t.translate=function(e){return arguments.length?(o=[+e[0],+e[1]],t):o},t.origin([0,0]).parallel(45)},d3.geo.equirectangular=function(){function t(t){return[e*(t[0]/360)+r[0],e*(-t[1]/360)+r[1]]}var e=500,r=[480,250];return t.invert=function(t){return[(t[0]-r[0])/e*360,(t[1]-r[1])/e*-360]},t.scale=function(r){return arguments.length?(e=+r,t):e},t.translate=function(e){return arguments.length?(r=[+e[0],+e[1]],t):r},t},d3.geo.mercator=function(){function t(t){var n=t[0]/360,i=-Math.log(Math.tan(Math.PI/4+t[1]*bn/2))/bn/360;return[e*n+r[0],e*Math.max(-.5,Math.min(.5,i))+r[1]]}var e=500,r=[480,250];return t.invert=function(t){return[(t[0]-r[0])/e*360,2*Math.atan(Math.exp((t[1]-r[1])/e*-360*bn))/bn-90]},t.scale=function(r){return arguments.length?(e=+r,t):e},t.translate=function(e){return arguments.length?(r=[+e[0],+e[1]],t):r},t},d3.geo.path=function(){function t(t,e){return"function"==typeof a&&(o=De(a.apply(this,arguments))),u(t)||null}function e(t){return s(t).join(",")}function r(t){for(var e=i(t[0]),r=0,n=t.length;++r<n;)e-=i(t[r]);return e}function n(t){for(var e=d3.geom.polygon(t[0].map(s)),r=e.area(),n=e.centroid(r<0?(r*=-1,1):-1),i=n[0],a=n[1],o=r,u=0,l=t.length;++u<l;)r=(e=d3.geom.polygon(t[u].map(s))).area(),i-=(n=e.centroid(r<0?(r*=-1,1):-1))[0],a-=n[1],o-=r;return[i,a,6*o]}function i(t){return Math.abs(d3.geom.polygon(t.map(s)).area())}var a=4.5,o=De(a),s=d3.geo.albersUsa(),u=Ne({FeatureCollection:function(t){for(var e=[],r=t.features,n=-1,i=r.length;++n<i;)e.push(u(r[n].geometry));return e.join("")},Feature:function(t){return u(t.geometry)},Point:function(t){return"M"+e(t.coordinates)+o},MultiPoint:function(t){for(var r=[],n=t.coordinates,i=-1,a=n.length;++i<a;)r.push("M",e(n[i]),o);return r.join("")},LineString:function(t){for(var r=["M"],n=t.coordinates,i=-1,a=n.length;++i<a;)r.push(e(n[i]),"L");return r.pop(),r.join("")},MultiLineString:function(t){for(var r,n,i,a=[],o=t.coordinates,s=-1,u=o.length;++s<u;){for(n=-1,i=(r=o[s]).length,a.push("M");++n<i;)a.push(e(r[n]),"L");a.pop()}return a.join("")},Polygon:function(t){for(var r,n,i,a=[],o=t.coordinates,s=-1,u=o.length;++s<u;)if(n=-1,(i=(r=o[s]).length-1)>0){for(a.push("M");++n<i;)a.push(e(r[n]),"L");a[a.length-1]="Z"}return a.join("")},MultiPolygon:function(t){for(var r,n,i,a,o,s,u=[],l=t.coordinates,c=-1,h=l.length;++c<h;)for(n=-1,i=(r=l[c]).length;++n<i;)if(o=-1,(s=(a=r[n]).length-1)>0){for(u.push("M");++o<s;)u.push(e(a[o]),"L");u[u.length-1]="Z"}return u.join("")},GeometryCollection:function(t){for(var e=[],r=t.geometries,n=-1,i=r.length;++n<i;)e.push(u(r[n]));return e.join("")}}),l=t.area=Ne({FeatureCollection:function(t){for(var e=0,r=t.features,n=-1,i=r.length;++n<i;)e+=l(r[n]);return e},Feature:function(t){return l(t.geometry)},Polygon:function(t){return r(t.coordinates)},MultiPolygon:function(t){for(var e=0,n=t.coordinates,i=-1,a=n.length;++i<a;)e+=r(n[i]);return e},GeometryCollection:function(t){for(var e=0,r=t.geometries,n=-1,i=r.length;++n<i;)e+=l(r[n]);return e}},0),c=t.centroid=Ne({Feature:function(t){return c(t.geometry)},Polygon:function(t){var e=n(t.coordinates);return[e[0]/e[2],e[1]/e[2]]},MultiPolygon:function(t){for(var e,r=t.coordinates,i=0,a=0,o=0,s=-1,u=r.length;++s<u;)i+=(e=n(r[s]))[0],a+=e[1],o+=e[2];return[i/o,a/o]}});return t.projection=function(e){return s=e,t},t.pointRadius=function(e){return"function"==typeof e?a=e:o=De(a=+e),t},t},d3.geo.bounds=function(t){var e=1/0,r=1/0,n=-1/0,i=-1/0;return Te(t,function(t,a){t<e&&(e=t),t>n&&(n=t),a<r&&(r=a),a>i&&(i=a)}),[[e,r],[n,i]]};var wn={Feature:function(t,e){Te(t.geometry,e)},FeatureCollection:function(t,e){for(var r=t.features,n=0,i=r.length;n<i;n++)Te(r[n].geometry,e)},GeometryCollection:function(t,e){for(var r=t.geometries,n=0,i=r.length;n<i;n++)Te(r[n],e)},LineString:Se,MultiLineString:function(t,e){for(var r=t.coordinates,n=0,i=r.length;n<i;n++)for(var a=r[n],o=0,s=a.length;o<s;o++)e.apply(null,a[o])},MultiPoint:Se,MultiPolygon:function(t,e){for(var r=t.coordinates,n=0,i=r.length;n<i;n++)for(var a=r[n][0],o=0,s=a.length;o<s;o++)e.apply(null,a[o])},Point:function(t,e){e.apply(null,t.coordinates)},Polygon:function(t,e){for(var r=t.coordinates[0],n=0,i=r.length;n<i;n++)e.apply(null,r[n])}};d3.geo.circle=function(){function t(){}function r(t){return s.distance(t)<o}function n(t){for(var e,r,n,i,a,u=-1,l=t.length,c=[];++u<l;)(a=s.distance(n=t[u]))<o?(r&&c.push(Fe(r,n)((i-o)/(i-a))),c.push(n),e=r=null):(r=n,!e&&c.length&&(c.push(Fe(c[c.length-1],r)((o-i)/(a-i))),e=r)),i=a;return r&&c.length&&(a=s.distance(n=c[0]),c.push(Fe(r,n)((i-o)/(i-a)))),function(t){for(var e,r,n,i=0,a=t.length,o=a?[t[0]]:t,u=s.source();++i<a;)for(e=0,r=(n=s.source(t[i-1])(t[i]).coordinates).length;++e<r;)o.push(n[e]);return s.source(u),o}(c)}var i=[0,0],a=89.99,o=a*bn,s=d3.geo.greatArc().target(e);t.clip=function(t){return s.source("function"==typeof i?i.apply(this,arguments):i),u(t)};var u=Ne({FeatureCollection:function(t){var r=t.features.map(u).filter(e);return r&&((t=Object.create(t)).features=r,t)},Feature:function(t){var e=u(t.geometry);return e&&((t=Object.create(t)).geometry=e,t)},Point:function(t){return r(t.coordinates)&&t},MultiPoint:function(t){var e=t.coordinates.filter(r);return e.length&&{type:t.type,coordinates:e}},LineString:function(t){var e=n(t.coordinates);return e.length&&((t=Object.create(t)).coordinates=e,t)},MultiLineString:function(t){var e=t.coordinates.map(n).filter(function(t){return t.length});return e.length&&((t=Object.create(t)).coordinates=e,t)},Polygon:function(t){var e=t.coordinates.map(n);return e[0].length&&((t=Object.create(t)).coordinates=e,t)},MultiPolygon:function(t){var e=t.coordinates.map(function(t){return t.map(n)}).filter(function(t){return t[0].length});return e.length&&((t=Object.create(t)).coordinates=e,t)},GeometryCollection:function(t){var r=t.geometries.map(u).filter(e);return r.length&&((t=Object.create(t)).geometries=r,t)}});return t.origin=function(e){return arguments.length?(i=e,t):i},t.angle=function(e){return arguments.length?(o=(a=+e)*bn,t):a},t.precision=function(e){return arguments.length?(s.precision(e),t):s.precision()},t},d3.geo.greatArc=function(){function t(){for(var t="function"==typeof e?e.apply(this,arguments):e,i="function"==typeof r?r.apply(this,arguments):r,a=Fe(t,i),o=n/a.d,s=0,u=[t];(s+=o)<1;)u.push(a(s));return u.push(i),{type:"LineString",coordinates:u}}var e=Ee,r=Pe,n=6*bn;return t.distance=function(){return Fe("function"==typeof e?e.apply(this,arguments):e,"function"==typeof r?r.apply(this,arguments):r).d},t.source=function(r){return arguments.length?(e=r,t):e},t.target=function(e){return arguments.length?(r=e,t):r},t.precision=function(e){return arguments.length?(n=e*bn,t):n/bn},t},d3.geo.greatCircle=d3.geo.circle,d3.geom={},d3.geom.contour=function(t,e){var r=e||function(t){for(var e=0,r=0;;){if(t(e,r))return[e,r];0===e?(e=r+1,r=0):(e-=1,r+=1)}}(t),n=[],i=r[0],a=r[1],o=0,s=0,u=NaN,l=NaN,c=0;do{c=0,t(i-1,a-1)&&(c+=1),t(i,a-1)&&(c+=2),t(i-1,a)&&(c+=4),t(i,a)&&(c+=8),6===c?(o=-1===l?-1:1,s=0):9===c?(o=0,s=1===u?-1:1):(o=xn[c],s=_n[c]),o!=u&&s!=l&&(n.push([i,a]),u=o,l=s),i+=o,a+=s}while(r[0]!=i||r[1]!=a);return n};var xn=[1,0,1,1,-1,0,-1,1,0,0,0,0,-1,0,-1,NaN],_n=[0,-1,0,0,0,-1,0,0,1,-1,1,1,0,-1,0,NaN];d3.geom.hull=function(t){if(t.length<3)return[];var e,r,n,i,a,o,s,u,l,c,h=t.length,f=h-1,p=[],d=[],g=0;for(e=1;e<h;++e)t[e][1]<t[g][1]?g=e:t[e][1]==t[g][1]&&(g=t[e][0]<t[g][0]?e:g);for(e=0;e<h;++e)e!==g&&(i=t[e][1]-t[g][1],n=t[e][0]-t[g][0],p.push({angle:Math.atan2(i,n),index:e}));for(p.sort(function(t,e){return t.angle-e.angle}),l=p[0].angle,u=p[0].index,s=0,e=1;e<f;++e)r=p[e].index,l==p[e].angle?(n=t[u][0]-t[g][0])*n+(i=t[u][1]-t[g][1])*i>=(a=t[r][0]-t[g][0])*a+(o=t[r][1]-t[g][1])*o?p[e].index=-1:(p[s].index=-1,l=p[e].angle,s=e,u=r):(l=p[e].angle,s=e,u=r);for(d.push(g),e=0,r=0;e<2;++r)-1!==p[r].index&&(d.push(p[r].index),e++);for(c=d.length;r<f;++r)if(-1!==p[r].index){for(;!ke(d[c-2],d[c-1],p[r].index,t);)--c;d[c++]=p[r].index}var m=[];for(e=0;e<c;++e)m.push(t[d[e]]);return m},d3.geom.polygon=function(t){return t.area=function(){for(var e=0,r=t.length,n=t[r-1][0]*t[0][1],i=t[r-1][1]*t[0][0];++e<r;)n+=t[e-1][0]*t[e][1],i+=t[e-1][1]*t[e][0];return.5*(i-n)},t.centroid=function(e){var r,n,i=-1,a=t.length,o=0,s=0,u=t[a-1];for(arguments.length||(e=-1/(6*t.area()));++i<a;)o+=((r=u)[0]+(u=t[i])[0])*(n=r[0]*u[1]-u[0]*r[1]),s+=(r[1]+u[1])*n;return[o*e,s*e]},t.clip=function(e){for(var r,n,i,a,o,s,u=-1,l=t.length,c=t[l-1];++u<l;){for(r=e.slice(),e.length=0,a=t[u],o=r[(i=r.length)-1],n=-1;++n<i;)qe(s=r[n],c,a)?(qe(o,c,a)||e.push(ze(o,s,c,a)),e.push(s)):qe(o,c,a)&&e.push(ze(o,s,c,a)),o=s;c=a}return e},t},d3.geom.voronoi=function(t){var e=t.map(function(){return[]});return Xe(t,function(t){var r,n,i,a,o,s;1===t.a&&t.b>=0?(r=t.ep.r,n=t.ep.l):(r=t.ep.l,n=t.ep.r),1===t.a?(i=t.c-t.b*(o=r?r.y:-1e6),a=t.c-t.b*(s=n?n.y:1e6)):(o=t.c-t.a*(i=r?r.x:-1e6),s=t.c-t.a*(a=n?n.x:1e6));var u=[i,o],l=[a,s];e[t.region.l.index].push(u,l),e[t.region.r.index].push(u,l)}),e.map(function(e,r){var n=t[r][0],i=t[r][1];return e.forEach(function(t){t.angle=Math.atan2(t[0]-n,t[1]-i)}),e.sort(function(t,e){return t.angle-e.angle}).filter(function(t,r){return!r||t.angle-e[r-1].angle>1e-10})})};var jn={l:"r",r:"l"};d3.geom.delaunay=function(t){var e=t.map(function(){return[]}),r=[];return Xe(t,function(r){e[r.region.l.index].push(t[r.region.r.index])}),e.forEach(function(e,n){var i=t[n],a=i[0],o=i[1];e.forEach(function(t){t.angle=Math.atan2(t[0]-a,t[1]-o)}),e.sort(function(t,e){return t.angle-e.angle});for(var s=0,u=e.length-1;s<u;s++)r.push([i,e[s],e[s+1]])}),r},d3.geom.quadtree=function(t,e,r,n,i){function a(t,e,r,n,i,a){if(!isNaN(e.x)&&!isNaN(e.y))if(t.leaf){var s=t.point;s?Math.abs(s.x-e.x)+Math.abs(s.y-e.y)<.01?o(t,e,r,n,i,a):(t.point=null,o(t,s,r,n,i,a),o(t,e,r,n,i,a)):t.point=e}else o(t,e,r,n,i,a)}function o(t,e,r,n,i,o){var s=.5*(r+i),u=.5*(n+o),l=e.x>=s,c=e.y>=u,h=(c<<1)+l;t.leaf=!1,t=t.nodes[h]||(t.nodes[h]={leaf:!0,nodes:[],point:null,add:function(t){a(f,t,e,r,n,i)},visit:function(t){!function t(e,r,n,i,a,o){if(!e(r,n,i,a,o)){var s=.5*(n+a),u=.5*(i+o),l=r.nodes;l[0]&&t(e,l[0],n,i,s,u),l[1]&&t(e,l[1],s,i,a,u),l[2]&&t(e,l[2],n,u,s,o),l[3]&&t(e,l[3],s,u,a,o)}}(t,f,e,r,n,i)}}),l?r=s:i=s,c?n=u:o=u,a(t,e,r,n,i,o)}var s,u=-1,l=t.length;if(l&&isNaN(t[0].x)&&(t=t.map(He)),arguments.length<5)if(3===arguments.length)i=n=r,r=e;else{for(e=r=1/0,n=i=-1/0;++u<l;)(s=t[u]).x<e&&(e=s.x),s.y<r&&(r=s.y),s.x>n&&(n=s.x),s.y>i&&(i=s.y);var c=n-e,h=i-r;c>h?i=r+c:n=e+h}var f={leaf:!0,nodes:[],point:null,add:function(t){a(f,t,e,r,n,i)},visit:function(t){!function t(e,r,n,i,a,o){if(!e(r,n,i,a,o)){var s=.5*(n+a),u=.5*(i+o),l=r.nodes;l[0]&&t(e,l[0],n,i,s,u),l[1]&&t(e,l[1],s,i,a,u),l[2]&&t(e,l[2],n,u,s,o),l[3]&&t(e,l[3],s,u,a,o)}}(t,f,e,r,n,i)}};return t.forEach(f.add),f},d3.time={};var On=Date;$e.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Ln.setUTCDate.apply(this._,arguments)},setDay:function(){Ln.setUTCDay.apply(this._,arguments)},setFullYear:function(){Ln.setUTCFullYear.apply(this._,arguments)},setHours:function(){Ln.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Ln.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Ln.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Ln.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Ln.setUTCSeconds.apply(this._,arguments)},setTime:function(){Ln.setTime.apply(this._,arguments)}};var Ln=Date.prototype;d3.time.format=function(t){function e(e){for(var n,i,a=[],o=-1,s=0;++o<r;)37==t.charCodeAt(o)&&(a.push(t.substring(s,o),(i=Un[n=t.charAt(++o)])?i(e):n),s=o+1);return a.push(t.substring(s,o)),a.join("")}var r=t.length;return e.parse=function(e){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0};if(Qe(r,t,e,0)!=e.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var n=new On;return n.setFullYear(r.y,r.m,r.d),n.setHours(r.H,r.M,r.S,r.L),n},e.toString=function(){return t},e};var Rn=d3.format("02d"),Mn=d3.format("03d"),In=d3.format("04d"),An=d3.format("2d"),Un={a:function(t){return Dn[t.getDay()].substring(0,3)},A:function(t){return Dn[t.getDay()]},b:function(t){return Pn[t.getMonth()].substring(0,3)},B:function(t){return Pn[t.getMonth()]},c:d3.time.format("%a %b %e %H:%M:%S %Y"),d:function(t){return Rn(t.getDate())},e:function(t){return An(t.getDate())},H:function(t){return Rn(t.getHours())},I:function(t){return Rn(t.getHours()%12||12)},j:function(t){return Mn(1+d3.time.dayOfYear(t))},L:function(t){return Mn(t.getMilliseconds())},m:function(t){return Rn(t.getMonth()+1)},M:function(t){return Rn(t.getMinutes())},p:function(t){return t.getHours()>=12?"PM":"AM"},S:function(t){return Rn(t.getSeconds())},U:function(t){return Rn(d3.time.sundayOfYear(t))},w:function(t){return t.getDay()},W:function(t){return Rn(d3.time.mondayOfYear(t))},x:d3.time.format("%m/%d/%y"),X:d3.time.format("%H:%M:%S"),y:function(t){return Rn(t.getFullYear()%100)},Y:function(t){return In(t.getFullYear()%1e4)},Z:function(t){var e=t.getTimezoneOffset(),r=e>0?"-":"+",n=~~(Math.abs(e)/60),i=Math.abs(e)%60;return r+Rn(n)+Rn(i)},"%":function(t){return"%"}},Cn={a:function(t,e,r){return Wn.test(e.substring(r,r+=3))?r:-1},A:function(t,e,r){Nn.lastIndex=0;var n=Nn.exec(e.substring(r,r+10));return n?r+=n[0].length:-1},b:function(t,e,r){var n=Tn.get(e.substring(r,r+=3).toLowerCase());return null==n?-1:(t.m=n,r)},B:function(t,e,r){Sn.lastIndex=0;var n=Sn.exec(e.substring(r,r+12));return n?(t.m=En.get(n[0].toLowerCase()),r+=n[0].length):-1},c:function(t,e,r){return Qe(t,Un.c.toString(),e,r)},d:Ve,e:Ve,H:Be,I:Be,L:function(t,e,r){Fn.lastIndex=0;var n=Fn.exec(e.substring(r,r+3));return n?(t.L=+n[0],r+=n[0].length):-1},m:function(t,e,r){Fn.lastIndex=0;var n=Fn.exec(e.substring(r,r+2));return n?(t.m=n[0]-1,r+=n[0].length):-1},M:function(t,e,r){Fn.lastIndex=0;var n=Fn.exec(e.substring(r,r+2));return n?(t.M=+n[0],r+=n[0].length):-1},p:function(t,e,r){var n=kn.get(e.substring(r,r+=2).toLowerCase());return null==n?-1:(t.p=n,r)},S:function(t,e,r){Fn.lastIndex=0;var n=Fn.exec(e.substring(r,r+2));return n?(t.S=+n[0],r+=n[0].length):-1},x:function(t,e,r){return Qe(t,Un.x.toString(),e,r)},X:function(t,e,r){return Qe(t,Un.X.toString(),e,r)},y:function(t,e,r){Fn.lastIndex=0;var n=Fn.exec(e.substring(r,r+2));return n?(t.y=1e3*~~((new Date).getFullYear()/1e3)+ +n[0],r+=n[0].length):-1},Y:function(t,e,r){Fn.lastIndex=0;var n=Fn.exec(e.substring(r,r+4));return n?(t.y=+n[0],r+=n[0].length):-1}},Wn=/^(?:sun|mon|tue|wed|thu|fri|sat)/i,Nn=/^(?:Sunday|Monday|Tuesday|Wednesday|Thursday|Friday|Saturday)/i,Dn=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Tn=d3.map({jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11}),Sn=/^(?:January|February|March|April|May|June|July|August|September|October|November|December)/gi,En=d3.map({january:0,february:1,march:2,april:3,may:4,june:5,july:6,august:7,september:8,october:9,november:10,december:11}),Pn=["January","February","March","April","May","June","July","August","September","October","November","December"],Fn=/\s*\d+/,kn=d3.map({am:0,pm:1});d3.time.format.utc=function(t){function e(t){try{var e=new(On=$e);return e._=t,r(e)}finally{On=Date}}var r=d3.time.format(t);return e.parse=function(t){try{On=$e;var e=r.parse(t);return e&&e._}finally{On=Date}},e.toString=r.toString,e};var qn=d3.time.format.utc("%Y-%m-%dT%H:%M:%S.%LZ");d3.time.format.iso=Date.prototype.toISOString?Ye:qn,Ye.parse=function(t){return new Date(t)},Ye.toString=qn.toString,d3.time.second=Ze(function(t){return new On(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),d3.time.seconds=d3.time.second.range,d3.time.seconds.utc=d3.time.second.utc.range,d3.time.minute=Ze(function(t){return new On(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),d3.time.minutes=d3.time.minute.range,d3.time.minutes.utc=d3.time.minute.utc.range,d3.time.hour=Ze(function(t){var e=t.getTimezoneOffset()/60;return new On(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),d3.time.hours=d3.time.hour.range,d3.time.hours.utc=d3.time.hour.utc.range,d3.time.day=Ze(function(t){return new On(t.getFullYear(),t.getMonth(),t.getDate())},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),d3.time.days=d3.time.day.range,d3.time.days.utc=d3.time.day.utc.range,d3.time.dayOfYear=function(t){var e=d3.time.year(t);return Math.floor((t-e)/864e5-(t.getTimezoneOffset()-e.getTimezoneOffset())/1440)},Dn.forEach(function(t,e){t=t.toLowerCase(),e=7-e;var r=d3.time[t]=Ze(function(t){return(t=d3.time.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var r=d3.time.year(t).getDay();return Math.floor((d3.time.dayOfYear(t)+(r+e)%7)/7)-(r!==e)});d3.time[t+"s"]=r.range,d3.time[t+"s"].utc=r.utc.range,d3.time[t+"OfYear"]=function(t){var r=d3.time.year(t).getDay();return Math.floor((d3.time.dayOfYear(t)+(r+e)%7)/7)}}),d3.time.week=d3.time.sunday,d3.time.weeks=d3.time.sunday.range,d3.time.weeks.utc=d3.time.sunday.utc.range,d3.time.weekOfYear=d3.time.sundayOfYear,d3.time.month=Ze(function(t){return new On(t.getFullYear(),t.getMonth(),1)},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),d3.time.months=d3.time.month.range,d3.time.months.utc=d3.time.month.utc.range,d3.time.year=Ze(function(t){return new On(t.getFullYear(),0,1)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),d3.time.years=d3.time.year.range,d3.time.years.utc=d3.time.year.utc.range;var zn=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Xn=[[d3.time.second,1],[d3.time.second,5],[d3.time.second,15],[d3.time.second,30],[d3.time.minute,1],[d3.time.minute,5],[d3.time.minute,15],[d3.time.minute,30],[d3.time.hour,1],[d3.time.hour,3],[d3.time.hour,6],[d3.time.hour,12],[d3.time.day,1],[d3.time.day,2],[d3.time.week,1],[d3.time.month,1],[d3.time.month,3],[d3.time.year,1]],Hn=[[d3.time.format("%Y"),function(t){return!0}],[d3.time.format("%B"),function(t){return t.getMonth()}],[d3.time.format("%b %d"),function(t){return 1!=t.getDate()}],[d3.time.format("%a %d"),function(t){return t.getDay()&&1!=t.getDate()}],[d3.time.format("%I %p"),function(t){return t.getHours()}],[d3.time.format("%I:%M"),function(t){return t.getMinutes()}],[d3.time.format(":%S"),function(t){return t.getSeconds()}],[d3.time.format(".%L"),function(t){return t.getMilliseconds()}]],$n=d3.scale.linear(),Qn=er(Hn);Xn.year=function(t,e){return $n.domain(t.map(nr)).ticks(e).map(rr)},d3.time.scale=function(){return Ke(d3.scale.linear(),Xn,Qn)};var Vn=Xn.map(function(t){return[t[0].utc,t[1]]}),Bn=er([[d3.time.format.utc("%Y"),function(t){return!0}],[d3.time.format.utc("%B"),function(t){return t.getUTCMonth()}],[d3.time.format.utc("%b %d"),function(t){return 1!=t.getUTCDate()}],[d3.time.format.utc("%a %d"),function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],[d3.time.format.utc("%I %p"),function(t){return t.getUTCHours()}],[d3.time.format.utc("%I:%M"),function(t){return t.getUTCMinutes()}],[d3.time.format.utc(":%S"),function(t){return t.getUTCSeconds()}],[d3.time.format.utc(".%L"),function(t){return t.getUTCMilliseconds()}]]);Vn.year=function(t,e){return $n.domain(t.map(ar)).ticks(e).map(ir)},d3.time.scale.utc=function(){return Ke(d3.scale.linear(),Vn,Bn)}}(),jOWL=window.jOWL=function(t,e){return jOWL.getResource(t,e)},jOWL.version="1.0";try{console.log("...")}catch(t){console=window.console={log:function(){}}}!function($){jOWL.NS=function(t,e){if(!arguments.length)return"xmlns:"+jOWL.NS.owl.prefix+"='"+jOWL.NS.owl()+"' xmlns:"+jOWL.NS.rdf.prefix+"='"+jOWL.NS.rdf()+"' xmlns:"+jOWL.NS.rdfs.prefix+"='"+jOWL.NS.rdfs()+"' xmlns:"+jOWL.NS.xsd.prefix+" ='"+jOWL.NS.xsd()+"'";if(1!=arguments.length)jOWL.NS[t]=function(t){return t?"base"==arguments.callee.prefix?t:arguments.callee.prefix+":"+t:arguments.callee.URI},jOWL.NS[t].prefix=t,jOWL.NS[t].URI=e;else{for(var r=t.get(0).attributes,n=0;n<r.length;n++){var i=r[n].nodeName.split(":");2==i.length&&(r[n].nodeValue==jOWL.NS.owl.URI?jOWL.NS.owl.prefix=i[1]:r[n].nodeValue==jOWL.NS.rdf.URI?jOWL.NS.rdf.prefix=i[1]:r[n].nodeValue==jOWL.NS.rdfs.URI?jOWL.NS.rdfs.prefix=i[1]:r[n].nodeValue==jOWL.NS.xsd.URI?jOWL.NS.xsd.prefix=i[1]:jOWL.NS(i[1],r[n].nodeValue))}jOWL.namespace=t.xmlAttr("xml:base")||t.xmlAttr("xmlns")}};var __=jOWL.NS;__("owl","http://www.w3.org/2002/07/owl#"),__("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#"),__("rdfs","http://www.w3.org/2000/01/rdf-schema#"),__("xsd","http://www.w3.org/2001/XMLSchema#"),$.fn.extend({xmlAttr:function(t){var e=this[0].attributes;if(e)for(var r=0;r<e.length;r++)if(e[r].nodeName==t)return e[r].nodeValue},RDF_ID:function(t){var e=this.xmlAttr(__.rdf("ID"));return!!e&&(e=jOWL.resolveURI(e),t?e.toLowerCase()==jOWL.resolveURI(t.toString()).toLowerCase():e)},RDF_Resource:function(t){if(!this.length)return!1;var e=this.xmlAttr(__.rdf("resource"));if(!e){var r=this.get(0);switch(r.nodeName){case __.rdfs("subClassOf"):case __.owl("disjointWith"):case __.owl("allValuesFrom"):case __.owl("someValuesFrom"):e=function(t){var e=jOWL.Xpath(__.owl("Class"),t);return 1==e.length&&new jOWL.Ontology.Class(e).URI}(r);break;case __.owl("onProperty"):var n=jOWL.Xpath(__.owl("ObjectProperty"),r);0===n.length&&(n=jOWL.Xpath(__.owl("DatatypeProperty"),r)),0===n.length&&(n=jOWL.Xpath(__.owl("FunctionalProperty"),r)),e=n.xmlAttr(__.rdf("about"));break;default:return!1}}return!!e&&(e=jOWL.resolveURI(e),t?e.toLowerCase()==jOWL.resolveURI(t.toString()).toLowerCase():e)},RDF_About:function(t){var e=this.xmlAttr(__.rdf("about"));return!!e&&(e=jOWL.resolveURI(e),t?e.toLowerCase()==jOWL.resolveURI(t.toString()).toLowerCase():e)}}),document.implementation.hasFeature("XPath","3.0")&&(XMLDocument.prototype.selectNodes=function(t,e){e||(e=this);for(var r=this.createNSResolver(this.documentElement),n=this.evaluate(t,e,r,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),i=[],a=0;a<n.snapshotLength;a++)i[a]=n.snapshotItem(a);return i},Element.prototype.selectNodes=function(t){if(this.ownerDocument.selectNodes)return this.ownerDocument.selectNodes(t,this);throw"For XML Elements Only"},XMLDocument.prototype.selectSingleNode=function(t,e){e||(e=this);var r=this.selectNodes(t,e);return r.length>0?r[0]:null},Element.prototype.selectSingleNode=function(t){if(this.ownerDocument.selectSingleNode)return this.ownerDocument.selectSingleNode(t,this);throw"For XML Elements Only"}),jOWL.Xpath=function(t,e){var r=null;e&&(r=e.each?e.get(0):e);var n=r?r.selectNodes(t):jOWL.document.selectNodes(t);return $($.browser.msie?$.makeArray(n):n)},jOWL.Xpath.classes=function(t){var e=[];return jOWL.Xpath(__.rdfs("subClassOf"),t).each(function(){var t=$(this).RDF_Resource();t&&e.push(t)}),jOWL.Xpath(__.owl("intersectionOf")+"/"+__.owl("Class"),t).each(function(){var t=$(this).RDF_About();t&&e.push(t)}),e},jOWL.priv={Array:{isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},pushUnique:function(t,e){return-1===jOWL.priv.Array.getIndex(t,e)&&(t.push(e),!0)},getIndex:function(t,e){for(var r=0;r<t.length;r++)if(e==t[r])return r;return-1},unique:function(t){for(var e=[],r="",n=0;n<t.length;n++){var i=t[n];i!=r&&(e[e.length]=i),r=i}return e}}},jOWL.Literal=function(t){this.name=t},jOWL.Ontology=function(){return this instanceof arguments.callee?(this.parse(jOWL.Xpath("/"+__.rdf("RDF")+"/"+__.owl("Ontology"))),this):new jOWL.Ontology},jOWL.Ontology.Thing=function(t){this.parse(t)},jOWL.Ontology.Thing.prototype={jOWL:jOWL.version,equals:function(t){return("string"==typeof t?jOWL.resolveURI(t):t.URI)===this.URI},parse:function(t){var e;t.length&&("string"==typeof t?(e=t,t=$()):(e=t.RDF_ID()||t.RDF_About())||(e="anonymousOntologyObject",this.isAnonymous=!0),e=jOWL.resolveURI(e),this.isExternal=jOWL.isExternal(e),this.isExternal?(this.baseURI=this.isExternal[0],this.name=this.isExternal[1],this.URI=this.baseURI+this.name):(this.baseURI=jOWL.namespace,this.name=e,this.URI=this.name),this.jnode=t,this.type=t.get(0).nodeName)},annotations:function(t){return jOWL.Xpath(t,this.jnode)},description:function(){return $.map(this.annotations(__.rdfs("comment")),function(t){return $(t).text()})},terms:function(){var t=[],e=this;return jOWL.options.dictionary.addID&&"anonymousOntologyObject"!=this.name&&t.push([this.name.beautify(),this.URI,jOWL.options.defaultlocale,this.type]),this.annotations(__.rdfs("label")).each(function(){for(var r=$(this),n=r.xmlAttr("xml:lang")||jOWL.options.defaultlocale,i=r.text(),a=!1,o=0;o<t.length;o++)t[o][0].toUpperCase()==i.toUpperCase()&&t[o][2]==n&&(a=!0);a||t.push([r.text(),e.URI,n,e.type])}),t},label:function(){var t=!1;return this.annotations(__.rdfs("label")).each(function(){var e=$(this);return jOWL.options.locale?(e.xmlAttr("xml:lang")||jOWL.options.defaultlocale)==jOWL.options.locale?(t=e.text(),!1):void 0:(t=e.text(),!1)}),t||("anonymousOntologyObject"==this.name?jOWL.Manchester(this)||"anonymous Object":jOWL.options.niceClassLabels&&(this.isClass||this.isThing)?this.name.beautify():this.name)},bind:function(t){return t.text(this.label()).attr("typeof",this.type).attr("title",this.URI)}},jOWL.Ontology.prototype=jOWL.Ontology.Thing.prototype,jOWL.priv.testObjectTarget=function(t,e){if(t.isArray){for(var r=0;r<t.length;r++)if(jOWL.priv.testObjectTarget(t.get(r),e))return!0;return!1}if(t.isClass){var n=t.individuals();for(r=0;r<n.length;r++)if(n.get(r).URI==e)return!0}else if(t.URI==e)return!0;return!1},jOWL.Ontology.Individual=function(t,e){if(this.parse(t),this.type==__.owl("Thing")){var r=jOWL.Xpath(__.rdf("type"),this.jnode);if(!r.length)throw"unable to find a Class for the Individual "+this.name;this.Class=$(r[0]).RDF_Resource()}else this.Class=jOWL.resolveURI(t.get(0));this.type=__.owl("Thing"),e&&this.owlClass(e)},jOWL.Ontology.Individual.prototype=$.extend({},jOWL.Ontology.Thing.prototype,{isThing:!0,owlClass:function(t){if(!t){var e=jOWL.data(this.name,"class");return e||(e=jOWL(this.Class))&&this.owlClass(e),e}jOWL.data(this.name,"class",t)},sourceof:function(t,e,r){r=$.extend({inherited:!0,transitive:!0,ignoreGenerics:!1,ignoreClasses:!0,valuesOnly:!0},r);var n=new jOWL.Ontology.Array;return this.jnode.children().filter(function(){return this.prefix!=__.rdfs.prefix&&this.prefix!=__.rdf.prefix&&this.prefix!=__.owl.prefix}).each(function(){var i=new jOWL.Ontology.Restriction($(this)),a=!t,o=!e;if(a||(a=t.isArray?t.contains(i.property):t.URI==i.property.URI)){if(e)i.property.isObjectProperty?!(o=jOWL.priv.testObjectTarget(e,i.target))&&r.transitive&&i.property.isTransitive&&i.getTarget().sourceof(i.property,e,r).length>0&&(o=!0):o=i.property.isDatatypeProperty?i.property.assert(i.target,e):e==i.target;else if(r.transitive&&i.property.isTransitive&&!r.ignoreGenerics){var s=i.getTarget().sourceof(i.property,null,r);n.concat(s)}a&&o&&n.pushUnique(i)}}),r.inherited&&this.owlClass().sourceof(t,e,r).each(function(){if(!(r.valuesOnly&&null===this.target||this.getTarget().isClass&&r.ignoreClasses)){for(var t=!1,e=0;e<n.length;e++){var i=n.get(e);i.property.URI==this.property.URI&&(t=!0,r.ignoreGenerics||this.target!=i.target&&n.pushUnique(this))}t||n.pushUnique(this)}}),n},localRestrictions:function(t,e){return this.sourceof(t,e,{inherited:!1,transitive:!1})},valueRestrictions:function(t){return this.sourceof(null,null,{ignoreGenerics:!t,valuesOnly:!0})}}),jOWL.Ontology.Restriction=function(t){var e,r,n,i;if(this.cachedTarget=null,t.get(0).nodeName!=__.owl("Restriction"))this.property=jOWL(jOWL.resolveURI(t.get(0)),{type:"property"}),this.target=t.RDF_Resource()||t.text(),i="Individual";else{if(!(r=(e=jOWL.Xpath(__.owl("onProperty"),t)).RDF_Resource()))throw"no property found for the given owl:restriction";i=(n=e.siblings()).get(0).nodeName,this.property=jOWL(r,{type:"property"}),this.target=null}if(this.restriction={minCard:!1,maxCard:!1,some:[],all:[],value:!1},this.type=t.get(0).nodeName,this.isAnonymous=!0,this.isValueRestriction=i==__.owl("someValuesFrom")||i==__.owl("allValuesFrom")||i==__.owl("hasValue"),this.isCardinalityRestriction=i==__.owl("cardinality")||i==__.owl("maxCardinality")||i==__.owl("minCardinality"),!this.property||!i)throw"badly formed owl:restriction";switch(i){case __.owl("cardinality"):this.restriction.minCard=this.restriction.maxCard=parseInt(n.text(),10);break;case __.owl("maxCardinality"):this.restriction.maxCard=parseInt(n.text(),10);break;case __.owl("minCardinality"):this.restriction.minCard=parseInt(n.text(),10);break;case __.owl("hasValue"):var a=n.RDF_Resource();a&&(this.target=a)}if(this.property.isObjectProperty)if(this.isCardinalityRestriction&&this.property.range)this.target=this.property.range;else if(this.isValueRestriction){var o=n.RDF_Resource();"anonymousOntologyObject"==o&&(this.cachedTarget=new jOWL.Ontology.Class(jOWL.Xpath(__.owl("Class"),n))),this.target=o}return this.name=this.property.name+"#"+(this.target||this.restrtype),this},jOWL.Ontology.Restriction.prototype={jOWL:jOWL.version,isRestriction:!0,bind:function(){return null},merge:function(t){if(this.isCardinalityRestriction&&t.isValueRestriction)return this.target=t.target,!0;if(this.isValueRestriction&&t.isCardinalityRestriction)switch(t.restrtype){case __.owl("cardinality"):return this.restriction.minCard=this.restriction.maxCard=t.restriction.minCard,!0;case __.owl("minCardinality"):return this.restriction.minCard=t.restriction.minCard,!0;case __.owl("maxCardinality"):return this.restriction.maxCard=t.restriction.maxCard,!0}return!1},getTarget:function(){return this.target?this.cachedTarget?this.cachedTarget:(this.cachedTarget=this.property.isObjectProperty?jOWL(this.target):new jOWL.Literal(this.target),this.cachedTarget):jOWL("Thing")},equals:function(t){if(!t.isRestriction)return!1;if(this.property.URI==t.property.URI){if("anonymousOntologyObject"==this.target)return!1;if(this.target&&this.target===t.target)return!0}return!1}},jOWL.priv.Dt=function(t){this.settings=$.extend({base:null,pattern:null,assert:function(t){return!0},match:function(t,e){return!0}},t),this.base=jOWL.Ontology.Datatype[this.settings.base]},jOWL.priv.Dt.prototype={sanitize:function(t){return this.settings.sanitize?this.settings.sanitize(t):this.base&&this.base.sanitize?this.base.sanitize(t):void 0},assert:function(t){var e=this.sanitize(t);return void 0!==e&&(t=e),!(this.base&&!this.base.assert(t))&&!(this.settings.pattern&&!this.settings.pattern.test(t))&&this.settings.assert(t)},match:function(t,e){var r=this.sanitize(e);return void 0!==r&&(e=r),!!this.assert(e)&&!(this.base&&!this.base.match(t,e))&&this.settings.match(t,e)}},jOWL.Ontology.Datatype=function(t,e){jOWL.Ontology.Datatype[t]=new jOWL.priv.Dt(e)},jOWL.Ontology.Datatype(__.xsd()+"integer",{sanitize:function(t){return parseInt(t,10)},assert:function(t){return Math.round(t)==t},match:function(a,b){var check=parseInt(a,10);if(!isNaN(check))return check==b;for(var arr=a.split("&&"),i=0;i<arr.length;i++)arr[i]=b+arr[i];try{return eval(arr.join(" && "))}catch(t){return!1}}}),jOWL.Ontology.Datatype(__.xsd()+"positiveInteger",{base:__.xsd()+"integer",assert:function(t){return t>0}}),jOWL.Ontology.Datatype(__.xsd()+"decimal",{base:__.xsd()+"integer"}),jOWL.Ontology.Datatype(__.xsd()+"float",{base:__.xsd()+"integer"}),jOWL.Ontology.Datatype(__.xsd()+"double",{base:__.xsd()+"integer"}),jOWL.Ontology.Datatype(__.xsd()+"negativeInteger",{base:__.xsd()+"integer",assert:function(t){return t<0}}),jOWL.Ontology.Datatype(__.xsd()+"nonNegativeInteger",{base:__.xsd()+"integer",assert:function(t){return t>=0}}),jOWL.Ontology.Datatype(__.xsd()+"nonPositiveInteger",{base:__.xsd()+"integer",assert:function(t){return t<=0}}),jOWL.Ontology.Datatype(__.xsd()+"string");var URIPattern=/^([a-z0-9+.\-]+):(?:\/\/(?:((?:[a-z0-9-._~!$&'()*+,;=:]|%[0-9A-F]{2})*)@)?((?:[a-z0-9-._~!$&'()*+,;=]|%[0-9A-F]{2})*)(?::(\d*))?(\/(?:[a-z0-9-._~!$&'()*+,;=:@\/]|%[0-9A-F]{2})*)?|(\/?(?:[a-z0-9-._~!$&'()*+,;=:@]|%[0-9A-F]{2})+(?:[a-z0-9-._~!$&'()*+,;=:@\/]|%[0-9A-F]{2})*)?)(?:\?((?:[a-z0-9-._~!$&'()*+,;=:\/?@]|%[0-9A-F]{2})*))?(?:#((?:[a-z0-9-._~!$&'()*+,;=:\/?@]|%[0-9A-F]{2})*))?$/i;function _Binding(t){this.value={},this.arr=t}function SPARQL_DL_Array(t){if(this.arr=[],this.mappings={},t)for(var e=0;e<t.length;e++)t[e]&&(this.mappings[t[e]]=new jOWL.Ontology.Array)}jOWL.Ontology.Datatype(__.xsd()+"anyURI",{base:__.xsd()+"string",pattern:URIPattern}),jOWL.Ontology.Datatype(__.xsd()+"boolean",{sanitize:function(t){return"boolean"==typeof t?t:"true"==t||"false"!=t&&void 0},assert:function(t){return"boolean"==typeof t},match:function(t,e){return"false"===t&&(t=!1),"true"===t&&(t=!0),t===e}}),jOWL.Ontology.Property=function(t){var e=this.parseProperty(t);if(e)return e},jOWL.Ontology.Property.prototype=$.extend({},jOWL.Ontology.Thing.prototype,{isProperty:!0,parseProperty:function(t){if(!t||"string"==typeof t)return this.domain=this.range=null,void this.parse(t);if(jOWL.options.cacheProperties&&jOWL.indices.IDs){var e=t.RDF_ID()||t.RDF_About(),r=jOWL.index("property").get(e);if(r)return r}this.parse(t),this.domain=$(this.jnode.get(0).selectSingleNode(__.rdfs("domain"))).RDF_Resource(),this.range=$(this.jnode.get(0).selectSingleNode(__.rdfs("range"))).RDF_Resource()}}),jOWL.Ontology.DatatypeProperty=function(t){var e=this.parseProperty(t);if(e)return e;this.type==__.owl("AnnotationProperty")&&(this.range=__.xsd()+"string")},jOWL.Ontology.DatatypeProperty.prototype=$.extend({},jOWL.Ontology.Thing.prototype,jOWL.Ontology.Property.prototype,{isDatatypeProperty:!0,assert:function(t,e){var r=jOWL.Ontology.Datatype[this.range];return r?void 0===e?r.assert(t):r.match(e,t):(console.log(this.range+" datatype reasoning not implemented"),!0)}}),jOWL.Ontology.ObjectProperty=function(t){var e=this.parseProperty(t);if(e)return e;var r=this;jOWL.Xpath(__.rdf("type"),this.jnode).each(function(){$(this).RDF_Resource()==__.owl()+"TransitiveProperty"&&(r.isTransitive=!0)}),this.jnode.get(0).nodeName==__.owl("TransitiveProperty")&&(r.isTransitive=!0)},jOWL.Ontology.ObjectProperty.prototype=$.extend({},jOWL.Ontology.Thing.prototype,jOWL.Ontology.Property.prototype,{isObjectProperty:!0}),jOWL.Ontology.Class=function(t){this.parse(t)},jOWL.Xpath.restrictions=function(t){var e=new jOWL.Ontology.Array;return jOWL.Xpath(__.rdfs("subClassOf")+"/"+__.owl("Restriction"),t).add(jOWL.Xpath(__.owl("intersectionOf")+"/"+__.owl("Restriction"),t)).each(function(){e.push(new jOWL.Ontology.Restriction($(this)))}),e},jOWL.Ontology.Intersection=function(t){var e=this;this.jnode=t,this._arr=[],this.URI=this.jnode.parent().RDF_ID(),this.matches={},jOWL.Xpath(__.owl("Restriction"),t).each(function(){var t=new jOWL.Ontology.Restriction($(this));t.isValueRestriction&&e._arr.push(t)}),jOWL.Xpath(__.owl("Class"),t).each(function(){var t=$(this).RDF_About();t&&e._arr.push(jOWL(t))})},jOWL.Ontology.Intersection.prototype={isIntersection:!0,jOWL:jOWL.version,match:function(t,e,r){if(t==this.URI)return!1;if(void 0!==this.matches[t])return this.matches[t];for(var n=0;n<this._arr.length;n++){var i=this._arr[n],a=!1;if(i.isRestriction){if(r.each(function(){if(this.equals(i))return a=!0,!1}),!a)return this.matches[t]=!1,!1}else if(i.isClass){for(var o=0;o<e.length;o++){if(i.equals(e[o])){a=!0;break}if(jOWL.index("ID")[e[o]])for(var s=jOWL.Xpath.classes(jOWL.index("ID")[e[o]].jnode),u=0;u<s.length;u++)if(i.equals(s[u])){a=!0;break}}if(!a)return this.matches[t]=!1,!1}}return this.matches[t]=!0,this.matches[t]},equals:function(t){if(!t.isIntersection)return!1;for(var e=0;e<this._arr.length;e++){for(var r=!1,n=0;n<t._arr.length;n++)t._arr[n].equals(this._arr[e])&&(r=!0);if(!r)return!1}return!0}},jOWL.Ontology.Class.prototype=$.extend({},jOWL.Ontology.Thing.prototype,{isClass:!0,individuals:function(){var t=new jOWL.Ontology.Array;return new jOWL.SPARQL_DL("Type(?x, "+this.name+")").execute({async:!1,onComplete:function(e){t=e.jOWLArray("?x")}}),t},oneOf:function(){var t=new jOWL.Ontology.Array;return this.jnode.children().filter(function(){return this.tagName==__.owl("oneOf")}).children().each(function(){t.push(jOWL($(this).RDF_About()))}),t},children:function(){var t=this,e=jOWL.data(this.name,"children");if(e)return e;if(e=new jOWL.Ontology.Array,this.oneOf().length)return e;var r=this.URI;for(x in jOWL.index("ID"))if(x!==this.URI){var n=jOWL.index("ID")[x];if(n.isClass){for(var i=jOWL.Xpath.classes(n.jnode),a=0;a<i.length;a++)this.equals(i[a])&&e.push(n);var o=jOWL.Xpath.restrictions(n.jnode),s=jOWL.index("intersection")[r];s&&s.each(function(){this.match(x,i,o)&&e.push(n)})}}return jOWL.index("property").each(function(){this.domain==t.name&&jOWL.Xpath("//"+__.owl("onProperty")+"[@"+__.rdf("resource")+'="#'+this.name+'"]/parent::'+__.owl("Restriction")+"/..").filter(function(){return this.nodeName==__.owl("intersectionOf")||this.nodeName==__.rdfs("subClassOf")}).each(function(){var r=jOWL($(this.selectSingleNode("parent::"+__.owl("Class"))));e.contains(r)||r.name==t.name||void 0===r.name||e.push(r)})}),e.filter(function(){return this.hierarchy(!1),this.parents().contains(r)}),jOWL.data(this.name,"children",e),e},setParents:function(t){return jOWL.data(this.name,"parents",t),t},parents:function(){var t=this,e=jOWL.data(this.name,"parents");if(e)return e;for(var r=[],n=jOWL.Xpath.classes(this.jnode),i=0;i<n.length;i++)jOWL.priv.Array.pushUnique(r,n[i]);var a=jOWL.Xpath.restrictions(this.jnode);a.each(function(){this.property.domain&&this.property.domain!=t.name&&jOWL.priv.Array.pushUnique(r,this.property.domain)});var o=function(){this.match(t.URI,n,a)&&jOWL.priv.Array.pushUnique(r,this.URI)};if(jOWL.options.reason)for(resource in jOWL.index("intersection"))jOWL.index("intersection")[resource].each(o);return(e=new jOWL.Ontology.Array(jOWL.getXML(r),!0)).length?e.length>1&&e.filter(function(){return"Thing"!=this.name}):e.push(jOWL("Thing")),jOWL.data(this.name,"parents",e),e},ancestors:function(){return this.hierarchy(!1).flatindex},hierarchy:function(t){var e=new jOWL.Ontology.Array;return e.flatindex=new jOWL.Ontology.Array,function r(n){var i=n.parents();if(1==i.length&&i.contains(__.owl()+"Thing"))e.pushUnique(n);else{var a=jOWL.options.reason?function t(e,r){var n=!0;return r||(r={},n=!1),e.each&&e.each(function(){r[this.URI]||this.URI!=__.owl()+"Thing"&&(n&&(r[this.URI]=!0),this.parents&&t(this.parents(),r))}),r}(i):{};i.filter(function(){return!a[this.URI]}),i.each(function(){var i=e.flatindex.pushUnique(this);t&&(i.invParents||(i.invParents=new jOWL.Ontology.Array),i.invParents.pushUnique(n)),r(i)}),n.setParents(i)}}(this),e},descendants:function(t){t="number"==typeof t?t:5;var e=jOWL.data(this.name,"descendants");return e&&e.level>=t?e:((e=new jOWL.Ontology.Array).level=t,function r(n,i){if(i<=t){i++;var a=n.children();e.concat(a),a.each(function(t){r(t,i)})}}(this,1),jOWL.data(this.name,"descendants",e),e)},valueRestrictions:function(t,e){return this.sourceof(null,null,{ignoreClasses:!t})},sourceof:function(t,e,r){r=$.extend({inherited:!0,transitive:!0,ignoreGenerics:!0,ignoreClasses:!1,valuesOnly:!0},r);var n=jOWL.data(this.name,"sourceof"),i=this.jnode;n||(n=new jOWL.Ontology.Array,jOWL.Xpath(__.rdfs("subClassOf")+"/"+__.owl("Restriction"),i).add(jOWL.Xpath(__.owl("intersectionOf")+"/"+__.owl("Restriction"),i)).each(function(t,e){var r=new jOWL.Ontology.Restriction($(e)),i=!1;n.each(function(t,e){this.property.name==r.property.name&&(i=t)}),i&&i.merge(r)||n.push(r)}),jOWL.data(this.name,"sourceof",n));var a=new jOWL.Ontology.Array;return n.each(function(){var n=!t,i=!e;if(n||(n=t.isArray?t.contains(this.property):t.URI==this.property.URI),!e&&r.transitive&&this.property.isTransitive){var o=this.getTarget().sourceof(this.property,null,r);a.concat(o)}if(i||this.target||(i=!r.valuesOnly),!i){var s=this.getTarget();if(s.isClass&&r.ignoreClasses)return;!(i=jOWL.priv.testObjectTarget(e,this.target))&&r.transitive&&n&&this.property.isTransitive&&s.isThing&&s.sourceof(t,e).length&&(i=!0)}n&&i&&a.pushUnique(this)}),r.inherited?(this.parents().each(function(){this.sourceof&&this.sourceof(t,e,r).each(function(t){var e=this.getTarget(),n=!1,i=new jOWL.Ontology.Array;a.filter(function(){var a=!0;return this.property.URI==t.property.URI&&(n=!0,r.ignoreGenerics?e.isThing&&(a=this.getTarget().isThing&&t.target!=this.target,i.push(t)):t.target!=this.target&&i.push(t)),a}),n||a.push(t),a.concat(i)})}),a):a}}),jOWL.Ontology.Array=function(t,e){var r=this;this.items=[],t&&(e?$.each(t,function(){var t=this.jOWL?this:jOWL($(this));r.items.push(t)}):this.items=t),this.length=this.items.length},jOWL.Ontology.Array.prototype={jOWL:jOWL.version,isArray:!0,bind:function(t,e){return this.map(function(){var r=t?t.clone(!0):$("<span/>"),n=this.bind(r).append(document.createTextNode(" "));return e&&e.call(n,n,this),n.get(0)})},concat:function(t,e){var r=this;return t.each?t.each(function(){e?r.push(this):r.pushUnique(this)}):(r.items=r.items.concat(t.items),this.length=r.items.length),this},contains:function(t){return!!this.get(t)},each:function(t,e){var r,n,i=this,a=!1;if(e)for(r=this.items.length-1;r>=0&&!a;r--)n=i.eq(r),!1===t.call(n,n,r)&&(a=!0);else for(r=0;r<this.items.length&&!a;r++)!function(){var e=i.eq(r);!1===t.call(e,e,r)&&(a=!0)}();return this},eq:function(t){return t<0||t>this.items.length-1?null:this.items[t]},filter:function(t){var e=this;return this.each(function(r,n){t.call(r,r,n)||e.items.splice(n,1)},!0),this.length=this.items.length,this},getIndex:function(t){var e=-1;if(t.equals)this.each(function(r,n){if(this.equals&&this.equals(t))return e=n,!1});else{if("number"==typeof t)return t;var r="string"==typeof t?t:t.name,n=t.URI||r;this.each(function(t,i){this.URI?this.URI==n&&(e=i):this.name==r&&(e=i)})}return e},get:function(t){return this.eq(this.getIndex(t))},map:function(t){var e=[];return this.each(function(){e.push(t.call(this,this))}),e},push:function(t){return this.items.push(t),this.length=this.items.length,this},pushUnique:function(t){return this.get(t)||this.push(t).get(t)},toString:function(){return this.map(function(){return this.URI}).join(", ")},associative:function(){var t={};return this.each(function(){this.URI&&(t[this.URI]=this)}),t}},jOWL.options={reason:!0,locale:!1,defaultlocale:"en",dictionary:{create:!0,addID:!0},onParseError:function(t){alert("jOWL parseError: "+t)},cacheProperties:!0,niceClassLabels:!0},jOWL.document=null,jOWL.namespace=null,jOWL.indices={P:null,data:{},IDs:null,I:null,T:null,D:null,reset:function(){var t=jOWL.indices;t.data={},t.P=null,t.T=null,t.IDs=null,t.I=null,t.D=null}},jOWL.index=function(t,e){var r=jOWL.indices;switch(t){case"ID":if(null===r.IDs||e){e&&r.reset(),r.IDs={},r.T={};var n=new Date;jOWL.Xpath("//*[@"+__.rdf("ID")+"]").each(function(){var t=jOWL.getResource($(this));t&&(r.IDs[t.URI]=t,t.isThing&&(r.T[t.Class]||(r.T[t.Class]=new jOWL.Ontology.Array),r.T[t.Class].push(t)))}),jOWL.Xpath("/"+__.rdf("RDF")+"/*[@"+__.rdf("about")+"]").each(function(){var t=$(this),e=jOWL.getResource($(this));if(e)return e.isClass||e.isProperty||e.isThing?r.IDs[e.URI]?void t.children().appendTo(r.IDs[e.URI].jnode):(r.IDs[e.URI]=e,void(e.isThing&&(r.T[e.Class]||(r.T[e.Class]=new jOWL.Ontology.Array),r.T[e.Class].push(e)))):void 0}),console.log("Loaded in "+((new Date).getTime()-n.getTime())+"ms")}return r.IDs;case"Thing":return r.T;case"intersection":if(null===r.I||e){var i=new jOWL.Ontology.Array;r.I={},jOWL.Xpath("//"+__.owl("intersectionOf")).each(function(){var t=new jOWL.Ontology.Intersection($(this));if(t.URI){var e=i.get(t);e?console.log("duplicate intersection found between : (Ignoring) "+t.URI+"  and "+e.URI):(r.I[t.URI]||(r.I[t.URI]=new jOWL.Ontology.Array),i.push(t),r.I[t.URI].push(t))}})}return r.I;case"property":if(null===r.P||e){for(x in jOWL.options.cacheProperties=!1,r.P=new jOWL.Ontology.Array,r.IDs){var a=r.IDs[x];a.isProperty&&r.P.push(a)}jOWL.options.cacheProperties=!0}return r.P;case"dictionary":if(null===r.D||e)for(x in r.D=[],r.IDs){var o=r.IDs[x];r.D=r.D.concat(o.terms())}return r.D}},jOWL.data=function(t,e,r){var n=jOWL.indices.data;if(n[t]||(n[t]={}),!r)return n[t][e];n[t][e]=r},jOWL.load=function(t,e,r){var n=this;if($.browser.msie&&0===location.toString().indexOf("file")){var i=document.createElement("xml");i.validateOnParse=!1,i.src=t,i.onreadystatechange=function(){if("interactive"==i.readyState){var t=i.XMLDocument;document.body.removeChild(i),e(n.parse(t,r))}},document.body.appendChild(i)}else $.get(t,function(t){e(n.parse(t,r))})},jOWL.parse=function(t,e){if(jOWL.document=null,this.options=$.extend(jOWL.options,e),"string"==typeof t&&(t=jOWL.fromString(t)),jOWL.document=t,$.browser.msie){if(0!==t.parseError.errorCode)return jOWL.options.onParseError(t.parseError.reason),!1}else if("parsererror"==t.documentElement.nodeName)return jOWL.options.onParseError(t.documentElement.firstChild.nodeValue),!1;var r=$(t.documentElement);return jOWL.NS(r),$.browser.msie&&(jOWL.document.setProperty("SelectionLanguage","XPath"),jOWL.document.setProperty("SelectionNamespaces",__())),this.index("ID",!0),jOWL.options.cacheProperties&&this.index("property",!0),jOWL.options.dictionary.create&&jOWL.index("dictionary"),jOWL.Thing=new jOWL.Ontology.Thing($(jOWL.create(__.owl,"Class").attr(__.rdf,"about",__.owl()+"Thing").node)),jOWL.Thing.type=!1,this},jOWL.toString=function(t){return t?$.browser.msie?t.xml:(new XMLSerializer).serializeToString(t):jOWL.toString(jOWL.document)},jOWL.fromString=function(t){var e;if(document.implementation.createDocument)e=(new DOMParser).parseFromString(t,"text/xml");else if(window.ActiveXObject){var r=new ActiveXObject("Microsoft.XMLDOM");r.async="false",r.validateOnParse=!1,r.loadXML(t),e=r}return e},jOWL.isExternal=function(t){var e=jOWL.resolveURI(t,!0);return e[0]!=jOWL.namespace&&e},jOWL.resolveURI=function(t,e){if("string"!=typeof t){var r=t.jquery?t.get(0):t;return t=r.localName||r.baseName,r.namespaceURI&&(t=r.namespaceURI+t),jOWL.resolveURI(t,e)}var n=t,i=jOWL.namespace;if(0===t.indexOf("http")){var a=t.indexOf("#");a<=0&&(a=t.lastIndexOf("/")),a>0&&(i=t.substring(0,a+1),n=t.substring(a+1))}else if("#"==t.charAt(0))return t.substring(1);return e?[i,n]:i==jOWL.namespace?n:t},jOWL.getResource=function(t,e){if(!jOWL.document)throw"You must successfully load an ontology before you can find anything";if(!t)throw"No resource specified";var r,n=$.extend({},e);if("string"==typeof t){if("Thing"==(t=jOWL.resolveURI(t))||t==__.owl()+"Thing")return jOWL.Thing;if("property"==n.type&&jOWL.options.cacheProperties){var i=jOWL.index("property").get(t);if(i)return i;if(jOWL.isExternal(t))return console.log("undeclared resource: "+t),new jOWL.Ontology.Property(t)}var a=jOWL.index("ID")[t];if(!a)for(caseIns in jOWL.index("ID"))if(caseIns.toLowerCase()==t.replace(/ /g,"").toLowerCase()){a=jOWL.index("ID")[caseIns];break}return a||(jOWL.isExternal(t)?(console.log("undeclared resource: "+t),new jOWL.Ontology.Thing(t)):(console.log(t+" not found"),null))}r=t.jquery?t:$(t);var o=jOWL.type(r);return o?new o(r):null},jOWL.type=function(t){var e=t.jquery?t.get(0):t;switch(e.nodeName){case __.owl("Class"):case __.rdfs("Class"):return jOWL.Ontology.Class;case __.owl("Ontology"):return jOWL.Ontology;case __.owl("ObjectProperty"):return jOWL.Ontology.ObjectProperty;case __.owl("DatatypeProperty"):return jOWL.Ontology.DatatypeProperty;case __.owl("FunctionalProperty"):case __.rdf("Property"):return jOWL.Ontology.Property;case __.owl("InverseFunctionalProperty"):case __.owl("TransitiveProperty"):case __.owl("SymmetricProperty"):return jOWL.Ontology.ObjectProperty;case __.owl("AnnotationProperty"):return jOWL.Ontology.DatatypeProperty;default:switch(e.namespaceURI){case __.owl():return e.nodeName==__.owl("Thing")&&jOWL.Ontology.Individual;case __.rdf():case __.rdfs():return!1;default:return jOWL.Ontology.Individual}}},jOWL.getXML=function(t){var e=[];function r(t){return jOWL.index("ID")[t]||null}if("string"==typeof t){var n=r(t);n&&e.push(n)}else jOWL.priv.Array.isArray(t)&&$.each(t,function(){var t=r(this);t&&e.push(t)});return e},jOWL.create=function(t,e,r){var n=r||jOWL.document,i={attr:function(t,e,r){if($.browser.msie){var i=n.createNode(2,t(e),t());i.nodeValue=r,this.node.setAttributeNode(i)}else this.node.setAttributeNS(t(),t(e),r);return this},appendTo:function(t){return(t.node?t.node:t).appendChild(this.node),this},text:function(t,e){var r=e?n.createCDATASection(t):n.createTextNode(t);return this.node.appendChild(r),this}};return i.node=$.browser.msie?n.createNode(1,t(e),t()):n.createElementNS(t(),t(e)),i},jOWL.create.document=function(t){var e=[],r=t||window.location.href+"#";return e.push('<?xml version="1.0"?>'),e.push("<"+__.rdf("RDF")+' xml:base="'+r+'" xmlns="'+r+'" '+__()+">"),e.push("   <"+__.owl("Ontology")+" "+__.rdf("about")+'=""/>'),e.push("</"+__.rdf("RDF")+">"),jOWL.fromString(e.join("\n"))},jOWL.parseRDFa=function(t,e){var r=e.node?$("[typeof]",e.node):$("[typeof]"),n=jOWL.create.document();function i(t,e){var r=[];return $("[property="+t+"]",e).each(function(){r.push($(this).attr("content")||$(this).html())}),e.attr("property")===t&&r.push(e.attr("content")||e.html()),r}r.each(function(){var t,e=$(this);e.attr("typeof")==__.owl("Class")&&(t=function(t,e){for(var r=jOWL.create(__.owl,"Class",n).attr(__.rdf,"about",e).appendTo(n.documentElement),a=i(__.rdfs("subClassOf"),t).concat(function(t,e){var r=[];return $("[rel="+t+"]",e).each(function(){r.push($(this).attr("resource"))}),e.attr("rel")===t&&r.push(e.attr("resource")),r}(__.rdfs("subClassOf"),t)),o=0;o<a.length;o++)jOWL.create(__.rdfs,"subClassOf",n).attr(__.rdf,"resource",a[o]).appendTo(r);return r}(e,jOWL.resolveURI(e.attr("about")))),$.each(i(__.rdfs("comment"),e),function(){jOWL.create(__.rdfs,"comment",n).appendTo(t).text(this,!0)}),$.each(i(__.rdfs("label"),e),function(){jOWL.create(__.rdfs,"label",n).appendTo(t).text(this)})}),jOWL.parse(n,e),t()},jOWL.query=function(t,e){"Class"==(e=$.extend({exclude:!1},e)).filter&&(e.filter=__.owl("Class")),new jOWL.Ontology.Array;var r={},n=jOWL.index("dictionary");function i(t){var n=!1,i=0;if(e.filter)if("string"==typeof e.filter)n=e.filter==t[3];else for(i=0;i<e.filter.length;i++)e.filter[i]==t[3]&&(n=!0);else if(e.exclude)if(n=!0,"string"==typeof e.exclude)n=e.exclude!==t[3];else for(i=0;i<e.exclude.length;i++)e.exclude[i]==t[3]&&(n=!1);else n=!0;n&&(r[t[1]]||(r[t[1]]=[]),r[t[1]].push({term:t[0],locale:t[2],type:t[3]}))}for(var a=0;a<n.length;a++){var o=n[a];o[0].searchMatch(t)>-1&&(e.locale?e.locale==o[2]&&i(o):i(o))}return r},jOWL.throttle=function(t,e){e=$.extend({modify:function(t){},onComplete:function(t){},async:!0,chewsize:5,startIndex:0,timing:5},e);var r=t.jOWL?t.items:t.jquery?$.makeArray(t):t,n=e.startIndex?r.slice(startIndex):r.concat(),i=[];!function(){for(var t=e.chewsize,r=[];t>0&&n.length>0;){var a=n.shift();t--;var o=e.modify.call(a,a);o&&(i.push(o),r.push(o))}e.onUpdate&&e.onUpdate(r),n.length>0?e.async?setTimeout(arguments.callee,e.timing):arguments.callee():e.onComplete(i)}()},jOWL.SPARQL_DL_Result=function(){this.assert=void 0,this.head={},this.results=[],this.isBound=!1},jOWL.SPARQL_DL_Result.prototype={sort:function(t){if(!t)throw"parameter must be defined for sort function";this.results&&this.results.sort(function(e,r){return(e[t].name||e[t])<(r[t].name||r[t])?-1:1})},jOWLArray:function(t){if(!t)throw"parameter must be defined for jOWLArray function";for(var e=new jOWL.Ontology.Array,r=0;r<this.results.length;r++)this.results[r][t]&&e.pushUnique(this.results[r][t]);return e},filter:function(t,e){if(void 0===this.head[t])this.head[t]=e;else{var r=this;this.head[t].filter(function(){return e.contains(this)}),e.filter(function(){return r.head[t].contains(this)})}},bind:function(t){if(!this.isBound)return this.results=this.results.concat(t.arr),void(this.isBound=!0);var e=-1;for(x in t.mappings)e++;var r=[];for(x in t.mappings){var n;e&&(n=t.keyCentric(x));for(var i=this.results.length-1;i>=0;i--){var a=this.results[i][x];if(a){if(!t.mappings[x].contains(a)){this.results.splice(i,1);continue}if(e){for(var o=n[a.URI],s=0;s<o.length;s++){var u=0===s?this.results[i]:{},l=o[s];for(yK in u[x]=a,l)u[yK]=l[yK];r.push(u)}this.results.splice(i,1)}}}}this.results=this.results.concat(r)}},jOWL.SPARQL_DL_Query=function(t,e){this.parse(t),this.fill(e),this.entries=this.entries.sort(this.sort)},jOWL.SPARQL_DL_Query.prototype={parse:function(t){var e=/(\w+)[(]([^)]+)[)]/,r=t.match(/(\w+[(][^)]+[)])/g);if(r){r=jOWL.priv.Array.unique(r);for(var n=0;n<r.length;n++){var i=r[n].match(e);if(3!=i.length)return void(this.error="invalid abstract sparql-dl syntax");r[n]=[i[1],i[2].replace(/ /g,"").split(",")]}this.entries=r}else this.error="invalid abstract sparql-dl syntax"},fill:function(t){for(var e=0;e<this.entries.length;e++)for(var r=0;r<this.entries[e][1].length;r++){var n=t[this.entries[e][1][r]];if(void 0!==n)this.entries[e][1][r]=n;else if("?"!=(n=this.entries[e][1][r]).charAt(0)){if("PropertyValue"==this.entries[e][0]&&2==r){var i=n.match(/^["'](.+)["']$/);if(i&&2==i.length){this.entries[e][1][r]={test:i[1]};break}}if(this.entries[e][1][r]=jOWL(n),null===this.entries[e][1][r])return void(this.entries.error="a parameter in the query was not found")}}},sort:function(t,e){var r;if(1==t[1].length)return"PropertyValue"==e[0]?1:-1;if(1==e[1].length)return"PropertyValue"==t[0]?-1:1;var n=0;for(r=0;r<t[1].length;r++)"string"==typeof t[1][r]&&n++;var i=0;for(r=0;r<t[1].length;r++)"string"==typeof e[1][r]&&i++;return n!=i?n-i:"Type"==t[0]&&"Type"!=e[0]?-1:"Type"!=t[0]&&"Type"==e[0]?1:0}},_Binding.prototype={bind:function(t,e){return this.value[t]=e,this.arr.mappings[t]||(this.arr.mappings[t]=new jOWL.Ontology.Array),this.arr.mappings[t].push(e),this}},SPARQL_DL_Array.prototype={add:function(t){return this.arr.push(t.value),t},push:function(t,e){var r=new _Binding(this);return r.bind(t,e),this.arr.push(r.value),r},keyCentric:function(t){for(var e={},r=this.arr.length-1;r>=0;r--)this.arr[r][t]&&(e[this.arr[r][t].URI]||(e[this.arr[r][t].URI]=[]),e[this.arr[r][t].URI].push(this.arr[r]));return e},get:function(t){return this.mappings[t]?this.mappings[t]:new jOWL.Ontology.Array},getArray:function(){for(var t=this.arr.length-1;t>=0;t--){var e=this.arr[t],r=!1;for(key in e)r||(r=!this.mappings[key]||!this.mappings[key].contains(e[key]));r&&this.arr.splice(t,1)}return this}},jOWL.SPARQL_DL=function(t,e,r){if(!(this instanceof arguments.callee))return new jOWL.SPARQL_DL(t,e,r);this.parameters=$.extend({},e),this.query=new jOWL.SPARQL_DL_Query(t,this.parameters).entries,this.result=new jOWL.SPARQL_DL_Result,this.options=$.extend({onComplete:function(t){}},r)},jOWL.SPARQL_DL.prototype={error:function(t){return this.result.error=t,this.options.onComplete(this.result)},execute:function(t){var e=this;if(this.options=$.extend(this.options,t),this.query.error)return this.error(this.query.error);var r=this.result,n=0,i=$.extend({},this.options);if(i.onComplete=function(t){r=t,a(++n)},!this.query.length)return r.error="no query found or query did not parse properly",e.options.onComplete(r);function a(t){if(!(t<e.query.length)){for(var n=0;n<r.results.length;n++){var a=r.results[n];for(x in a)a[x]instanceof jOWL.Literal&&(a[x]=a[x].name)}return e.options.onComplete(r)}e.process(e.query[t],r,i)}a(n)},process:function(t,e,r){r=$.extend({chewsize:10,async:!0,onComplete:function(t){}},r);var n=t[0],i={Type:[__.owl("Thing"),__.owl("Class")],DirectType:[__.owl("Thing"),__.owl("Class")],PropertyValue:[!1,!1,!1],Class:[!1],Thing:[!1],ObjectProperty:[!1],DatatypeProperty:[!1],SubClassOf:[__.owl("Class"),__.owl("Class")],DirectSubClassOf:[__.owl("Class"),__.owl("Class")]};if(!i[n])return this.error("'"+n+"' queries are not implemented");if(i[n].length!=t[1].length)return this.error("invalid SPARQL-DL "+n+" specifications, "+i[n].length+" parameters required");for(var a=0;a<t[1].length;a++){var o=i[n][a];if(o){var s=t[1][a];if("string"!=typeof s&&s.type!=o)return this.error("Parameter "+a+" in SPARQL-DL Query for "+n+" must be of the type: "+o)}}return"DirectType"==n?(r.childDepth=0,this.fn.Type.call(this,t[1],e,r)):"DirectSubClassOf"==n?(r.childDepth=1,this.fn.SubClassOf.call(this,t[1],e,r)):this.fn[n].call(this,t[1],e,r)},fn:{SubClassOf:function(t,e,r){var n=new jOWL.SPARQL_DL.DoubleAtom(t,e.head),i=new SPARQL_DL_Array;if(n.source.isURI()&&n.target.isURI()){if(!1!==e.assert){var a=n.source.value.ancestors();e.assert=a.contains(n.target.value)}return r.onComplete(e)}return n.source.isURI()?(n.source.value.ancestors().each(function(){i.push(n.target.value,this)}),e.filter(n.target.value,i.get(n.target.value)),e.bind(i.getArray()),r.onComplete(e)):n.target.isURI()?(n.target.value.descendants(r.childDepth).each(function(){i.push(n.source.value,this)}),e.filter(n.source.value,i.get(n.source.value)),e.bind(i.getArray()),r.onComplete(e)):this.error("Unsupported SubClassOf query")},Type:function(t,e,r){var n=new jOWL.SPARQL_DL.DoubleAtom(t,e.head);function i(t){if(!c[this.URI]){var e=a.push(n.source.value,this);s&&e.bind(n.target.value,t),c[this.URI]=!0}}if(n.source.isURI()&&n.target.isURI())return jOWL.SPARQL_DL.priv.assert(e,function(){var t=n.source.value.owlClass();return t.URI==n.target.value.URI||function t(e,r){var n=e.parents(),i=!1;return n.contains(r)?i=!0:n.each(function(){this!=jOWL.Thing&&!i&&t(this,r)&&(i=!0)}),i}(t,n.target.value)},r.onComplete);if(n.source.getURIs()&&!n.target.getURIs()){var a=new SPARQL_DL_Array,o=!n.source.isURI(),s=!n.target.isURI();return n.source.getURIs().each(function(){var t;s&&(t=a.push(n.target.value,this.owlClass())),o&&(s?t.bind(n.source.value,this):a.push(n.source.value,this))}),o&&e.filter(n.source.value,a.get(n.source.value)),s&&e.filter(n.target.value,a.get(n.target.value)),e.bind(a.getArray()),r.onComplete(e)}if(n.target.getURIs()){s=!n.target.isURI();var u=n.target.getURIs(),l={},c={};for(x in a=new SPARQL_DL_Array,u.each(function(){if(!l[this.URI]){var t=this.oneOf(),e=this;t.length?t.each(function(){i.call(this,e)}):this.descendants(r.childDepth).each(function(){l[this.URI]=!0}),l[this.URI]=!0}}),l){var h=jOWL.index("Thing")[x];if(h){var f=jOWL.index("ID")[x];r.onUpdate&&r.onUpdate(h),h.each(function(){i.call(this,f)})}}return e.filter(n.source.value,a.get(n.source.value)),e.bind(a.getArray()),r.onComplete(e)}return this.error("Unsupported Type query")},Thing:function(t,e,r){jOWL.SPARQL_DL.priv.IDQuery(t[0],"isThing",e,r)},Class:function(t,e,r){console.log("cl"),jOWL.SPARQL_DL.priv.IDQuery(t[0],"isClass",e,r)},ObjectProperty:function(t,e,r){jOWL.SPARQL_DL.priv.PropertyQuery(t[0],jOWL.index("property").items,"isObjectProperty",e,r)},DatatypeProperty:function(t,e,r){jOWL.SPARQL_DL.priv.PropertyQuery(t[0],jOWL.index("property").items,"isDatatypeProperty",e,r)},PropertyValue:function(t,e,r){var n=new jOWL.SPARQL_DL.TripleAtom(t,e.head);if(n.source.isURI()&&n.property.isURI()&&n.target.isURI())return!1!==e.assert&&jOWL.SPARQL_DL.priv.PropertyValuegetSourceInfo(n.source.value,n.property.value,n.target.value,e,{assert:!0}),r.onComplete(e);if(n.source.getURIs()){var i=!!n.target.isVar()&&n.target.value,a=!!n.property.isVar()&&n.property.value,o=!!n.source.isVar()&&n.source.value;return jOWL.SPARQL_DL.priv.PropertyValuegetSourceInfo(n.source.getURIs(),n.property.getURIs(),n.target.getURIs(),e,{filterTarget:i,filterProperty:a,filterSource:o}),r.onComplete(e)}jOWL.SPARQL_DL.priv.IDQuery(n.source.value,["isClass","isThing"],e,r)}}},jOWL.SPARQL_DL.priv={assert:function(t,e,r){!1!==t.assert&&(t.assert=e()),r(t)},PropertyValuegetSourceInfo:function(t,e,r,n,i){if(!t.isArray)return jOWL.SPARQL_DL.priv.PropertyValuegetSourceInfo(new jOWL.Ontology.Array([t]),e,r,n,i);var a=new SPARQL_DL_Array([(i=$.extend({},i)).filterSource,i.filterProperty,i.filterTarget]),o=!1;if(t.each(function(){var t=this;if(r&&r.isArray&&1==r.length){var n=r.get(0).test;n&&(r=n)}var s=t.sourceof(e,r);if(i.assert)s.length>0&&(o=!0);else if(s.length)return s.each(function(){var e=new _Binding(a);if(i.filterSource&&(e.bind(i.filterSource,t),!i.filterProperty&&!i.filterTarget))return a.add(e),!1;i.filterProperty&&e.bind(i.filterProperty,this.property),i.filterTarget&&e.bind(i.filterTarget,this.getTarget()),a.add(e)}),!0}),i.assert)return n.assert=o,n.assert;i.filterSource&&n.filter(i.filterSource,a.get(i.filterSource)),i.filterProperty&&n.filter(i.filterProperty,a.get(i.filterProperty)),i.filterTarget&&n.filter(i.filterTarget,a.get(i.filterTarget)),n.bind(a.getArray())},hasClassID:function(t,e){if("[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<e.length;r++)if(t[e])return!0}else if(t[e])return!0;return!1},IDQuery:function(t,e,r,n){var i=new jOWL.SPARQL_DL.Atom(t,r.head);if(i.isURI())return jOWL.SPARQL_DL.priv.assert(r,function(){return jOWL.SPARQL_DL.priv.hasClassID(i.getURIs().get(0),e)},n.onComplete);var a=new SPARQL_DL_Array;for(x in jOWL.index("ID")){var o=jOWL.index("ID")[x];jOWL.SPARQL_DL.priv.hasClassID(o,e)&&a.push(t,o)}r.filter(t,a.get(t)),r.bind(a.getArray()),n.onComplete(r)},PropertyQuery:function(t,e,r,n,i){var a=new jOWL.SPARQL_DL.Atom(t,n.head);if(a.isURI())return jOWL.SPARQL_DL.priv.assert(n,function(){return jOWL.SPARQL_DL.priv.hasClassID(a.getURIs().get(0),r)},i.onComplete);var o=new SPARQL_DL_Array;new jOWL.throttle(e,$.extend({},i,{modify:function(e){return e.jOWL||(e=jOWL(e)),jOWL.SPARQL_DL.priv.hasClassID(e,r)&&o.push(t,e),!1},onComplete:function(){n.filter(t,o.get(t)),n.bind(o.getArray()),i.onComplete(n)}}))}},jOWL.SPARQL_DL.TripleAtom=function(t,e){this.source=new jOWL.SPARQL_DL.Atom(t[0],e),this.property=new jOWL.SPARQL_DL.Atom(t[1],e),this.target=new jOWL.SPARQL_DL.Atom(t[2],e)},jOWL.SPARQL_DL.DoubleAtom=function(t,e){this.source=new jOWL.SPARQL_DL.Atom(t[0],e),this.target=new jOWL.SPARQL_DL.Atom(t[1],e)},jOWL.SPARQL_DL.Atom=function(t,e){this.value=t,this.type=0,"string"==typeof t?0===t.indexOf("?")?(this.type=this.VAR,e&&e[t]&&(this.mappings=e[t])):this.type=this.LITERAL:this.type=this.URI},jOWL.SPARQL_DL.Atom.prototype={URI:1,LITERAL:2,VAR:3,getURIs:function(){return this.isURI()?new jOWL.Ontology.Array([this.value]):this.mappings},isVar:function(){return this.type==this.VAR},isLiteral:function(){return this.type==this.LITERAL},isURI:function(){return this.type==this.URI}},jOWL.getURLParameters=function(){var t=window.location.href.split("?",2),e={};if(1==t.length)return{};for(var r=t[1].split("&"),n=0;n<r.length;n++){var i=r[n].split("=");2==i.length&&(e[i[0]]=i[1])}return e},jOWL.permalink=function(t){if(t){if(!t.URI)return!1;var e=window.location.href.split("?",2);if(window.location.search&&(e=e[0]),t.isClass)return e+"?owlClass="+escape(t.URI)}else{var r=jOWL.getURLParameters();if(r.owlClass)return jOWL(unescape(r.owlClass))}return!1},jOWL.Manchester=function(t){var e=[];if(t.isClass){var r=t.oneOf().map(function(){return this.label()});r.length&&e.push("{ "+r.join(", ")+" }")}return e.join(", ")}}(jQuery),String.prototype.searchMatch=function(t,e){if(this.search(new RegExp(t,"i"))>-1)return 1;for(var r=0,n=t.match(new RegExp("\\w+","ig")),i=0;i<n.length;i++)this.search(n[i])>-1&&r++;return r==n.length?0:-1},String.prototype.beautify=function(){var t=new RegExp("([a-z0-9])([A-Z])","g"),e=new RegExp("([A-Z])([A-Z0-9])([a-z])","g"),r=new RegExp("_","g");return this.replace(t,"$1 $2").replace(e,"$1 $2$3").replace(r," ")};